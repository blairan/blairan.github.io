[{"title":"0.91å‹_OLEDå¯¦é©—","url":"/2021/08/28/0-91%E5%90%8B-OLED%E5%AF%A6%E9%A9%97/","content":"<h1 id=\"0-91å‹-OLEDå¯¦é©—\"><a href=\"#0-91å‹-OLEDå¯¦é©—\" class=\"headerlink\" title=\"0.91å‹_OLEDå¯¦é©—\"></a>0.91å‹_OLEDå¯¦é©—</h1><h6 id=\"tags-esp32-0-91oled\"><a href=\"#tags-esp32-0-91oled\" class=\"headerlink\" title=\"tags: esp32 0.91oled\"></a>tags: <code>esp32</code> <code>0.91oled</code></h6><hr>\n<h2 id=\"æ›²æŠ˜é›¢å¥‡çš„0-91OLED\"><a href=\"#æ›²æŠ˜é›¢å¥‡çš„0-91OLED\" class=\"headerlink\" title=\"æ›²æŠ˜é›¢å¥‡çš„0.91OLED\"></a><em>æ›²æŠ˜é›¢å¥‡çš„0.91OLED</em></h2><p><strong>ç‚ºä»€éº¼æˆ‘é€™éº¼èªªå®ƒæ›²æŠ˜é›¢å¥‡,å› ç‚ºæˆ‘è©¦äº†å…©å¤©äº†</strong></p>\n<p><strong>å¾æ·˜Bè²·å›ä¾†å…©å€‹,å› ç‚ºå¸¶åœ¨èº«é‚Šçš„ä¸€å€‹,å°±æ‹¿ä¾†</strong></p>\n<p><strong>é–‹å§‹ç ”ç©¶,å…ˆæ˜¯ç”¨Adafriut_SSD1306åº«,çµæœéƒ½ä¸</strong></p>\n<p><strong>æˆåŠŸ,å¾Œä¾†ä½¿ç”¨u8g2libä¹Ÿä¸è¡Œ,æ•´å€‹è«åçš„ğŸ’¥ğŸ’¥ğŸ’¥</strong></p>\n<p><strong>ç„¶å¾Œç¬¬äºŒå¤©è¡å›å®¶æ‹¿å¦ä¸€å€‹OLEDä¾†è©¦,æ‰ç™¼ç¾</strong></p>\n<p><strong>ç¬¬ä¸€å€‹OLEDå£çš„ï¼Œç„¶å¾Œæˆ‘åˆç”¨Adafriut_SSD1306</strong></p>\n<p><strong>åº«è©¦ï¼Œä¸€æ¨£æ˜¯ä¸è¡Œï¼Œæœ€å¾Œæ‰¾åˆ°é€™å€‹<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/1717125022706858388#\">ssd1306</a>åº«(éAdafruit)</strong></p>\n<p><strong>çµ‚æ–¼å¯ä»¥é¡¯ç¤ºäº†ã€‚</strong></p>\n<hr>\n<p><strong>åƒè€ƒ:</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/1717125022706858388#\">http://arduino-er.blogspot.com/2020/12/i2c-ssd1306-oledesp32-esp32-devkitc-v4.html?m=1</a>  </p>\n<p><strong><em>å…ˆä¾†çœ‹çœ‹å¯¦éš›ä¸Šé¡¯ç¤ºçš„æ¨£å­</em></strong></p>\n<p><strong>ä¾‹1:</strong></p>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/se70n6MqrS0\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n<p><strong>ä¾‹2:</strong></p>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/oKcyi8UBHak\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n<hr>\n<p>h</p>\n<p><a href=\"https://diyprojects.io/media/2020/10/091-inch-128x32-iic-i2c-blue-oled-lcd-display-diy-oled-module-ssd1306-driver-1-1024x1024.jpg\"><img src=\"https://diyprojects.io/media/2020/10/091-inch-128x32-iic-i2c-blue-oled-lcd-display-diy-oled-module-ssd1306-driver-1-1024x1024.jpg\"></a></p>\n<p><strong>æ¥ç·šæ–¹å¾ˆç°¡å–®,ä¸»è¦æ˜¯ä½¿ç”¨I2Cå‚³è¼¸,æ‰€ä»¥åªè¦æŠŠ</strong></p>\n<p>ESP32Â  Â  Â OLED</p>\n<p>--------------------</p>\n<p>3VÂ  Â  Â  |Â  Â  Â VCC</p>\n<p>GNDÂ  |Â  Â  Â GND</p>\n<p>SCLÂ  Â  |Â  Â  Â D22</p>\n<p>SDAÂ  Â |Â  Â  Â D21</p>\n<hr>\n<p><strong>ç„¶å¾Œå°‡<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/1717125022706858388#\">ssd1306</a>åº«æ”¾å…¥Arduino IDEåº«è£¡å°±è¡Œ</strong></p>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><p><strong>ä¾‹1:</strong></p>\n<pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ssd1306.h\"</span></span>\n\n  \n\n<span class=\"token keyword\">void</span> <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\n  <span class=\"token function\">ssd1306_setFixedFont</span><span class=\"token punctuation\">(</span>ssd1306xled_font8x16<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">ssd1306_128x32_i2c_init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">ssd1306_clearScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">&#125;</span>\n\n  \n<span class=\"token keyword\">void</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\n  <span class=\"token function\">ssd1306_setFixedFont</span><span class=\"token punctuation\">(</span>ssd1306xled_font8x16<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">ssd1306_printFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Hello World!!!\"</span><span class=\"token punctuation\">,</span> STYLE_BOLD<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">ssd1306_clearScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">textDemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">ssd1306_clearScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>ä¾‹2:</strong></p>\n<pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ssd1306.h\"</span></span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\n  <span class=\"token function\">ssd1306_setFixedFont</span><span class=\"token punctuation\">(</span>ssd1306xled_font8x16<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">ssd1306_128x32_i2c_init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">ssd1306_clearScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\n  <span class=\"token function\">ssd1306_setFixedFont</span><span class=\"token punctuation\">(</span>ssd1306xled_font8x16<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">ssd1306_print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello World!!!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">ssd1306_clearScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","categories":["esp32"],"tags":["esp32","OLED"]},{"title":"ESP32è§£æ±ºå¿…é ˆæŒ‰BOOTæ‰èƒ½ä¸Šå‚³çš„å°æ–¹æ³•","url":"/2021/08/28/ESP32%E8%A7%A3%E6%B1%BA%E5%BF%85%E9%A0%88%E6%8C%89BOOT%E6%89%8D%E8%83%BD%E4%B8%8A%E5%82%B3%E7%9A%84%E5%B0%8F%E6%96%B9%E6%B3%95/","content":"<h1 id=\"ESP32è§£æ±ºå¿…é ˆæŒ‰BOOTæ‰èƒ½ä¸Šå‚³çš„å°æ–¹æ³•\"><a href=\"#ESP32è§£æ±ºå¿…é ˆæŒ‰BOOTæ‰èƒ½ä¸Šå‚³çš„å°æ–¹æ³•\" class=\"headerlink\" title=\"ESP32è§£æ±ºå¿…é ˆæŒ‰BOOTæ‰èƒ½ä¸Šå‚³çš„å°æ–¹æ³•\"></a>ESP32è§£æ±ºå¿…é ˆæŒ‰BOOTæ‰èƒ½ä¸Šå‚³çš„å°æ–¹æ³•</h1><h6 id=\"tags-esp32-è‡ªå‹•ä¸Šå‚³\"><a href=\"#tags-esp32-è‡ªå‹•ä¸Šå‚³\" class=\"headerlink\" title=\"tags: esp32 è‡ªå‹•ä¸Šå‚³\"></a>tags: <code>esp32</code> <code>è‡ªå‹•ä¸Šå‚³</code></h6><p><strong>æœ€è¿‘é–‹å§‹ç©ESP32ç™¼ç¾æœ‰é»éº»ç…©çš„æ˜¯æ¯æ¬¡ä¸€ä¸Šå‚³åˆ°æ¿å­éƒ½è¦å’Œè·Ÿâ€¦.___â€¦.</strong></p>\n<p><strong>è³½è·‘,å¾Œä¾†çœ‹åˆ°ç¤¾åœ˜ä¸Šæœ‰äº›å¤§å¤§æ•™å­¸ä½¿ç”¨10u~100uFçš„é›»å®¹å³å¯è§£æ±ºæ‰‹å‹•ä¸Šå‚³</strong></p>\n<p><strong>çš„å›°æ“¾ï¼Œæ­£å¥½å…¬å¸æœ‰100uF çš„é›»å®¹,æ‹¿ä¾†è©¦è©¦æœçœŸå¯ä»¥å‘¢!!!</strong></p>\n<p><strong>åƒè€ƒ:<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7627629995084093339#\">https://blog.darkthread.net/blog/esp32-upload-timeout-fix/?fbclid=IwAR2LK8WYw0P28fvPJDFXoARzUGvGylDiDCZUkpFhwD9u2TXvTX-yvM8yBGw</a></strong></p>\n<p><strong>æ–¹æ³•å¾ˆç°¡å–®ï¼Œåªè¦æ‹¿åˆ°é›»å®¹ï¼Œå°‡é›»å®¹æ­£ç«¯ç„Šåœ¨ENï¼Œè² ç«¯ç„Šåœ¨GNDï¼Œé€™æ¨£å°±è¡Œäº†ã€‚</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7627629995084093339#\"><img src=\"https://lh3.googleusercontent.com/-s_bry0zMywg/YK2yct35J8I/AAAAAAAAeM4/stIzQCfRT2cHLZNzMPnxxpC1YsXVbeS8ACNcBGAsYHQ/s1600/1621996128028104-0.png\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7627629995084093339#\"><img src=\"https://lh3.googleusercontent.com/-jJ-hOL_8GZg/YK2yXokvQFI/AAAAAAAAeM0/PLUQjbiaHfsRFYvit0UBIWz6vVgwRqp5wCNcBGAsYHQ/s1600/1621996094011888-1.png\"></a></p>\n","categories":["esp32"],"tags":["esp32","è‡ªå‹•ä¸Šå‚³"]},{"title":"ESP32è¨­å®šç„¡ç·šåŸºåœ°å°å’Œå›ºå®šIP","url":"/2021/08/28/ESP32%E8%A8%AD%E5%AE%9A%E7%84%A1%E7%B7%9A%E5%9F%BA%E5%9C%B0%E5%8F%B0%E5%92%8C%E5%9B%BA%E5%AE%9AIP/","content":"<h1 id=\"ESP32è¨­å®šç„¡ç·šåŸºåœ°å°å’Œå›ºå®šIP\"><a href=\"#ESP32è¨­å®šç„¡ç·šåŸºåœ°å°å’Œå›ºå®šIP\" class=\"headerlink\" title=\"ESP32è¨­å®šç„¡ç·šåŸºåœ°å°å’Œå›ºå®šIP\"></a>ESP32è¨­å®šç„¡ç·šåŸºåœ°å°å’Œå›ºå®šIP</h1><h6 id=\"tags-esp32-ç„¡ç·šåŸºåœ°å°\"><a href=\"#tags-esp32-ç„¡ç·šåŸºåœ°å°\" class=\"headerlink\" title=\"tags: esp32 ç„¡ç·šåŸºåœ°å°\"></a>tags: <code>esp32</code> <code>ç„¡ç·šåŸºåœ°å°</code></h6><p><strong>ESP32ä¹Ÿèƒ½ä½¿è‡ªå·±è®Šæˆç„¡ç·šåŸºåœ°å°(AP)ï¼Œä½¿å…¶å®ƒè¨­å‚™é€£ä¸Šè‡ªå·±çš„ç¶²è·¯ï¼Œ</strong></p>\n<p><strong>é›–ç„¶å¾ˆæ–¹ä¾¿ï¼Œä½†ä¸é©åˆç”¨æ–¼è² è·é«˜çš„æ‡‰ç”¨ã€‚</strong></p>\n<p><strong>åªè¦ä¸€è¡ŒçŸ­çš„æŒ‡ä»¤å°±èƒ½è¾¦åˆ°</strong></p>\n<p><strong>WiFi.softAP(â€œSSIDåç¨±â€)</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;WiFi.h&gt;\n  \nvoidÂ setup()&#123;\n\nÂ Â Â Â WiFi.softAP(&quot;ESP32ç„¡ç·šåŸºåœ°å°&quot;);\n\n&#125;\n\nvoidÂ loop()&#123;\n\n&#125;\n\n  <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>ä¸Šå‚³ä¹‹å¾Œåœ¨æ‰‹æ©Ÿç«¯æœå°‹WiFiå¯ä»¥çœ‹åˆ°ESP32é¡¯ç¤ºç‚ºåŸºåœ°å°åç¨±</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/801948207668992406#\"><img src=\"https://lh3.googleusercontent.com/-I6zVUPbh2t8/YKdSssq03vI/AAAAAAAAeLI/W5jfwPBtPwc887winp2CTalxbKSl_xSzwCNcBGAsYHQ/s1600/1621578415343300-0.png\"></a></p>\n<p><strong>åšè©¦è·ŸESP32é€£ç·šä¹‹å¾Œï¼Œæ‰‹æ©Ÿæœ¬èº«çš„ç¶²è·¯åŠŸèƒ½å°‡ç„¡æ³•ä½¿ç”¨ã€‚</strong></p>\n<hr>\n<h2 id=\"è‡ªè¨‚åŸºåœ°å°ä¸¦è¨­å®šå›ºå®šIP\"><a href=\"#è‡ªè¨‚åŸºåœ°å°ä¸¦è¨­å®šå›ºå®šIP\" class=\"headerlink\" title=\"è‡ªè¨‚åŸºåœ°å°ä¸¦è¨­å®šå›ºå®šï¼©ï¼°\"></a>è‡ªè¨‚åŸºåœ°å°ä¸¦è¨­å®šå›ºå®šï¼©ï¼°</h2><p><strong>softAP(â€œSSIDâ€, å¯†ç¢¼, é€šé“)</strong></p>\n<p><strong>SSID:åŸºåœ°å°åç¨±</strong></p>\n<p><strong>å¯†ç¢¼:åŸºåœ°å°å¯†ç¢¼</strong></p>\n<p><strong>é€šé“:1~13å€‹é€šé“å¯ä¾›é¸æ“‡</strong></p>\n<p><strong>softAPConfig(IPä½å€, é–˜é“IPä½å€, å­ç¶²è·¯é®ç½©)</strong></p>\n<p><strong>é ˆæ³¨æ„ä¸Šé¢æŒè™Ÿè£¡é è¨­å€¼åˆ†åˆ¥ç‚º192.168.4.1ï¼Œ192.168.4.1ï¼Œ255.255.255.0</strong></p>\n<p>*<strong>ä¸€èˆ¬IPä½ç½®å’Œé–˜é“IPä½å€è¨­å®šç›¸åŒ</strong></p>\n<p><strong>å› ç‚ºIPè¨­å®šçš„æ ¼å¼å¯èƒ½è¼ƒç‚ºè¤‡é›œï¼Œç¿’æ…£ä¸Šæœƒä½¿ç”¨IPAddressé¡åˆ¥ä¾†</strong></p>\n<p><strong>å»ºç«‹ipï¼Œé–˜é“ipï¼Œå­ç¶²è·¯é®ç½©ã€‚</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;WiFi.h&gt;\n\nIPAddressÂ local_IP(192,Â 168,Â 4,Â 11);\n\nIPAddressÂ gateway(192,Â 168,Â 4,Â 11);\n\nIPAddressÂ subnet(255,Â 255Â ,255,Â 0);\n\nconstÂ charÂ *SSIDÂ &#x3D;Â &quot;ESP32åŸºåœ°å°&quot;;\n\nconstÂ charÂ *passwordÂ &#x3D;Â &quot;ctk674011&quot;;\n\nvoidÂ setup()&#123;\n\nÂ Â Â Â Serial.begin(115200);\n\nÂ Â Â Â WiFi.softAPConfig(local_IP,Â gateway,Â subnet);\n\nÂ Â Â Â whileÂ (!WiFi.softAP(SSID,Â password))&#123;\n\nÂ Â Â Â &#125;\n\nÂ Â Â Â Serial.println(&quot;å•“å‹•æˆåŠŸ&quot;);\n\nÂ Â Â Â Serial.print(&quot;IPä½å€:Â &quot;);\n\nÂ Â Â Â Serial.println(WiFi.softAPIP());\n\n&#125;\n\nvoidÂ loop()&#123;\n\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>ç¨‹å¼ä¸Šå‚³å¾Œå¦‚æœåŸºåœ°å°å•“å‹•æˆåŠŸï¼Œç€è¦½å™¨æœƒé¡¯ç¤ºå¦‚ä¸‹è³‡è¨Š</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/801948207668992406#\"><img src=\"https://1.bp.blogspot.com/-crYRZRbaPA8/YKdRi7oX4PI/AAAAAAAAeK0/ivBD_2fyreYrHTiRHS59iVeQsWcfMqe7gCNcBGAsYHQ/w293-h303/%25E6%2593%25B7%25E5%258F%2596_2021_05_21_14_17_56_195.jpg\"></a></p>\n<p><strong>ç„¶å¾Œæ‰‹æ©ŸWiFiæœƒæœå°‹åˆ°ESP32åŸºåœ°å°çš„åç¨±ï¼Œè¼¸å…¥å‰›è¨­å®šçš„å¯†ç¢¼å³å¯é€£ç·š</strong></p>\n<p><strong>ï¼Šæ‰‹æ©Ÿå’ŒESP32é€£ç·šå¾Œï¼Œæ‰‹æ©Ÿå°‡ç„¡æ³•é€£å¤–ç¶²ã€‚</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/801948207668992406#\"><img src=\"https://lh3.googleusercontent.com/-QeQlaToWUVE/YKdSr-Y4OTI/AAAAAAAAeLE/Sp1uUgsegwMhx-SmZM5HR8QFY5ZOZucLgCNcBGAsYHQ/s1600/1621578412456247-1.png\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/801948207668992406#\"><img src=\"https://lh3.googleusercontent.com/-cr2sa2BFcto/YKdSrfhHEkI/AAAAAAAAeLA/oA2qnepOO-MJL8S9LAJrvYemWHSvIk8vQCNcBGAsYHQ/s1600/1621578409821481-2.png\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/801948207668992406#\"><img src=\"https://lh3.googleusercontent.com/-6aaKJ8_SzlQ/YKdSqtnZGCI/AAAAAAAAeK8/56YBZ12PQnkLhIv9z09KUHIrM_lmV2yYACNcBGAsYHQ/s1600/1621578407212556-3.png\"></a></p>\n","categories":["esp32"],"tags":["esp32","wifi"]},{"title":"MediaPipe+UNOæ‰‹å‹¢æ§åˆ¶ä¼ºæœé¦¬é”","url":"/2021/08/28/MediaPipe-UNO%E6%89%8B%E5%8B%A2%E6%8E%A7%E5%88%B6%E4%BC%BA%E6%9C%8D%E9%A6%AC%E9%81%94/","content":"<h1 id=\"MediaPipe-UNOæ‰‹å‹¢æ§åˆ¶ä¼ºæœé¦¬é”\"><a href=\"#MediaPipe-UNOæ‰‹å‹¢æ§åˆ¶ä¼ºæœé¦¬é”\" class=\"headerlink\" title=\"MediaPipe+UNOæ‰‹å‹¢æ§åˆ¶ä¼ºæœé¦¬é”\"></a>MediaPipe+UNOæ‰‹å‹¢æ§åˆ¶ä¼ºæœé¦¬é”</h1><h6 id=\"tags-mediapipe-arduino-servo\"><a href=\"#tags-mediapipe-arduino-servo\" class=\"headerlink\" title=\"tags: mediapipe arduino servo\"></a>tags: <code>mediapipe</code> <code>arduino</code> <code>servo</code></h6><p><strong>åƒè€ƒè¦–é »ç¶²å€:</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6959160158145357673/5177980124815283469#\">https://youtu.be/9iEPzbG-xLE</a></p>\n<h3 id=\"MediaPipe\"><a href=\"#MediaPipe\" class=\"headerlink\" title=\"MediaPipe\"></a><a href=\"https://draft.blogger.com/blog/post/edit/6959160158145357673/5177980124815283469#\">MediaPipe</a></h3><p>ç°¡å–®ä¾†èªªæ˜¯googleè·¨å¹³å°è€Œä¸”é–‹æºçš„æ©Ÿå™¨å­¸ç¿’é‹ç”¨</p>\n<p>MediaPipeæ˜¯ä¸€æ¬¾ç”±Googleé–‹ç™¼ä¸¦é–‹æºçš„æ•¸æ“šæµè™•ç†æ©Ÿå™¨å­¸ç¿’æ‡‰ç”¨é–‹ç™¼æ¡†æ¶ã€‚å®ƒæ˜¯ä¸€å€‹åŸºæ–¼åœ–çš„æ•¸æ“šè™•ç†ç®¡ç·šï¼Œç”¨æ–¼æ§‹å»ºä½¿ç”¨äº†å¤šç¨®å½¢å¼çš„æ•¸æ“šæºï¼Œå¦‚è¦–é »ã€éŸ³é »ã€å‚³æ„Ÿå™¨æ•¸æ“šä»¥åŠä»»ä½•æ™‚é–“åºåˆ—æ•¸æ“šã€‚ MediaPipeæ˜¯è·¨å¹³å°çš„ï¼Œå¯ä»¥é‹è¡Œåœ¨åµŒå…¥å¼å¹³å°(æ¨¹è“æ´¾ç­‰)ï¼Œç§»å‹•è¨­å‚™(iOSå’ŒAndroid)ï¼Œå·¥ä½œç«™å’Œæœå‹™å™¨ä¸Šï¼Œä¸¦æ”¯æŒç§»å‹•ç«¯GPUåŠ é€Ÿã€‚ä½¿ç”¨MediaPipeï¼Œå¯ä»¥å°‡æ©Ÿå™¨å­¸ç¿’ä»»å‹™æ§‹å»ºç‚ºä¸€å€‹åœ–å½¢çš„æ¨¡å¡Šè¡¨ç¤ºçš„æ•¸æ“šæµç®¡é“ï¼Œå¯ä»¥åŒ…æ‹¬æ¨ç†æ¨¡å‹å’Œæµåª’é«”è™•ç†åŠŸèƒ½ã€‚</p>\n<h3 id=\"pinpong\"><a href=\"#pinpong\" class=\"headerlink\" title=\"pinpong\"></a><a href=\"https://draft.blogger.com/blog/post/edit/6959160158145357673/5177980124815283469#\">pinpong</a></h3><p>pinpongåº«æ˜¯ä¸€å¥—æ§åˆ¶é–‹æºç¡¬ä»¶ä¸»æ§æ¿çš„Pythonåº«</p>\n<p>ï¼ŒåŸºæ–¼Firmataå”è­°ä¸¦å…¼å®¹MicroPythonèªæ³•ï¼Œ5åˆ†é˜å³å¯è®“ä½ ä¸Šæ‰‹ä½¿ç”¨Pythonæ§åˆ¶é–‹æºç¡¬ä»¶ã€‚</p>\n<p>æœ‰èˆˆè¶£å¯ä»¥åˆ°<a href=\"https://draft.blogger.com/blog/post/edit/6959160158145357673/5177980124815283469#\">pinpongå®˜ç¶²</a>çœ‹ä¸€ä¸‹ï¼Œ</p>\n<p>æˆ‘æ˜¯ä½¿ç”¨pycharmï¼Œæ‰€ä»¥é¦–å…ˆå®‰è£opencv-pythonï¼Œmediapipeå’Œpinpongé€™å…©å€‹ä¸»è¦çš„ç¨‹å¼åº«</p>\n<h2 id=\"æ­¥é©Ÿ1\"><a href=\"#æ­¥é©Ÿ1\" class=\"headerlink\" title=\"æ­¥é©Ÿ1:\"></a>æ­¥é©Ÿ1:</h2><p><strong>å…ˆæŠŠé€™å€‹ç¨‹å¼åº«å‘½åç‚ºhandutil.pyå’Œä¸»ç¨‹å¼æ”¾ä¸€èµ·</strong></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> cv2  \n<span class=\"token keyword\">import</span> mediapipe <span class=\"token keyword\">as</span> mp  \n  \n<span class=\"token keyword\">class</span> <span class=\"token class-name\">HandDetector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  \n<span class=\"token triple-quoted-string string\">'''  \n   æ‰‹åŠ¿è¯†åˆ«ç±»  \n'''</span>   \n<span class=\"token keyword\">def</span> <span class=\"token function\">_init_</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> mode<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> max_hands<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> detection_con<span class=\"token operator\">=</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> track_con<span class=\"token operator\">=</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  \n<span class=\"token triple-quoted-string string\">'''  \n   åˆå§‹åŒ–  \n   :param mode: æ˜¯å¦é™æ€å›¾ç‰‡ï¼Œé»˜è®¤ä¸ºFalse  \n   :param max_hands: æœ€å¤šå‡ åªæ‰‹ï¼Œé»˜è®¤ä¸º2åª  \n   :param detection_con: æœ€å°æ£€æµ‹ä¿¡åº¦å€¼ï¼Œé»˜è®¤ä¸º0.5  \n   :param track_con: æœ€å°è·Ÿè¸ªä¿¡åº¦å€¼ï¼Œé»˜è®¤ä¸º0.5  \n '''</span>   \n    self<span class=\"token punctuation\">.</span>mode <span class=\"token operator\">=</span> mode  \n    self<span class=\"token punctuation\">.</span>max_hands <span class=\"token operator\">=</span> max_hands  \n    self<span class=\"token punctuation\">.</span>detection_con <span class=\"token operator\">=</span> detection_con  \n    self<span class=\"token punctuation\">.</span>track_con <span class=\"token operator\">=</span> track_con  \n\n    self<span class=\"token punctuation\">.</span>hands <span class=\"token operator\">=</span> mp<span class=\"token punctuation\">.</span>solutions<span class=\"token punctuation\">.</span>hands<span class=\"token punctuation\">.</span>Hands<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>mode<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>max_hands<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>detection_con<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>track_con<span class=\"token punctuation\">)</span>  \n  \n    <span class=\"token keyword\">def</span> <span class=\"token function\">find_hands</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> img<span class=\"token punctuation\">,</span> draw<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  \n        <span class=\"token triple-quoted-string string\">'''  \n   æ£€æµ‹æ‰‹åŠ¿  \n   :param img: è§†é¢‘å¸§å›¾ç‰‡  \n   :param draw: æ˜¯å¦ç”»å‡ºæ‰‹åŠ¿ä¸­çš„èŠ‚ç‚¹å’Œè¿æ¥å›¾  \n   :return: å¤„ç†è¿‡çš„è§†é¢‘å¸§å›¾ç‰‡  \n '''</span>   imgRGB <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>cvtColor<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>COLOR_BGR2RGB<span class=\"token punctuation\">)</span>  \n        <span class=\"token comment\"># å¤„ç†å›¾ç‰‡ï¼Œæ£€æµ‹æ˜¯å¦æœ‰æ‰‹åŠ¿ï¼Œå°†æ•°æ®å­˜è¿›self.resultsä¸­  </span>\n        self<span class=\"token punctuation\">.</span>results <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>hands<span class=\"token punctuation\">.</span>process<span class=\"token punctuation\">(</span>imgRGB<span class=\"token punctuation\">)</span>  \n                <span class=\"token keyword\">if</span> draw<span class=\"token punctuation\">:</span>  \n                    <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>results<span class=\"token punctuation\">.</span>multi_hand_landmarks<span class=\"token punctuation\">:</span>  \n                        <span class=\"token keyword\">for</span> handlms <span class=\"token keyword\">in</span> self<span class=\"token punctuation\">.</span>results<span class=\"token punctuation\">.</span>multi_hand_landmarks<span class=\"token punctuation\">:</span>  \n                            mp<span class=\"token punctuation\">.</span>solutions<span class=\"token punctuation\">.</span>drawing_utils<span class=\"token punctuation\">.</span>draw_landmarks<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> handlms<span class=\"token punctuation\">,</span> mp<span class=\"token punctuation\">.</span>solutions<span class=\"token punctuation\">.</span>hands<span class=\"token punctuation\">.</span>HAND_CONNECTIONS<span class=\"token punctuation\">)</span>  \n        <span class=\"token keyword\">return</span> img  \n  \n    <span class=\"token keyword\">def</span> <span class=\"token function\">find_positions</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> img<span class=\"token punctuation\">,</span> hand_no<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  \n        <span class=\"token triple-quoted-string string\">'''  \n   è·å–æ‰‹åŠ¿æ•°æ®  \n   :param img: è§†é¢‘å¸§å›¾ç‰‡  \n   :param hand_no: æ‰‹ç¼–å·ï¼ˆé»˜è®¤ç¬¬1åªæ‰‹ï¼‰  \n   :return: æ‰‹åŠ¿æ•°æ®åˆ—è¡¨ï¼Œæ¯ä¸ªæ•°æ®æˆå‘˜ç”±id, x, yç»„æˆï¼Œä»£ç è¿™ä¸ªæ‰‹åŠ¿ä½ç½®ç¼–å·ä»¥åŠåœ¨å±å¹•ä¸­çš„ä½ç½®  \n    '''</span>   \n        self<span class=\"token punctuation\">.</span>lmslist <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>  \n        <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>results<span class=\"token punctuation\">.</span>multi_hand_landmarks<span class=\"token punctuation\">:</span>  \n            hand <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>results<span class=\"token punctuation\">.</span>multi_hand_landmarks<span class=\"token punctuation\">[</span>hand_no<span class=\"token punctuation\">]</span>  \n            <span class=\"token keyword\">for</span> <span class=\"token builtin\">id</span><span class=\"token punctuation\">,</span> lm <span class=\"token keyword\">in</span> <span class=\"token builtin\">enumerate</span><span class=\"token punctuation\">(</span>hand<span class=\"token punctuation\">.</span>landmark<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  \n                h<span class=\"token punctuation\">,</span> w<span class=\"token punctuation\">,</span> c <span class=\"token operator\">=</span> img<span class=\"token punctuation\">.</span>shape  \n                cx<span class=\"token punctuation\">,</span> cy <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>lm<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> w<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>lm<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> h<span class=\"token punctuation\">)</span>  \n                self<span class=\"token punctuation\">.</span>lmslist<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">id</span><span class=\"token punctuation\">,</span> cx<span class=\"token punctuation\">,</span> cy<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  \n  \n        <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>lmslist<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<hr>\n<h2 id=\"æ­¥é©Ÿ2\"><a href=\"#æ­¥é©Ÿ2\" class=\"headerlink\" title=\"æ­¥é©Ÿ2:\"></a>æ­¥é©Ÿ2:</h2><h2 id=\"è¤‡åˆ¶è²¼ä¸Šä¸»ç¨‹å¼\"><a href=\"#è¤‡åˆ¶è²¼ä¸Šä¸»ç¨‹å¼\" class=\"headerlink\" title=\"è¤‡åˆ¶è²¼ä¸Šä¸»ç¨‹å¼\"></a><strong>è¤‡åˆ¶è²¼ä¸Šä¸»ç¨‹å¼</strong></h2><h2 id=\"é€™è£¡ç•™æ„ä¸€ä¸‹è¨ˆç®—æ–œè§’è½‰æˆè§’åº¦çš„å…¬å¼\"><a href=\"#é€™è£¡ç•™æ„ä¸€ä¸‹è¨ˆç®—æ–œè§’è½‰æˆè§’åº¦çš„å…¬å¼\" class=\"headerlink\" title=\"*é€™è£¡ç•™æ„ä¸€ä¸‹è¨ˆç®—æ–œè§’è½‰æˆè§’åº¦çš„å…¬å¼\"></a>*<strong>é€™è£¡ç•™æ„ä¸€ä¸‹è¨ˆç®—æ–œè§’è½‰æˆè§’åº¦çš„å…¬å¼</strong></h2><h3 id=\"ç®—å‡ºè§’åº¦\"><a href=\"#ç®—å‡ºè§’åº¦\" class=\"headerlink\" title=\"ç®—å‡ºè§’åº¦:\"></a>ç®—å‡ºè§’åº¦:</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">å‡å¦‚ä¸¤ç‚¹åæ ‡åˆ†åˆ«æ˜¯ï¼ˆx1ï¼Œy1ï¼‰ï¼ˆx2ï¼Œy2ï¼‰\n\né‚£ä¹ˆæ–œç‡æ˜¯ï¼šï¼ˆy2-y1ï¼‰&#x2F;ï¼ˆx2-x1ï¼‰\n\nk&#x3D;(y2-y1)&#x2F;(x2-x1) å…¶ä¸­(x1,y1),(x2,y2) æ˜¯å·²çŸ¥ä¸¤ç‚¹çš„åæ ‡\n\nå·²çŸ¥A(x1ï¼Œy1)ï¼ŒB(x2ï¼Œy2)  \n1ã€è‹¥x1&#x3D;x2ï¼Œåˆ™æ–œç‡ä¸å­˜åœ¨ï¼›  \n2ã€è‹¥x1â‰ x2ï¼Œåˆ™æ–œç‡k&#x3D;(y2ï¼y1)&#x2F;(x2ï¼x1)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"ç®—å‡ºå¼§åº¦\"><a href=\"#ç®—å‡ºå¼§åº¦\" class=\"headerlink\" title=\"ç®—å‡ºå¼§åº¦:\"></a><strong>ç®—å‡ºå¼§åº¦:</strong></h3><pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> math\n\nmath<span class=\"token punctuation\">.</span>degrees<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span>\n\n<span class=\"token operator\">**</span>xç‚ºä¸€å€‹å€¼<span class=\"token operator\">**</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> cv2  \n<span class=\"token keyword\">from</span> HandTrackingMoudle <span class=\"token keyword\">import</span> handDetector  \n<span class=\"token keyword\">import</span> math  \n<span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np  \n<span class=\"token keyword\">from</span> pinpong<span class=\"token punctuation\">.</span>board <span class=\"token keyword\">import</span> Board<span class=\"token punctuation\">,</span> Pin<span class=\"token punctuation\">,</span> Servo  \n<span class=\"token keyword\">import</span> time  \n  \nBoard<span class=\"token punctuation\">(</span><span class=\"token string\">\"uno\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>begin<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  \nmyServo <span class=\"token operator\">=</span> Servo<span class=\"token punctuation\">(</span>Pin<span class=\"token punctuation\">(</span>Pin<span class=\"token punctuation\">.</span>A0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  \n  \ncap <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>VideoCapture<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>  \n  \ndetector <span class=\"token operator\">=</span> handDetector<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  \nangle <span class=\"token operator\">=</span> <span class=\"token number\">0</span>  \n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>  \n    success<span class=\"token punctuation\">,</span> img <span class=\"token operator\">=</span> cap<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  \n    img <span class=\"token operator\">=</span> detector<span class=\"token punctuation\">.</span>findHands<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> draw<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>  \n    lmList <span class=\"token operator\">=</span> detector<span class=\"token punctuation\">.</span>findPosition<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> personDraw<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>  \n    <span class=\"token keyword\">if</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>lmList<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>  \n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>lmList<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> lmList<span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  \n        x1<span class=\"token punctuation\">,</span> y1 <span class=\"token operator\">=</span> lmList<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> lmList<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>  \n        x2<span class=\"token punctuation\">,</span> y2 <span class=\"token operator\">=</span> lmList<span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> lmList<span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>  \n        cv2<span class=\"token punctuation\">.</span>circle<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>x1<span class=\"token punctuation\">,</span> y1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>FILLED<span class=\"token punctuation\">)</span>  \n        cv2<span class=\"token punctuation\">.</span>circle<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>x2<span class=\"token punctuation\">,</span> y2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>FILLED<span class=\"token punctuation\">)</span>  \n        cv2<span class=\"token punctuation\">.</span>line<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>x1<span class=\"token punctuation\">,</span> y1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>x2<span class=\"token punctuation\">,</span> y2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span>  \n  \n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x1 <span class=\"token operator\">-</span> x2<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>  \n            angle <span class=\"token operator\">=</span> math<span class=\"token punctuation\">.</span>degrees<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>arctan<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>y2 <span class=\"token operator\">-</span> y1<span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token punctuation\">(</span>x2 <span class=\"token operator\">-</span> x1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  \n            a <span class=\"token operator\">=</span> <span class=\"token number\">180</span> <span class=\"token operator\">-</span> angle  \n            myServo<span class=\"token punctuation\">.</span>write_angle<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  \n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  \n        <span class=\"token keyword\">if</span> angle <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>  \n            angle <span class=\"token operator\">=</span> <span class=\"token builtin\">abs</span><span class=\"token punctuation\">(</span>angle<span class=\"token punctuation\">)</span>  \n            myServo<span class=\"token punctuation\">.</span>write_angle<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>angle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  \n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>angle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  \n  \n  \n    cv2<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span><span class=\"token string\">\"Image\"</span><span class=\"token punctuation\">,</span> img<span class=\"token punctuation\">)</span>  \n    cv2<span class=\"token punctuation\">.</span>waitKey<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"æ­¥é©Ÿ3\"><a href=\"#æ­¥é©Ÿ3\" class=\"headerlink\" title=\"æ­¥é©Ÿ3:\"></a>æ­¥é©Ÿ3:</h2><h2 id=\"åŸ·è¡Œç¨‹å¼ç¢¼\"><a href=\"#åŸ·è¡Œç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"åŸ·è¡Œç¨‹å¼ç¢¼\"></a>åŸ·è¡Œç¨‹å¼ç¢¼</h2><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/tTvcI0AKj-U\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n<hr>\n","categories":["mediapipe"],"tags":["mediapipe","arduino","servo"]},{"title":"WiFiç¶²è·¯é€£æ¥","url":"/2021/08/28/WiFi%E7%B6%B2%E8%B7%AF%E9%80%A3%E6%8E%A5/","content":"<h1 id=\"WiFiç¶²è·¯é€£æ¥\"><a href=\"#WiFiç¶²è·¯é€£æ¥\" class=\"headerlink\" title=\"WiFiç¶²è·¯é€£æ¥\"></a>WiFiç¶²è·¯é€£æ¥</h1><h6 id=\"tags-micropython-WiFi\"><a href=\"#tags-micropython-WiFi\" class=\"headerlink\" title=\"tags: micropython WiFi\"></a>tags: <code>micropython</code> <code>WiFi</code></h6><hr>\n<h2 id=\"micropython-ESP32ä¸‹ç¶²è·¯é€£æ¥çš„æ¨¡å¼å¯åˆ†ç‚º\"><a href=\"#micropython-ESP32ä¸‹ç¶²è·¯é€£æ¥çš„æ¨¡å¼å¯åˆ†ç‚º\" class=\"headerlink\" title=\"micropython ESP32ä¸‹ç¶²è·¯é€£æ¥çš„æ¨¡å¼å¯åˆ†ç‚º\"></a>micropython ESP32ä¸‹ç¶²è·¯é€£æ¥çš„æ¨¡å¼å¯åˆ†ç‚º</h2><ul>\n<li>  STA:åšç‚ºç«™é»æ¥å…¥WiFi</li>\n<li>  AP:åšç‚ºç†±é»,å……è¨±å…¶å®ƒè¨­å‚™æ¥å…¥</li>\n</ul>\n<h2 id=\"å‡½å¼åƒè€ƒ-micropythonå‡½å¼ç­†è¨˜æœ¬\"><a href=\"#å‡½å¼åƒè€ƒ-micropythonå‡½å¼ç­†è¨˜æœ¬\" class=\"headerlink\" title=\"å‡½å¼åƒè€ƒ-micropythonå‡½å¼ç­†è¨˜æœ¬\"></a>å‡½å¼åƒè€ƒ-<a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/8403042239316796526#\">micropythonå‡½å¼ç­†è¨˜æœ¬</a></h2><h2 id=\"ç†±é»æ¨¡å¼-AP\"><a href=\"#ç†±é»æ¨¡å¼-AP\" class=\"headerlink\" title=\"ç†±é»æ¨¡å¼(AP)\"></a>ç†±é»æ¨¡å¼(AP)</h2><p>ç†±é»æ¨¡å¼å…è¨±ç”¨æˆ¶å°‡è‡ªå·±çš„ESP32é…ç½®ç‚ºç†±é»ï¼Œé€™è®“å¤šå€‹ESP32èŠ¯ç‰‡ä¹‹é–“çš„ç„¡ç·šé€£æ¥åœ¨ä¸å€ŸåŠ©å¤–éƒ¨è·¯ç”±å™¨ç¶²çµ¡çš„æƒ…æ³ä¸‹æˆç‚ºå¯èƒ½ã€‚ </p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> network\n\nap <span class=\"token operator\">=</span> network<span class=\"token punctuation\">.</span>wifi<span class=\"token punctuation\">(</span>network<span class=\"token punctuation\">.</span>AP_IF<span class=\"token punctuation\">)</span> <span class=\"token comment\"># å‰µå»ºç†±é»</span>\n\nap<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>         <span class=\"token comment\"># å»ºç«‹ç†±é»</span>\n\nap<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">(</span>ssid<span class=\"token operator\">=</span><span class=\"token string\">'ESP-AP'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># å»ºç«‹ç†±é»åç¨±</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<hr>\n<h2 id=\"ç«™é»æ¨¡å¼-STA\"><a href=\"#ç«™é»æ¨¡å¼-STA\" class=\"headerlink\" title=\"ç«™é»æ¨¡å¼(STA)\"></a>ç«™é»æ¨¡å¼(STA)</h2><pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> network\n\nssid<span class=\"token operator\">=</span><span class=\"token string\">\"åŸºåœ°å°åç¨±\"</span>\n\npassword<span class=\"token operator\">=</span><span class=\"token string\">\"å¯†ç¢¼\"</span>\n\nwifi<span class=\"token operator\">=</span>network<span class=\"token punctuation\">.</span>WLAN<span class=\"token punctuation\">(</span>network<span class=\"token punctuation\">.</span>STA_IF<span class=\"token punctuation\">)</span>\n\nwifi<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n\nwifi<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span>ssid<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">while</span> wifi<span class=\"token punctuation\">.</span>isconnected<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">==</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">:</span>\n\n  <span class=\"token keyword\">pass</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"connrcted success\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>wifi<span class=\"token punctuation\">.</span>ifconfig<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"çµæœé¡¯ç¤º\"><a href=\"#çµæœé¡¯ç¤º\" class=\"headerlink\" title=\"çµæœé¡¯ç¤º\"></a>çµæœé¡¯ç¤º</h3><p><em><strong>å…¶ä¸­â€™192.168.243.124â€™å°±æ˜¯localIP</strong></em></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">&gt;&gt;&gt;Â True\n\nconnrctedÂ success\n\n(&#39;192.168.243.124&#39;,Â &#39;255.255.255.0&#39;,Â &#39;192.168.243.101&#39;,Â &#39;192.168.243.101&#39;)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>","categories":["micropython","esp32"],"tags":["esp32","wifi","micropython"]},{"title":"å…©å€‹ESP32è—èŠ½ä¸»å¾ç«¯äº’è¯","url":"/2021/08/28/%E5%85%A9%E5%80%8BESP32%E8%97%8D%E8%8A%BD%E4%B8%BB%E5%BE%9E%E7%AB%AF%E4%BA%92%E8%81%AF/","content":"<h1 id=\"å…©å€‹ESP32è—èŠ½ä¸»å¾ç«¯äº’è¯\"><a href=\"#å…©å€‹ESP32è—èŠ½ä¸»å¾ç«¯äº’è¯\" class=\"headerlink\" title=\"å…©å€‹ESP32è—èŠ½ä¸»å¾ç«¯äº’è¯\"></a>å…©å€‹ESP32è—èŠ½ä¸»å¾ç«¯äº’è¯</h1><h6 id=\"tags-esp32-è—èŠ½\"><a href=\"#tags-esp32-è—èŠ½\" class=\"headerlink\" title=\"tags: esp32 è—èŠ½\"></a>tags: <code>esp32</code> <code>è—èŠ½</code></h6><hr>\n<h2 id=\"å¾ç«¯ç¨‹å¼ç¢¼å¯åƒè€ƒ-è—èŠ½åŸºæœ¬é€šè¨Š-amp-æ§åˆ¶LED-ESP32\"><a href=\"#å¾ç«¯ç¨‹å¼ç¢¼å¯åƒè€ƒ-è—èŠ½åŸºæœ¬é€šè¨Š-amp-æ§åˆ¶LED-ESP32\" class=\"headerlink\" title=\"å¾ç«¯ç¨‹å¼ç¢¼å¯åƒè€ƒ-è—èŠ½åŸºæœ¬é€šè¨Š&amp;æ§åˆ¶LED-ESP32\"></a>å¾ç«¯ç¨‹å¼ç¢¼å¯åƒè€ƒ-<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2055229884501562897#\">è—èŠ½åŸºæœ¬é€šè¨Š&amp;æ§åˆ¶LED-ESP32</a></h2><hr>\n<p>ç¾åœ¨åˆ©ç”¨å…©å€‹ESP32çš„è—èŠ½äº’ç›¸æºé€šï¼Œæ‰€ä»¥ä¸€å€‹è¦ç•¶â€ä¸»(Master)â€,å¦ä¸€å€‹</p>\n<p>è¦ç•¶â€å¾(slave)â€ã€‚</p>\n<h3 id=\"ä¸»ç«¯ç¨‹å¼ç¢¼\"><a href=\"#ä¸»ç«¯ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ä¸»ç«¯ç¨‹å¼ç¢¼\"></a>ä¸»ç«¯ç¨‹å¼ç¢¼</h3><p>å…ˆå°‡ä¸»ç«¯ç¨‹å¼ç¢¼ä¸Šå‚³è‡³esp32-1</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;BluetoothSerial.h&gt;\n\n&#x2F;&#x2F;master\n\nBluetoothSerialÂ myBTmaster; --å»ºç«‹ä¸»ç«¯ç‰©ä»¶å\n\nconstÂ StringÂ slave&#x3D;&quot;myBTslave&quot;; --&quot; &quot;è£¡é¢æ˜¯å¾ç«¯è—èŠ½å\n\n  \nconstÂ charÂ *PIN&#x3D;&quot;1234&quot;;--é è¨­çš„pinç¢¼\n\nboolÂ connected; --\n\n\nvoidÂ setup()&#123;\n\nÂ Â Â Â myBTmaster.begin(&quot;bt-master&quot;,Â true); --è¨­å®šä¸»ç«¯åå’Œè¨­æˆä¸»æ§ç«¯\n\nÂ Â Â Â Serial.begin(115200);\n\nÂ Â Â Â Serial.printf(&quot;è—èŠ½å·²å•“å‹•,é€²å…¥masteræ¨¡å¼\\\\n&quot;);\n\nÂ Â Â Â Serial.println(&quot;é€£ç·šä¸­...&quot;);\n\nÂ Â Â Â connected&#x3D;myBTmaster.connect(slave); --æª¢æŸ¥æ˜¯å¦å·²é€£çµå¾ç«¯è—èŠ½\n\nÂ Â Â Â ifÂ (connected)&#123;\n\nÂ Â Â Â Â Â Â Â Serial.println(&quot;é€£ç·šæˆåŠŸ&quot;);\nÂ Â Â Â &#125;\n&#125;\n\n\nvoidÂ loop()&#123;\n\nÂ Â Â Â myBTmaster.println(&quot;1&quot;);\n\nÂ Â Â Â delay(300);\n\nÂ Â Â Â myBTmaster.println(&quot;0&quot;);\n\nÂ Â Â Â delay(300);\n\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"å¾ç«¯ç¨‹å¼ç¢¼\"><a href=\"#å¾ç«¯ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"å¾ç«¯ç¨‹å¼ç¢¼\"></a>å¾ç«¯ç¨‹å¼ç¢¼</h3><p>å†å°‡å¾ç«¯ç¨‹å¼ç¢¼ä¸Šå‚³è‡³esp32-2</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;BluetoothSerial.h&gt;\n\n&#x2F;&#x2F;slave\n\nBluetoothSerialÂ myBTslave;\n\ncharÂ incomeData;\n\nvoidÂ setup()&#123;\n\nÂ Â Â Â myBTslave.begin(&quot;bt-slave&quot;); â€”â€”å»ºç«‹å¾ç«¯è—èŠ½åç¨±\n\nÂ Â Â Â pinMode(LED_BUILTIN,Â OUTPUT);\n\n&#125;\n\n  \n\nvoidÂ loop()&#123;\n\nÂ Â Â Â incomeData&#x3D;myBTslave.read();\n\nÂ Â Â Â ifÂ (incomeData&#x3D;&#x3D;&#39;1&#39;)&#123;\n\nÂ Â Â Â Â Â Â Â digitalWrite(LED_BUILTIN,Â HIGH);\n\nÂ Â Â Â &#125;else if (incomeData&#x3D;&#x3D;&#39;0&#39;)&#123;\n\nÂ Â Â Â Â Â Â Â digitalWrite(LED_BUILTIN,Â LOW);\n\nÂ Â Â Â &#125;\n\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<hr>\n<p><strong>éƒ½ä¸Šå‚³å®Œä¹‹å¾Œå°‡å…©å¡Šæ¿å­resetï¼Œå¦‚æœæˆåŠŸï¼Œæœƒçœ‹åˆ°å¾ç«¯æ¿å­ä¸Šçš„å…§å»ºLEDé–ƒçˆ</strong></p>\n","categories":["esp32"],"tags":["esp32","è—èŠ½"]},{"title":"æŒ‰éˆ•æ§åˆ¶LED-micropython","url":"/2021/08/28/%E6%8C%89%E9%88%95%E6%8E%A7%E5%88%B6LED-micropython/","content":"<h1 id=\"æŒ‰éˆ•æ§åˆ¶LEDâ€“micropython\"><a href=\"#æŒ‰éˆ•æ§åˆ¶LEDâ€“micropython\" class=\"headerlink\" title=\"æŒ‰éˆ•æ§åˆ¶LEDâ€“micropython\"></a>æŒ‰éˆ•æ§åˆ¶LEDâ€“micropython</h1><h6 id=\"tags-micropython\"><a href=\"#tags-micropython\" class=\"headerlink\" title=\"tags: micropython\"></a>tags: <code>micropython</code></h6><h2 id=\"æ¥ç·š\"><a href=\"#æ¥ç·š\" class=\"headerlink\" title=\"æ¥ç·š\"></a>æ¥ç·š</h2><p><a href=\"https://i0.wp.com/randomnerdtutorials.com/wp-content/uploads/2019/04/led_button_esp32_bb.png?w=1065&quality=100&strip=all&ssl=1\"><img src=\"https://i0.wp.com/randomnerdtutorials.com/wp-content/uploads/2019/04/led_button_esp32_bb.png?w=1065&quality=100&strip=all&ssl=1\"></a></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> machine <span class=\"token keyword\">import</span> Pin\n\n<span class=\"token keyword\">from</span> time <span class=\"token keyword\">import</span> sleep\n\n  \n\nled <span class=\"token operator\">=</span> Pin<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> Pin<span class=\"token punctuation\">.</span>OUT<span class=\"token punctuation\">)</span>\n\nbutton <span class=\"token operator\">=</span> Pin<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> Pin<span class=\"token punctuation\">.</span>IN<span class=\"token punctuation\">)</span>\n\n  \n\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n\n    led<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    sleep<span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<hr>\n<p><strong>é¦–å…ˆå¾machineè¼‰å…¥Pinï¼Œå¾timeè¼‰å…¥sleep</strong></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> machine <span class=\"token keyword\">import</span> Pin <span class=\"token keyword\">from</span> time <span class=\"token keyword\">import</span> sleep<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>ä¸‹é¢è·¨è™Ÿæœ‰å…©å€‹åƒæ•¸ï¼Œï¼•æ˜¯esp32ä¸Šçš„GPIOæ¥è…³ï¼ŒPin.OUTè¡¨ç¤ºç¬¬5è…³ä½é è¨­ç‚ºè¼¸å‡º</strong></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">led <span class=\"token operator\">=</span> Pin<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> Pin<span class=\"token punctuation\">.</span>OUT<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>å’Œä¸Šé¢ä¸€æ¨£é“ç†ï¼Œåªä¸éç¬¬äºŒå€‹åƒæ•¸æ˜¯ç”¨Pin.INè¡¨ç¤ºæŒ‰éˆ•æ˜¯ä»¥è¼¸å…¥çš„æ–¹å¼è¨­å®š</strong></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">button <span class=\"token operator\">=</span> Pin<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> Pin<span class=\"token punctuation\">.</span>IN<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>ç•¶æˆ‘å€‘æŒ‰ä¸‹æŒ‰éˆ•æ™‚ï¼Œbutton.value() è¿”å› 1ã€‚å› æ­¤ï¼Œé€™èˆ‡ led.value(1) ç›¸åŒã€‚é€™æœƒå°‡ LED ç‹€æ…‹è¨­ç½®ç‚º 1ï¼Œé»äº® LEDã€‚ç•¶æŒ‰éˆ•æœªè¢«æŒ‰ä¸‹æ™‚ï¼Œbutton.value() è¿”å› 0ã€‚å› æ­¤ï¼Œæˆ‘å€‘æœ‰ led.value(0)ï¼Œä¸¦ä¸” LED ä¿æŒé—œé–‰ç‹€æ…‹ã€‚</strong></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">led<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<hr>\n<h2 id=\"å¯¦ä½œçµæœ\"><a href=\"#å¯¦ä½œçµæœ\" class=\"headerlink\" title=\"å¯¦ä½œçµæœ\"></a>å¯¦ä½œçµæœ</h2><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/4boMaNGBm8I\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>","categories":["micropython","esp32"],"tags":["micropython","led"]},{"title":"æ–æ¡¿æ§åˆ¶äº‘å°-ESP32","url":"/2021/08/28/%E6%90%96%E6%A1%BF%E6%8E%A7%E5%88%B6%E4%BA%91%E5%8F%B0-ESP32/","content":"<h1 id=\"æ–æ¡¿æ§åˆ¶äº‘å°-ESP32\"><a href=\"#æ–æ¡¿æ§åˆ¶äº‘å°-ESP32\" class=\"headerlink\" title=\"æ–æ¡¿æ§åˆ¶äº‘å°-ESP32\"></a>æ–æ¡¿æ§åˆ¶äº‘å°-ESP32</h1><h6 id=\"tags-esp32-æ–æ¡¿-äº‘å°\"><a href=\"#tags-esp32-æ–æ¡¿-äº‘å°\" class=\"headerlink\" title=\"tags: esp32 æ–æ¡¿ äº‘å°\"></a>tags: <code>esp32</code> <code>æ–æ¡¿</code> <code>äº‘å°</code></h6><h3 id=\"å¯¦é©—ç›®çš„\"><a href=\"#å¯¦é©—ç›®çš„\" class=\"headerlink\" title=\"å¯¦é©—ç›®çš„\"></a>å¯¦é©—ç›®çš„</h3><p><strong>ä»¥æ–æ¡¿çš„è®€å€¼åŒæ­¥æ§åˆ¶ä¼ºæœé¦¬é”ã€‚</strong></p>\n<p><strong>é ˆæ³¨æ„å€¼è¦è½‰æ›æˆè§’åº¦ã€‚</strong></p>\n<h3 id=\"ä¼ºæœé¦¬é”\"><a href=\"#ä¼ºæœé¦¬é”\" class=\"headerlink\" title=\"ä¼ºæœé¦¬é”\"></a>ä¼ºæœé¦¬é”</h3><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/3060329269915131288#\"><img src=\"https://1.bp.blogspot.com/-qUFym3H-21Q/YIywjKU9TPI/AAAAAAAAeGk/_GiSq6LVWYA4sOlvfkGRHzt-lUoZgKjjwCNcBGAsYHQ/w315-h210/servo.jpg\"></a></p>\n<p><strong>ä¼ºæœé¦¬é”è¢«å»£ç¯„é‹åœ¨å¾®æ§æ¿çš„æ§åˆ¶ä¸Š,å¹¾ä¹é€™æ˜¯å­¸ç¿’å¾®æ§æ¿çš„åŸºç¤</strong></p>\n<p><strong>å…·ä»£è¡¨çš„å¯¦é©—å°±æ˜¯äºŒè»¸äº‘å°,å®ƒæ˜¯ä»¥å…©å€‹ä¼ºæœé¦¬é”æ§‹æˆå¹³ç§»å’Œä¸Šä¸‹</strong></p>\n<p><strong>é‹å‹•çš„è£ç½®,è‡³æ–¼SG90é€™ç¨®å°å‹ä¼ºæœé¦¬é”çš„é‹ä½œç¶²è·¯ä¸Šå¾ˆå¤šè³‡æº,</strong></p>\n<p><strong>å°±ä¸ä¸€ä¸€è´…è¿°ã€‚</strong></p>\n<h2 id=\"æ–æ¡¿æ¨¡çµ„\"><a href=\"#æ–æ¡¿æ¨¡çµ„\" class=\"headerlink\" title=\"æ–æ¡¿æ¨¡çµ„\"></a>æ–æ¡¿æ¨¡çµ„</h2><h4 id=\"è«‹åƒç…§é€™ç¯‡çš„å¯¦é©—â€”https-esp32-blairan-blogspot-com-2021-04-esp32-28-html\"><a href=\"#è«‹åƒç…§é€™ç¯‡çš„å¯¦é©—â€”https-esp32-blairan-blogspot-com-2021-04-esp32-28-html\" class=\"headerlink\" title=\"è«‹åƒç…§é€™ç¯‡çš„å¯¦é©—â€”https://esp32-blairan.blogspot.com/2021/04/esp32_28.html\"></a>è«‹åƒç…§é€™ç¯‡çš„å¯¦é©—â€”<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/3060329269915131288#\">https://esp32-blairan.blogspot.com/2021/04/esp32_28.html</a></h4><h2 id=\"æ¥ç·šåœ–\"><a href=\"#æ¥ç·šåœ–\" class=\"headerlink\" title=\"æ¥ç·šåœ–\"></a>æ¥ç·šåœ–</h2><p><strong>POSï¼¸-D33</strong></p>\n<p><strong>POSï¼¹â€”D32</strong></p>\n<p><strong>SERVO_PANâ€”-&gt;D12</strong></p>\n<p><strong>SERVO_TITâ€”-&gt;D13</strong></p>\n<p><strong>GND</strong></p>\n<p><strong>3V3</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/3060329269915131288#\"><img src=\"https://1.bp.blogspot.com/-OySoM8bHU9s/YIyyJmCXZLI/AAAAAAAAeGs/G450OX409awrx2D8wMHg3dZGLJPPd5QLwCNcBGAsYHQ/w450-h467/1.jpg\"></a></p>\n<p><strong>é ˆåŒ¯å…¥</strong><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/3060329269915131288#\">ESP32Servo.h</a></p>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre><code class=\"line-numbers language-c#\">#include &lt;ESP32Servo.h&gt;\n\nServoÂ Pan;\n\nServoÂ Tit;\n\n#define servoPAN 12\n\n#define servoTIT 13\n\n#define posX 33\n\n#define posY 32 \n\nvoidÂ setup()\n\n&#123;\n\nÂ Â Serial.begin(115200);\n\nÂ Â analogSetAttenuation(ADC_11db);\n\nÂ Â analogSetWidth(10);\n\nÂ Â Pan.setPeriodHertz(50);\n\nÂ Â Tit.setPeriodHertz(50);\n\nÂ Â Pan.attach(servoPAN,Â 500,Â 2400);\n\nÂ Â Tit.attach(servoTIT,Â 500,Â 2400);\n\n&#125;\n\nvoidÂ loop()&#123;\n\nÂ Â intÂ valx=analogRead(posX);\n\nÂ Â valx=map(valx,Â 0,Â 1023,Â 0,Â 180);\n\nÂ Â Pan.write(valx);\n\nÂ Â intÂ valy=analogRead(posY);\n\nÂ Â valy=map(valy,Â 0,Â 1023,Â 0,Â 180);\n\nÂ Â Tit.write(valy);\n\nÂ Â delay(500);\n\nÂ Â Serial.printf(&quot;posXçš„æ–æ¡¿å€¼ç‚º:Â %dÂ Â //Â posYçš„æ–æ¡¿å€¼ç‚º:Â %d\\\\n&quot;,valx,Â valy);\n\n&#125;\n</code></pre>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/-CYCyibcFn0\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n","categories":["esp32"],"tags":["esp32","æ–æ¡¿","äº‘å°"]},{"title":"è—èŠ½åŸºæœ¬é€šè¨Š&æ§åˆ¶LED-ESP32","url":"/2021/08/28/%E8%97%8D%E8%8A%BD%E5%9F%BA%E6%9C%AC%E9%80%9A%E8%A8%8A-%E6%8E%A7%E5%88%B6LED-ESP32/","content":"<h1 id=\"è—èŠ½åŸºæœ¬é€šè¨Š-amp-æ§åˆ¶LED-ESP32\"><a href=\"#è—èŠ½åŸºæœ¬é€šè¨Š-amp-æ§åˆ¶LED-ESP32\" class=\"headerlink\" title=\"è—èŠ½åŸºæœ¬é€šè¨Š&amp;æ§åˆ¶LED-ESP32\"></a>è—èŠ½åŸºæœ¬é€šè¨Š&amp;æ§åˆ¶LED-ESP32</h1><h6 id=\"tags-esp32-è—èŠ½\"><a href=\"#tags-esp32-è—èŠ½\" class=\"headerlink\" title=\"tags: esp32 è—èŠ½\"></a>tags: <code>esp32</code> <code>è—èŠ½</code></h6><hr>\n<h4 id=\"Arduinoæœ¬èº«ä¹Ÿå¯ä»¥å¤–æ¥è—èŠ½å’ŒWIFIï¼Œä½†æ˜¯é ˆè¦å¤–æ›ï¼Œé€™é»\"><a href=\"#Arduinoæœ¬èº«ä¹Ÿå¯ä»¥å¤–æ¥è—èŠ½å’ŒWIFIï¼Œä½†æ˜¯é ˆè¦å¤–æ›ï¼Œé€™é»\" class=\"headerlink\" title=\"Arduinoæœ¬èº«ä¹Ÿå¯ä»¥å¤–æ¥è—èŠ½å’ŒWIFIï¼Œä½†æ˜¯é ˆè¦å¤–æ›ï¼Œé€™é»\"></a>Arduinoæœ¬èº«ä¹Ÿå¯ä»¥å¤–æ¥è—èŠ½å’ŒWIFIï¼Œä½†æ˜¯é ˆè¦å¤–æ›ï¼Œé€™é»</h4><h4 id=\"å°±é¡¯å¾—éº»ç…©ä¸€äº›ï¼›ESP32ç³»åˆ—éƒ½æœ‰å…§å»ºè—èŠ½å’ŒWIFIé€™æ¨£å°±ç¨\"><a href=\"#å°±é¡¯å¾—éº»ç…©ä¸€äº›ï¼›ESP32ç³»åˆ—éƒ½æœ‰å…§å»ºè—èŠ½å’ŒWIFIé€™æ¨£å°±ç¨\" class=\"headerlink\" title=\"å°±é¡¯å¾—éº»ç…©ä¸€äº›ï¼›ESP32ç³»åˆ—éƒ½æœ‰å…§å»ºè—èŠ½å’ŒWIFIé€™æ¨£å°±ç¨\"></a>å°±é¡¯å¾—éº»ç…©ä¸€äº›ï¼›ESP32ç³»åˆ—éƒ½æœ‰å…§å»ºè—èŠ½å’ŒWIFIé€™æ¨£å°±ç¨</h4><h4 id=\"èƒ½çœäº‹ï¼Œè€Œä¸”èªæ³•å’ŒArduinoçš„è—èŠ½ç”¨æ³•å¹¾ä¹ä¸€æ¨£ã€‚\"><a href=\"#èƒ½çœäº‹ï¼Œè€Œä¸”èªæ³•å’ŒArduinoçš„è—èŠ½ç”¨æ³•å¹¾ä¹ä¸€æ¨£ã€‚\" class=\"headerlink\" title=\"èƒ½çœäº‹ï¼Œè€Œä¸”èªæ³•å’ŒArduinoçš„è—èŠ½ç”¨æ³•å¹¾ä¹ä¸€æ¨£ã€‚\"></a>èƒ½çœäº‹ï¼Œè€Œä¸”èªæ³•å’ŒArduinoçš„è—èŠ½ç”¨æ³•å¹¾ä¹ä¸€æ¨£ã€‚</h4><hr>\n<h2 id=\"æ“ä½œæ–¹æ³•\"><a href=\"#æ“ä½œæ–¹æ³•\" class=\"headerlink\" title=\"æ“ä½œæ–¹æ³•:\"></a>æ“ä½œæ–¹æ³•:</h2><p>:memo: <strong><em>é¦–å…ˆå¯«å¥½ç¨‹å¼ä¸¦ä¸Šå‚³è‡³ESP32</em></strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;BluetoothSerial.h&gt;\n\nBluetoothSerialÂ myBT;\n\ncharÂ incomeData;\n\nvoidÂ setup()&#123;\n\nÂ Â Â Â Serial.begin(115200);\n\nÂ Â Â Â myBT.begin(&quot;ctkBT-01&quot;);\n\nÂ Â Â Â pinMode(LED_BUILTIN,Â OUTPUT);\n\n&#125;\n\nvoidÂ loop()&#123;\n\nÂ Â Â Â ifÂ (myBT.available())&#123;\n\nÂ Â Â Â Â Â Â Â incomeData&#x3D;myBT.read();\n\nÂ Â Â Â Â Â Â Â Serial.printf(&quot;å¾è—èŠ½åˆ°:Â %d\\&quot;,Â incomeData);\n\nÂ Â Â Â &#125;\n\nÂ Â Â Â ifÂ (incomeData&#x3D;&#x3D;&#39;1&#39;)&#123;\n\nÂ Â Â Â Â Â Â Â digitalWrite(LED_BUILTIN,Â HIGH);\n\nÂ Â Â Â Â Â Â Â myBT.printf(&quot;LEDé–‹å•“å›‰!!!&quot;);Â Â &#x2F;&#x2F;æ‰‹æ©Ÿç«¯æ”¶è¨Š\n\nÂ Â Â Â &#125;elseÂ ifÂ (incomeData&#x3D;&#x3D;&#39;0&#39;)\n\nÂ Â Â Â &#123;\n\nÂ Â Â Â Â Â Â Â digitalWrite(LED_BUILTIN,Â LOW);\n\nÂ Â Â Â Â Â Â Â myBT.printf(&quot;LEDé—œé–‰å›‰!!!&quot;);Â &#x2F;&#x2F;æ‰‹æ©Ÿç«¯æ”¶è¨Š\n\nÂ Â Â Â &#125;\n\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<hr>\n<p>:memo:<strong>æ‰‹æ©Ÿç«¯</strong></p>\n<ol>\n<li> <strong>æ‰‹æ©Ÿè—èŠ½é…å°ESP32</strong></li>\n<li><strong>åœ¨google playerä¸‹è¼‰Serial Bluetooth Terminal</strong></li>\n</ol>\n<p><strong>å…¶å®ƒè«‹çœ‹è¦–é »æ“ä½œ</strong></p>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/G1-VYOFByYU\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>","categories":["esp32"],"tags":["esp32","è—èŠ½"]},{"title":"MQTT&node-REDæ§åˆ¶äºŒè»¸äº‘å°-mpython","url":"/2021/08/28/MQTT-node-RED%E6%8E%A7%E5%88%B6%E4%BA%8C%E8%BB%B8%E4%BA%91%E5%8F%B0-mpython/","content":"<h1 id=\"MQTT-amp-node-REDæ§åˆ¶äºŒè»¸äº‘å°-mpython\"><a href=\"#MQTT-amp-node-REDæ§åˆ¶äºŒè»¸äº‘å°-mpython\" class=\"headerlink\" title=\"MQTT&amp;node-REDæ§åˆ¶äºŒè»¸äº‘å°-mpython\"></a>MQTT&amp;node-REDæ§åˆ¶äºŒè»¸äº‘å°-mpython</h1><p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/4999901201185761586#\"><img src=\"https://lh3.googleusercontent.com/-sqJOZzdBnks/YSjK1HOEkWI/AAAAAAAAe3o/ShJX8l8V20cmENfwoL0iij0uZm_wHfwaQCNcBGAsYHQ/w208-h349/1630063309993121-0.png\"></a></p>\n<p><em><strong>æ‰¿æ¥<a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/4999901201185761586#\">ä½¿ç”¨PWMæ§åˆ¶ä¼ºæœé¦¬é”-micropython</a>é€™ç¯‡ï¼Œé€énode-redåŠ å…¥mqttè¨‚é–±ä¸»é¡Œæ§åˆ¶äºŒè»¸äº‘å°</strong></em></p>\n<p><em><strong>æœ‰ä¸€äº›æ„Ÿæƒ³ç´€éŒ„ä¸‹ä¾†ï¼Œæˆ‘ç™¼ç¾å…¶å¯¦åƒmqttæˆ–è€…wifié€£ç¶²ï¼Œå¤§éƒ½æ˜¯å›ºå®šä¸€å€‹å¯«æ³•ï¼Œå…¶å®ƒä¸åŒçš„æ¨¡çµ„åˆ†ç‚ºè®€å–æ•¸å€¼æˆ–ç”¨æ•¸å€¼å—æ§åˆ¶çš„å…ƒä»¶ï¼Œåªè¦å¥—ç”¨ä¸Šå»å°±å¯ä»¥ã€‚</strong></em></p>\n<p><em><strong>é¦–å…ˆä¸»è¦æ˜¯è¢«æ§åˆ¶çš„ä¼ºæœé¦¬é”ï¼Œæ‰€ä»¥å…ˆæŠŠå®ƒæ¸¬è©¦ä¸€ä¸‹ï¼Œåƒè€ƒé€™ç¯‡ï¼ˆ<a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/4999901201185761586#\">é»æˆ‘</a>ï¼‰</strong></em></p>\n<p><em><strong>æ¸¬è©¦å¥½ä¹‹å¾Œï¼Œå°±å¯ä»¥é–‹å§‹åŠ å…¥wifiå’Œmqttäº†ï¼Œä½†å› ç‚ºæˆ‘ç”¨çš„æ˜¯æ¨¹è“æ´¾å»ºç«‹çš„ï¼­QTTï¼Œæ‰€ä»¥é€™é™ªåˆ†å‰ææ˜¯è¦æœ‰æ¨¹è‹ºæ´¾ï¼Œå¦‚ä½•åœ¨æ¨¹è‹ºæ´¾ä¸Šå»ºç«‹ï¼®ode-REDå’ŒMQTTï¼Œå¯ä»¥åƒè€ƒé€™ç¯‡ï¼ˆ<a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/4999901201185761586#\">é»æˆ‘</a>ï¼‰ã€‚</strong></em></p>\n<hr>\n<h2 id=\"Node-REDè¨­å®š\"><a href=\"#Node-REDè¨­å®š\" class=\"headerlink\" title=\"Node-REDè¨­å®š\"></a>Node-REDè¨­å®š</h2><p><a href=\"https://1.bp.blogspot.com/-GksKBPZ26_o/YSpWJWFmwhI/AAAAAAAAe4E/6peztH_jPDgTVkrbfKGBriWMdPbxcnCyACNcBGAsYHQ/s1920/3.jpg\"><img src=\"https://1.bp.blogspot.com/-GksKBPZ26_o/YSpWJWFmwhI/AAAAAAAAe4E/6peztH_jPDgTVkrbfKGBriWMdPbxcnCyACNcBGAsYHQ/w654-h368/3.jpg\"></a></p>\n<p><a href=\"https://1.bp.blogspot.com/-bIpsZvvgG6Y/YSpVzj9SmhI/AAAAAAAAe34/-V-RirefCUETcVru84SLRomgYX3EzNOnQCNcBGAsYHQ/s1920/1.jpg\"><img src=\"https://1.bp.blogspot.com/-bIpsZvvgG6Y/YSpVzj9SmhI/AAAAAAAAe34/-V-RirefCUETcVru84SLRomgYX3EzNOnQCNcBGAsYHQ/w661-h370/1.jpg\"></a></p>\n<p><a href=\"https://1.bp.blogspot.com/-AS8DJhdGX5Q/YSpV8K4e0hI/AAAAAAAAe38/1h6rhTpCw1wwJ_hmA4QAZDDkU-6MBBANwCNcBGAsYHQ/s1920/2.jpg\"><img src=\"https://1.bp.blogspot.com/-AS8DJhdGX5Q/YSpV8K4e0hI/AAAAAAAAe38/1h6rhTpCw1wwJ_hmA4QAZDDkU-6MBBANwCNcBGAsYHQ/w654-h368/2.jpg\"></a></p>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre><code class=\"line-numbers language-python\">from machine import SLEEP, Pin, PWM, freq\nfrom time import sleep \nfrom umqtttsimple import MQTTClient  \nimport binascii, micropython, network, time, socket, machine\n    \nssid = &quot;------------&quot;\npassword = &quot;-------&quot;\nmqtt_server = &quot;192.168.210.22&quot;\n    \n#å°‡å®¢æˆ¶ç«¯IDè½‰æ›ç‚º16é€²ä½,ä»¥ä¾¿MQTTä¼ºæœç«¯è®€å–\n    \nmqtt_id = binascii.hexlify(machine.unique_id())\n    \n\n#å’ŒNord-REDä¸Šçš„ä¸»é¡Œä¸€è‡´\n    \nclient_servoPan = b&#39;esp32/servoPan&#39;\nclient_servoTilt = b&#39;esp32/servoTilt&#39;\n    \nservo_pan = PWM(Pin(13), freq=50)\nservo_tilt = PWM(Pin(14), freq=50)\n    \n#wifié€£ç·š\n    \ndef wifiConn():\n    wifi = network.WLAN(network.STA_IF)\n    wifi.active(True)\nÂ  Â  wifi.connect(ssid, password)\n Â   while wifi.isconnected() == False:\n        pass\n    print(&quot;Connected successful!&quot;)\n    print(&quot;IP: &#123;&#125;&quot;.format(wifi.ifconfig()))\n    \n#æ¨¹è“æ´¾ä¸Šçš„mqttå›æ‡‰è¨‚é–±\ndef callBack(topic, msg):\n    print((topic, msg))\n    if topic == client_servoPan:\n        servo_pan.duty(int(msg))\n        sleep(0.5)\n    elif topic == client_servoTilt:\n        servo_tilt.duty(int(msg))\n        sleep(0.5)\n    #é€£ç·šMQTT,é€£ç·šæˆåŠŸå¾Œè¨‚é–±ä¸»é¡Œ\ndef connToMqtt():\n    try:\n        client = MQTTClient(mqtt_id, mqtt_server)\n        client.set_callback(callBack)\n        client.connect()\n        client.subscribe(client_servoPan)\n        client.subscribe(client_servoTilt)\n        print(&quot;connect to %s&quot;%mqtt_server)\n        return client\n        #å¦‚æœç„¡æ³•é€£ç·šé‡æ–°é€£ç·š\n    except OSError as e:\n        print(&quot;not to connected for MQTT server!&quot;)\n        machine.reset()\n    \nwifiConn()\nclient = connToMqtt()\nwhile True:\n    #æª¢æŸ¥æœ‰ç„¡é€²ä¾†çš„è¨Šæ¯\n    client.check_msg()\n</code></pre>\n<p>èª¿éç­‰å¾…æ™‚é–“é‚„æ˜¯æœƒå¶çˆ¾æŠ–å‹•ï¼Œé›–ç„¶ä¸çŸ¥é“æŠ–å‹•åŸåœ¨å“ªï¼Œå…ˆé€™æ¨£å¥½äº†ï¼Œä¸‹æ¬¡å†ä¾†æŠ“åŸå› ã€‚</p>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/HxkOYhqcgaY\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>","categories":["micropython","esp32"],"tags":["servo","mqtt","äºŒè»¸äº‘å°","ä¼ºæœé¦¬é”","node-red"]},{"title":"PWMæ§åˆ¶æ¿ä¸Šå…§å»ºLED-ESP32","url":"/2021/08/29/PWM%E6%8E%A7%E5%88%B6%E6%9D%BF%E4%B8%8A%E5%85%A7%E5%BB%BALED-ESP32/","content":"<h1 id=\"PWMæ§åˆ¶æ¿ä¸Šå…§å»ºLED-ESP32\"><a href=\"#PWMæ§åˆ¶æ¿ä¸Šå…§å»ºLED-ESP32\" class=\"headerlink\" title=\"PWMæ§åˆ¶æ¿ä¸Šå…§å»ºLED-ESP32\"></a>PWMæ§åˆ¶æ¿ä¸Šå…§å»ºLED-ESP32</h1><h6 id=\"tags-esp32-led-pwm\"><a href=\"#tags-esp32-led-pwm\" class=\"headerlink\" title=\"tags: esp32 led pwm\"></a>tags: <code>esp32</code> <code>led</code> <code>pwm</code></h6><h2 id=\"ææ–™\"><a href=\"#ææ–™\" class=\"headerlink\" title=\"ææ–™\"></a>ææ–™</h2><ol>\n<li><h4 id=\"ESP32æ§åˆ¶æ¿-x1\"><a href=\"#ESP32æ§åˆ¶æ¿-x1\" class=\"headerlink\" title=\"ESP32æ§åˆ¶æ¿ x1\"></a>ESP32æ§åˆ¶æ¿ x1</h4></li>\n<li><h4 id=\"å¯è®Šé›»é˜»-x1\"><a href=\"#å¯è®Šé›»é˜»-x1\" class=\"headerlink\" title=\"å¯è®Šé›»é˜» x1\"></a>å¯è®Šé›»é˜» x1</h4></li>\n<li><h4 id=\"10Kæ­å§†é›»é˜»-x1\"><a href=\"#10Kæ­å§†é›»é˜»-x1\" class=\"headerlink\" title=\"10Kæ­å§†é›»é˜» x1\"></a>10Kæ­å§†é›»é˜» x1</h4></li>\n</ol>\n<h2 id=\"æ¥ç·š\"><a href=\"#æ¥ç·š\" class=\"headerlink\" title=\"æ¥ç·š\"></a>æ¥ç·š</h2><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5354569437760337966#\"><img src=\"https://1.bp.blogspot.com/-lGkj-SvW41c/YId8HIPFBQI/AAAAAAAAeGI/P0q3-HrMSrI2FS2aWVSbTbB_09B4vGtpACNcBGAsYHQ/w718-h337/2.jpg\"></a></p>\n<hr>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre><code class=\"line-numbers language-c#\">#define pwm1 A4\n\nvoidÂ setup()&#123;\nÂ Â Serial.begin(115200);\nÂ Â ledcSetup(0,Â 5000,Â 10);\nÂ Â ledcAttachPin(LED_BUILTIN,Â 0);\nÂ Â pinMode(LED_BUILTIN,Â OUTPUT);\n&#125;\n\nvoidÂ loop()&#123;\nÂ Â intÂ val=analogRead(pwm1);\nÂ Â val=map(val,Â 0,Â 4095,Â 0,Â 1023);\nÂ Â Serial.printf(&quot;è¼¸å‡ºå€¼ç‚º:Â %u\\\\n&quot;,Â val);\nÂ Â ledcWrite(0,Â val);\nÂ Â delay(100);\n&#125;\n</code></pre>\n<hr>\n<h2 id=\"ç¨‹å¼ç¢¼éƒ¨ä»½èªªæ˜\"><a href=\"#ç¨‹å¼ç¢¼éƒ¨ä»½èªªæ˜\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼éƒ¨ä»½èªªæ˜\"></a>ç¨‹å¼ç¢¼éƒ¨ä»½èªªæ˜</h2><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5354569437760337966#\">ESP32å‡½å¼ç­†è¨˜æœ¬</a>-PWM  </p>\n<h3 id=\"å’ŒArduinoä¸ä¸€å¤ªä¸€æ¨£çš„åœ°æ–¹æ˜¯åœ¨å¤šäº†è¨­å®šPWMçš„é€šé“å’Œé »ç‡-ç•¶ä¸­å…¶å¯¦æ›´å®Œå–„çš„æ–¹æ³•é‚„æœ‰ä½å…ƒæ•¸çš„è½‰æ›ï¼Œå› ç‚ºESP32çš„é¡æ¯”æ•¸å€¼æ˜¯4095-è€ŒArduinoçš„æ•¸å€¼æ˜¯1023-æ‰€ä»¥åœ¨ledcSetup-è£¡çš„10æ˜¯ä»£è¡¨esp32çš„10ä½å…ƒ-ä½†æˆ‘è©¦è‘—ç”¨åŸç”Ÿçš„æ–¹å¼map-è½‰æ›æ¸¬è©¦å¾Œé‚„å¯ä»¥-analogRead-ä¸€æ¨£æœ‰-ä½†å°‘äº†analogWrite-é€™éƒ¨ä»½ä»¥ledcWrite-å–ä»£ã€‚\"><a href=\"#å’ŒArduinoä¸ä¸€å¤ªä¸€æ¨£çš„åœ°æ–¹æ˜¯åœ¨å¤šäº†è¨­å®šPWMçš„é€šé“å’Œé »ç‡-ç•¶ä¸­å…¶å¯¦æ›´å®Œå–„çš„æ–¹æ³•é‚„æœ‰ä½å…ƒæ•¸çš„è½‰æ›ï¼Œå› ç‚ºESP32çš„é¡æ¯”æ•¸å€¼æ˜¯4095-è€ŒArduinoçš„æ•¸å€¼æ˜¯1023-æ‰€ä»¥åœ¨ledcSetup-è£¡çš„10æ˜¯ä»£è¡¨esp32çš„10ä½å…ƒ-ä½†æˆ‘è©¦è‘—ç”¨åŸç”Ÿçš„æ–¹å¼map-è½‰æ›æ¸¬è©¦å¾Œé‚„å¯ä»¥-analogRead-ä¸€æ¨£æœ‰-ä½†å°‘äº†analogWrite-é€™éƒ¨ä»½ä»¥ledcWrite-å–ä»£ã€‚\" class=\"headerlink\" title=\"å’ŒArduinoä¸ä¸€å¤ªä¸€æ¨£çš„åœ°æ–¹æ˜¯åœ¨å¤šäº†è¨­å®šPWMçš„é€šé“å’Œé »ç‡,ç•¶ä¸­å…¶å¯¦æ›´å®Œå–„çš„æ–¹æ³•é‚„æœ‰ä½å…ƒæ•¸çš„è½‰æ›ï¼Œå› ç‚ºESP32çš„é¡æ¯”æ•¸å€¼æ˜¯4095,è€ŒArduinoçš„æ•¸å€¼æ˜¯1023,æ‰€ä»¥åœ¨ledcSetup()è£¡çš„10æ˜¯ä»£è¡¨esp32çš„10ä½å…ƒ,ä½†æˆ‘è©¦è‘—ç”¨åŸç”Ÿçš„æ–¹å¼map()è½‰æ›æ¸¬è©¦å¾Œé‚„å¯ä»¥,analogRead()ä¸€æ¨£æœ‰,ä½†å°‘äº†analogWrite(),é€™éƒ¨ä»½ä»¥ledcWrite()å–ä»£ã€‚\"></a>å’ŒArduinoä¸ä¸€å¤ªä¸€æ¨£çš„åœ°æ–¹æ˜¯åœ¨å¤šäº†è¨­å®šPWMçš„é€šé“å’Œé »ç‡,ç•¶ä¸­å…¶å¯¦æ›´å®Œå–„çš„æ–¹æ³•é‚„æœ‰ä½å…ƒæ•¸çš„è½‰æ›ï¼Œå› ç‚ºESP32çš„é¡æ¯”æ•¸å€¼æ˜¯4095,è€ŒArduinoçš„æ•¸å€¼æ˜¯1023,æ‰€ä»¥åœ¨ledcSetup()è£¡çš„10æ˜¯ä»£è¡¨esp32çš„10ä½å…ƒ,ä½†æˆ‘è©¦è‘—ç”¨åŸç”Ÿçš„æ–¹å¼map()è½‰æ›æ¸¬è©¦å¾Œé‚„å¯ä»¥,analogRead()ä¸€æ¨£æœ‰,ä½†å°‘äº†analogWrite(),é€™éƒ¨ä»½ä»¥ledcWrite()å–ä»£ã€‚</h3><hr>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/bO9G6uzPRcw\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>https://youtu.be/bO9G6uzPRcw\n","categories":["esp32"],"tags":["esp32","led"]},{"title":"DHT11/12ç¶²è·¯ç›£æ¸¬æº«æ¿•åº¦è¨ˆ-micropython","url":"/2021/08/29/DHT11-12%E7%B6%B2%E8%B7%AF%E7%9B%A3%E6%B8%AC%E6%BA%AB%E6%BF%95%E5%BA%A6%E8%A8%88-micropython/","content":"<h2 id=\"DHT11-12ç¶²è·¯ç›£æ¸¬æº«æ¿•åº¦è¨ˆ-micropython\"><a href=\"#DHT11-12ç¶²è·¯ç›£æ¸¬æº«æ¿•åº¦è¨ˆ-micropython\" class=\"headerlink\" title=\"DHT11/12ç¶²è·¯ç›£æ¸¬æº«æ¿•åº¦è¨ˆ-micropython\"></a>DHT11/12ç¶²è·¯ç›£æ¸¬æº«æ¿•åº¦è¨ˆ-micropython</h2><h6 id=\"tags-micropython-dht11-12-webserver\"><a href=\"#tags-micropython-dht11-12-webserver\" class=\"headerlink\" title=\"tags: micropython dht11/12 webserver\"></a>tags: <code>micropython</code> <code>dht11/12 webserver</code></h6><hr>\n<p><strong><em>DHT11/12å–®ç´”æ¸¬è©¦åƒè€ƒé é¢-</em></strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/5661741645243406963?hl=zh-TW#\">https://blairan-esp32-micropython.blogspot.com/2021/07/dht11dht12-micropython.html</a></p>\n<p><em><strong>WiFiè¯ç¶²åƒè€ƒ-</strong></em><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/5661741645243406963?hl=zh-TW#\">https://blairan-esp32-micropython.blogspot.com/2021/07/wifi.html</a></p>\n<hr>\n<h2 id=\"å®Œæ•´ç¨‹å¼ç¢¼\"><a href=\"#å®Œæ•´ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"å®Œæ•´ç¨‹å¼ç¢¼\"></a>å®Œæ•´ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> dht\n<span class=\"token keyword\">import</span> network<span class=\"token punctuation\">,</span> socket\n<span class=\"token keyword\">from</span> machine <span class=\"token keyword\">import</span> Pin\n<span class=\"token keyword\">from</span> time <span class=\"token keyword\">import</span> sleep\n\nssid<span class=\"token operator\">=</span><span class=\"token string\">\"---\"</span>\npassword<span class=\"token operator\">=</span><span class=\"token string\">\"------\"</span>\n\nSTA<span class=\"token operator\">=</span>network<span class=\"token punctuation\">.</span>WLAN<span class=\"token punctuation\">(</span>network<span class=\"token punctuation\">.</span>STA_IF<span class=\"token punctuation\">)</span>\nSTA<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\nSTA<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span>ssid<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">while</span> STA<span class=\"token punctuation\">.</span>isconnected<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">==</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">pass</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The connected successful!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"IP:  &#123;&#125;\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>STA<span class=\"token punctuation\">.</span>ifconfig<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> readTempAndHumi<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">global</span> temp<span class=\"token punctuation\">,</span> humi\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        sensor<span class=\"token operator\">=</span>dht<span class=\"token punctuation\">.</span>DHT11<span class=\"token punctuation\">(</span>Pin<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        sensor<span class=\"token punctuation\">.</span>measure<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        temp<span class=\"token operator\">=</span>sensor<span class=\"token punctuation\">.</span>temperature<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        humi<span class=\"token operator\">=</span>sensor<span class=\"token punctuation\">.</span>humidity<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">,</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">and</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>humi<span class=\"token punctuation\">,</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">and</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>humi<span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n          measureResult<span class=\"token operator\">=</span><span class=\"token string\">\"&#123;&#125;,&#123;&#125;\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">,</span> humi<span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">return</span> measureResult\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"--\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">except</span> OSError <span class=\"token keyword\">as</span> o<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"--\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> Htmlpage<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  html<span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">\"\"\"\n        &lt;html>\n    &lt;head>\n      &lt;meta charset=\"utf-8\" />\n      &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n      &lt;style>\n        h1  &#123;text-align: center; background-color: orange; margin-right:5px;&#125;\n        dl &#123; width: 320px; margin: 12px auto; &#125;\n        dt &#123; \n          font-size: 20pt; color: #444; background-color: #ddd;\n          margin: 6pt 0; padding: 6pt 12pt;\n        &#125;\n        dd &#123;\n          text-align: right; padding-right: 6pt;\n        &#125;\n        .num &#123; font-size: 36pt; color: dodgerblue; &#125;\n      &lt;/style>\n      &lt;/head>\n    &lt;body>\n      &lt;p>&lt;h1>ESP32 DHT11/12&lt;/h1>&lt;/p>\n      &lt;dl>\n        &lt;dt>Temp&lt;/dt>\n        &lt;dd class=num>\"\"\"</span><span class=\"token operator\">+</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token triple-quoted-string string\">\"\"\"Â°C&lt;/dd>\n        &lt;dt>Humi&lt;/dt>\n        &lt;dd class=num>\"\"\"</span><span class=\"token operator\">+</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>humi<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token triple-quoted-string string\">\"\"\" %&lt;/dd>\n      &lt;/dl>\n    &lt;/body>\n    &lt;/html>\n\n    \"\"\"</span>\n\n  <span class=\"token keyword\">return</span> html\n\ns<span class=\"token operator\">=</span>socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\ns<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ns<span class=\"token punctuation\">.</span>listen<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n    conn<span class=\"token punctuation\">,</span> addr <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>accept<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Got a connection from %s'</span> <span class=\"token operator\">%</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    req <span class=\"token operator\">=</span> conn<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content = %s'</span> <span class=\"token operator\">%</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    sensor_reading <span class=\"token operator\">=</span> readTempAndHumi<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>sensor_reading<span class=\"token punctuation\">)</span>\n    respone <span class=\"token operator\">=</span> Htmlpage<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    conn<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">\"http/1.1 200 OK\\\\n\"</span><span class=\"token punctuation\">)</span>\n    conn<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-Type: text/html; charset='utf-8'\\\\n\"</span><span class=\"token punctuation\">)</span>\n    conn<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">\"Connection: close\\\\n\\\\n\"</span><span class=\"token punctuation\">)</span>\n    conn<span class=\"token punctuation\">.</span>sendall<span class=\"token punctuation\">(</span>respone<span class=\"token punctuation\">)</span>\n    conn<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"è§£æ\"><a href=\"#è§£æ\" class=\"headerlink\" title=\"è§£æ\"></a>è§£æ</h2><pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token operator\">**</span>_è¼‰å…¥dht<span class=\"token punctuation\">,</span>wifi<span class=\"token punctuation\">,</span>ç«¯å£<span class=\"token punctuation\">,</span>pinå’Œæ™‚é–“æ¨¡çµ„_<span class=\"token operator\">**</span>\n\n<span class=\"token keyword\">import</span> dht\n<span class=\"token keyword\">import</span> network<span class=\"token punctuation\">,</span> socket\n<span class=\"token keyword\">from</span> machine <span class=\"token keyword\">import</span> Pin\n<span class=\"token keyword\">from</span> time <span class=\"token keyword\">import</span> sleep<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong><em>é€™å€‹éƒ¨ä»½æ˜¯è¨­åˆ¶WiFiçš„æµç¨‹</em></strong></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">ssid<span class=\"token operator\">=</span><span class=\"token string\">\"åŸºåœ°å°åç¨±\"</span>\npassword<span class=\"token operator\">=</span><span class=\"token string\">\"åŸºåœ°å°å¯†ç¢¼\"</span>\nSTA<span class=\"token operator\">=</span>network<span class=\"token punctuation\">.</span>WLAN<span class=\"token punctuation\">(</span>network<span class=\"token punctuation\">.</span>STA_IF<span class=\"token punctuation\">)</span>\nSTA<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\nSTA<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span>ssid<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">while</span> STA<span class=\"token punctuation\">.</span>isconnected<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">==</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">pass</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The connected successful!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"IP:  &#123;&#125;\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>STA<span class=\"token punctuation\">.</span>ifconfig<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong><em>è®€å–æº«æº¼åº¦çš„å‡½å¼</em></strong></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> readTempAndHumi<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">global</span> temp<span class=\"token punctuation\">,</span> humi\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        sensor<span class=\"token operator\">=</span>dht<span class=\"token punctuation\">.</span>DHT11<span class=\"token punctuation\">(</span>Pin<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        sensor<span class=\"token punctuation\">.</span>measure<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        temp<span class=\"token operator\">=</span>sensor<span class=\"token punctuation\">.</span>temperature<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        humi<span class=\"token operator\">=</span>sensor<span class=\"token punctuation\">.</span>humidity<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">,</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">and</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>humi<span class=\"token punctuation\">,</span> <span class=\"token builtin\">float</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">or</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">and</span> <span class=\"token builtin\">isinstance</span><span class=\"token punctuation\">(</span>humi<span class=\"token punctuation\">,</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        measureResult<span class=\"token operator\">=</span><span class=\"token string\">\"&#123;&#125;,&#123;&#125;\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">,</span> humi<span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">return</span> measureResult\n\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"--\"</span><span class=\"token punctuation\">)</span>\n\n     <span class=\"token keyword\">except</span> OSError <span class=\"token keyword\">as</span> o<span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"--\"</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>ç¶²é å‰ç«¯çš„å¸ƒç½®,è¨˜å¾—è¦è®“å…¶è®€å–æ™‚å¯è¿”å›(return)</strong></p>\n<p><strong>å…¶ä¸­é ˆæ³¨æ„çš„æ˜¯è®“æº«æº¼åº¦çš„å€¼å¯ä»¥æ­£é¡¯ç¤ºè¦ä½¿ç”¨</strong>â€œâ€â€+str(æº«/æº¼åº¦è®Šæ•¸)+â€â€â€</p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> Htmlpage<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  html<span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">\"\"\"\n        &lt;html>\n    &lt;head>\n      &lt;meta charset=\"utf-8\" />\n      &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n      &lt;style>\n        h1  &#123;text-align: center; background-color: orange; margin-right:5px;&#125;\n        dl &#123; width: 320px; margin: 12px auto; &#125;\n        dt &#123; \n          font-size: 20pt; color: #444; background-color: #ddd;\n          margin: 6pt 0; padding: 6pt 12pt;\n        &#125;\n        dd &#123;\n          text-align: right; padding-right: 6pt;\n        &#125;\n        .num &#123; font-size: 36pt; color: dodgerblue; &#125;\n      &lt;/style>\n      &lt;/head>\n    &lt;body>\n      &lt;p>&lt;h1>ESP32 DHT11/12&lt;/h1>&lt;/p>\n      &lt;dl>\n        &lt;dt>Temp&lt;/dt>\n        &lt;dd class=num>\"\"\"</span><span class=\"token operator\">+</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token triple-quoted-string string\">\"\"\"Â°C&lt;/dd>\n        &lt;dt>Humi&lt;/dt>\n        &lt;dd class=num>\"\"\"</span><span class=\"token operator\">+</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>humi<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token triple-quoted-string string\">\"\"\" %&lt;/dd>\n      &lt;/dl>\n    &lt;/body>\n    &lt;/html>\n    \"\"\"</span>\n  <span class=\"token keyword\">return</span> html<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong><em>è¨­åˆ¶ç›£è½å¥—æ¥ç«¯å£</em></strong></p>\n<p><strong><em>å‡½å¼åƒè€ƒ-</em></strong><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/5661741645243406963?hl=zh-TW#\">æˆ‘çš„micropythonå‡½å¼ç­†è¨˜</a></p>\n<pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">s<span class=\"token operator\">=</span>socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\ns<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ns<span class=\"token punctuation\">.</span>listen<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n  \n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n    conn<span class=\"token punctuation\">,</span> addr <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>accept<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Got a connection from %s'</span> <span class=\"token operator\">%</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    req <span class=\"token operator\">=</span> conn<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content = %s'</span> <span class=\"token operator\">%</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    sensor_reading <span class=\"token operator\">=</span> readTempAndHumi<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>sensor_reading<span class=\"token punctuation\">)</span>\n    respone <span class=\"token operator\">=</span> Htmlpage<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    conn<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">\"http/1.1 200 OK\\\\n\"</span><span class=\"token punctuation\">)</span>\n    conn<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-Type: text/html; charset='utf-8'\\\\n\"</span><span class=\"token punctuation\">)</span>\n    conn<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">\"Connection: close\\\\n\\\\n\"</span><span class=\"token punctuation\">)</span>\n    conn<span class=\"token punctuation\">.</span>sendall<span class=\"token punctuation\">(</span>respone<span class=\"token punctuation\">)</span>\n    conn<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/5661741645243406963?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-stu-h6hdsgc/YOaaTDfLfOI/AAAAAAAAeaQ/NiNjk1xHXl0YOU_J8btvb9Qd3isHo6ZvwCNcBGAsYHQ/s1600/1625725506698515-0.png\"></a></p>\n","categories":["micropython","esp32"],"tags":["DHT11/DHT12","webserver"]},{"title":"LEDè·‘é¦¬ç‡ˆ-ESP32","url":"/2021/08/29/LED%E8%B7%91%E9%A6%AC%E7%87%88-ESP32/","content":"<h1 id=\"LEDè·‘é¦¬ç‡ˆ-ESP32\"><a href=\"#LEDè·‘é¦¬ç‡ˆ-ESP32\" class=\"headerlink\" title=\"LEDè·‘é¦¬ç‡ˆ-ESP32\"></a>LEDè·‘é¦¬ç‡ˆ-ESP32</h1><h6 id=\"tags-esp32-led\"><a href=\"#tags-esp32-led\" class=\"headerlink\" title=\"tags: esp32 led\"></a>tags: <code>esp32</code> <code>led</code></h6><h2 id=\"å¯¦é©—ç›®çš„\"><a href=\"#å¯¦é©—ç›®çš„\" class=\"headerlink\" title=\"å¯¦é©—ç›®çš„\"></a>å¯¦é©—ç›®çš„</h2><h4 id=\"äº†è§£è¿´åœˆé‹ç”¨å’Œé™£åˆ—çš„å®£å‘Š-https-esp32-blairan-blogspot-com-2021-04-esp32-26-html\"><a href=\"#äº†è§£è¿´åœˆé‹ç”¨å’Œé™£åˆ—çš„å®£å‘Š-https-esp32-blairan-blogspot-com-2021-04-esp32-26-html\" class=\"headerlink\" title=\"äº†è§£è¿´åœˆé‹ç”¨å’Œé™£åˆ—çš„å®£å‘Š -https://esp32-blairan.blogspot.com/2021/04/esp32_26.html\"></a>äº†è§£<strong>è¿´åœˆ</strong>é‹ç”¨å’Œ<strong>é™£åˆ—</strong>çš„å®£å‘Š -<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/6656678562008851992#\">https://esp32-blairan.blogspot.com/2021/04/esp32_26.html</a></h4><h2 id=\"ææ–™\"><a href=\"#ææ–™\" class=\"headerlink\" title=\"ææ–™\"></a>ææ–™</h2><p><strong>LEDÃ—4</strong></p>\n<p><strong>220æ­å§†é›»é˜»Ã—4</strong></p>\n<p><strong>æœé‚¦ç·š</strong></p>\n<p><strong>ESP32</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/6656678562008851992#\"><img src=\"https://lh3.googleusercontent.com/-_YYwfEof1D0/YI5jHSJ3t6I/AAAAAAAAeG0/_k5HrzCSfV80legdS9URTnUH0Ad7Kmo7QCNcBGAsYHQ/s1600/1619944218044458-0.png\"></a></p>\n<hr>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><h4 id=\"é™£åˆ—å®£å‘Š-https-esp32-blairan-blogspot-com-2021-04-esp32-26-html\"><a href=\"#é™£åˆ—å®£å‘Š-https-esp32-blairan-blogspot-com-2021-04-esp32-26-html\" class=\"headerlink\" title=\"é™£åˆ—å®£å‘Š https://esp32-blairan.blogspot.com/2021/04/esp32_26.html\"></a>é™£åˆ—å®£å‘Š <a href=\"https://esp32-blairan.blogspot.com/2021/04/esp32_26.html\">https://esp32-blairan.blogspot.com/2021/04/esp32_26.html</a></h4><h4 id=\"forè¿´åœˆ-https-esp32-blairan-blogspot-com-2021-04-esp32-26-html\"><a href=\"#forè¿´åœˆ-https-esp32-blairan-blogspot-com-2021-04-esp32-26-html\" class=\"headerlink\" title=\"forè¿´åœˆ https://esp32-blairan.blogspot.com/2021/04/esp32_26.html\"></a>forè¿´åœˆ <a href=\"https://esp32-blairan.blogspot.com/2021/04/esp32_26.html\">https://esp32-blairan.blogspot.com/2021/04/esp32_26.html</a></h4><pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">constÂ byteÂ led\\[\\]&#x3D;&#123;35,Â 32,Â 33,Â 25&#125;;\nvoidÂ setup()Â &#123;\nÂ Â Serial.begin(115200);\nÂ Â forÂ (intÂ iÂ &#x3D;Â 0;Â iÂ &lt;&#x3D;3;Â i++)&#123;\n    pinMode(led\\[i\\],Â OUTPUT);\nÂ Â &#125;\n&#125;\n\nvoidÂ loop()Â &#123;\nÂ Â forÂ (intÂ iÂ &#x3D;Â 0;Â iÂ &lt;&#x3D;3;Â i++)\nÂ Â &#123;\nÂ Â Â Â digitalWrite(led\\[i\\],Â HIGH);\nÂ Â Â Â delay(100);\nÂ Â Â Â digitalWrite(led\\[i\\],Â LOW);\nÂ Â &#125;Â \n\nÂ Â forÂ (intÂ iÂ &#x3D;Â 3;Â iÂ &gt;&#x3D;Â 0;Â i--)\nÂ Â &#123;\nÂ Â Â Â digitalWrite(led\\[i\\],Â HIGH);\nÂ Â Â Â delay(100);\nÂ Â Â Â digitalWrite(led\\[i\\],Â LOW);\nÂ Â &#125;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<hr>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/lDSiaGsfrE4\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n","categories":["esp32"],"tags":["ledè·‘é¦¬ç‡ˆ"]},{"title":"æŒ‰éˆ•é–‹é—œæ§åˆ¶LEDæ˜æ»…","url":"/2021/08/29/%E6%8C%89%E9%88%95%E9%96%8B%E9%97%9C%E6%8E%A7%E5%88%B6LED%E6%98%8E%E6%BB%85/","content":"<h1 id=\"æŒ‰éˆ•é–‹é—œæ§åˆ¶LEDæ˜æ»…\"><a href=\"#æŒ‰éˆ•é–‹é—œæ§åˆ¶LEDæ˜æ»…\" class=\"headerlink\" title=\"æŒ‰éˆ•é–‹é—œæ§åˆ¶LEDæ˜æ»…Â \"></a>æŒ‰éˆ•é–‹é—œæ§åˆ¶LEDæ˜æ»…Â </h1><h6 id=\"tags-esp32-æŒ‰éˆ•é–‹é—œ-led\"><a href=\"#tags-esp32-æŒ‰éˆ•é–‹é—œ-led\" class=\"headerlink\" title=\"tags: esp32 æŒ‰éˆ•é–‹é—œ led\"></a>tags: <code>esp32</code> <code>æŒ‰éˆ•é–‹é—œ</code> <code>led</code></h6><h2 id=\"ææ–™\"><a href=\"#ææ–™\" class=\"headerlink\" title=\"ææ–™\"></a>ææ–™</h2><p><strong>LED x1</strong></p>\n<p><strong>æŒ‰éˆ•é–‹é—œ x1</strong></p>\n<p><strong>220æ­å§†é›»é˜» x1</strong></p>\n<p><strong>ESP32</strong></p>\n<p><a href=\"https://lh3.googleusercontent.com/-Yc_T7233Jvo/YJDgE6FwwII/AAAAAAAAeHA/etFpI543t8ErXzzDlgCpLc3ME02Ex294gCNcBGAsYHQ/s1600/1620107250751841-0.png\"><img src=\"https://lh3.googleusercontent.com/-Yc_T7233Jvo/YJDgE6FwwII/AAAAAAAAeHA/etFpI543t8ErXzzDlgCpLc3ME02Ex294gCNcBGAsYHQ/w204-h362/1620107250751841-0.png\"></a></p>\n<h3 id=\"æŒ‰éˆ•é–‹é—œåŸç†\"><a href=\"#æŒ‰éˆ•é–‹é—œåŸç†\" class=\"headerlink\" title=\"æŒ‰éˆ•é–‹é—œåŸç†\"></a>æŒ‰éˆ•é–‹é—œåŸç†</h3><p><a href=\"https://1.bp.blogspot.com/-KqBfr6zKGPs/YJDkUqq4rnI/AAAAAAAAeHI/RVPN3_dsIssR8ebADpEl8eSYkreF9OWXQCNcBGAsYHQ/s946/1715185-1FP216354U55.jpg\"><img src=\"https://1.bp.blogspot.com/-KqBfr6zKGPs/YJDkUqq4rnI/AAAAAAAAeHI/RVPN3_dsIssR8ebADpEl8eSYkreF9OWXQCNcBGAsYHQ/w400-h240/1715185-1FP216354U55.jpg\"></a></p>\n<p><a href=\"https://1.bp.blogspot.com/-czSSM3yjims/YJDkaJ8V4yI/AAAAAAAAeHM/lfjKT3t-kiQRnBU3CUVd6fsRfUwBkLp5wCNcBGAsYHQ/s318/%25E4%25B8%258B%25E8%25BC%2589.jpg\"><img src=\"https://1.bp.blogspot.com/-czSSM3yjims/YJDkaJ8V4yI/AAAAAAAAeHM/lfjKT3t-kiQRnBU3CUVd6fsRfUwBkLp5wCNcBGAsYHQ/w418-h209/%25E4%25B8%258B%25E8%25BC%2589.jpg\"></a></p>\n<h2 id=\"å¯¦é©—ç›®çš„\"><a href=\"#å¯¦é©—ç›®çš„\" class=\"headerlink\" title=\"å¯¦é©—ç›®çš„\"></a>å¯¦é©—ç›®çš„</h2><p><strong>åˆ©ç”¨æŒ‰éˆ•é–‹é—œåˆ‡æ›ESP32å…§éµLEDæ˜æ»…</strong></p>\n<p><strong>ä¸»è¦æ˜¯ç·´ç¿’æ¶ˆé™¤æŒ‰ä¸‹æŒ‰éˆ•æ™‚çš„å½ˆè·³é›œè¨Š</strong></p>\n<h3 id=\"å‹•ä½œè¦æ±‚\"><a href=\"#å‹•ä½œè¦æ±‚\" class=\"headerlink\" title=\"å‹•ä½œè¦æ±‚\"></a>å‹•ä½œè¦æ±‚</h3><p><strong>æŒ‰ä¸€ä¸‹é–‹é—œ:é»äº®LED</strong></p>\n<p><strong>å†æŒ‰ä¸€ä¸‹é–‹é—œ:é—œé–‰LED</strong></p>\n<h2 id=\"æ¥ç·šåœ–\"><a href=\"#æ¥ç·šåœ–\" class=\"headerlink\" title=\"æ¥ç·šåœ–\"></a><strong>æ¥ç·šåœ–</strong></h2><p>**</p>\n<p><a href=\"https://1.bp.blogspot.com/-VuvcXgXf6uw/YJDtVXFoJTI/AAAAAAAAeHY/Wi1KlYE0rOkmBEIeS1Ao7vAbXkUatJgiwCNcBGAsYHQ/s1187/B.jpg\"><img src=\"https://1.bp.blogspot.com/-VuvcXgXf6uw/YJDtVXFoJTI/AAAAAAAAeHY/Wi1KlYE0rOkmBEIeS1Ao7vAbXkUatJgiwCNcBGAsYHQ/w453-h225/B.jpg\"></a></p>\n<p> **</p>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">byteÂ swÂ &#x3D;Â 4;\nbyteÂ buttonÂ &#x3D;Â LOW;Â &#x2F;&#x2F;æŒ‰éˆ•é è¨­ä½é›»ä½\nbyteÂ toggleÂ &#x3D;Â LOW;Â &#x2F;&#x2F;æš«å­˜ç´€éŒ„é è¨­ä½é›»ä½\n \nvoidÂ setup()&#123;\nÂ Â Â Â Serial.begin(115200);\nÂ Â Â Â pinMode(LED_BUILTIN,Â OUTPUT);\nÂ Â Â Â pinMode(sw,Â INPUT);\n&#125;\n\nvoidÂ loop()&#123;\nÂ Â Â Â boolÂ bÂ &#x3D;Â digitalRead(sw);\nÂ Â Â Â ifÂ (b)&#123;\nÂ Â Â Â Â Â Â Â delay(20);Â &#x2F;&#x2F;æ¶ˆé™¤å½ˆè·³\nÂ Â Â Â Â Â Â Â buttonÂ &#x3D;Â b;\nÂ Â Â Â &#125;\nÂ Â Â Â ifÂ (bÂ !&#x3D;Â button)&#123;\nÂ Â Â Â Â Â Â Â toggleÂ &#x3D;!Â toggle;\nÂ Â Â Â Â Â Â Â digitalWrite(LED_BUILTIN,Â toggle);\nÂ Â Â Â Â Â Â Â buttonÂ &#x3D;Â LOW;\nÂ Â Â Â &#125;\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"å¯¦é©—çµæœ\"><a href=\"#å¯¦é©—çµæœ\" class=\"headerlink\" title=\"å¯¦é©—çµæœ\"></a>å¯¦é©—çµæœ</h2><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/NGC4oxTKZm0\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>","categories":["esp32"],"tags":["æ§éˆ•é–‹é—œ"]},{"title":"æ–æ¡¿æ¨¡çµ„-ESP32","url":"/2021/08/29/%E6%90%96%E6%A1%BF%E6%A8%A1%E7%B5%84-ESP32/","content":"<h1 id=\"æ–æ¡¿æ¨¡çµ„-ESP32\"><a href=\"#æ–æ¡¿æ¨¡çµ„-ESP32\" class=\"headerlink\" title=\"æ–æ¡¿æ¨¡çµ„-ESP32\"></a>æ–æ¡¿æ¨¡çµ„-ESP32</h1><h6 id=\"tags-esp32-æ–æ¡¿\"><a href=\"#tags-esp32-æ–æ¡¿\" class=\"headerlink\" title=\"tags: esp32 æ–æ¡¿\"></a>tags: <code>esp32</code> <code>æ–æ¡¿</code></h6><hr>\n<h2 id=\"æ–æ¡¿æ¨¡çµ„\"><a href=\"#æ–æ¡¿æ¨¡çµ„\" class=\"headerlink\" title=\"æ–æ¡¿æ¨¡çµ„\"></a>æ–æ¡¿æ¨¡çµ„</h2><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2467346807906815384#\"><img src=\"https://1.bp.blogspot.com/-liS9OQ7lsPg/YIkRkqPRvrI/AAAAAAAAeGQ/AzkfR9Z0sy4i-gdxKveKbMqg4GFCYR4igCNcBGAsYHQ/w186-h331/20210428_152206.jpg\"></a></p>\n<h3 id=\"æ–æ¡¿æ¨¡çµ„å¤§éƒ½ç”¨æ–¼æ©Ÿæ¢°æ‰‹è‡‚æˆ–æ§åˆ¶æœ‰ä¼ºæœé¦¬é”çš„åœ°æ–¹ï¼Œå®ƒæœ‰ï¼’çµ„è»¸ï¼ˆXå’ŒYï¼‰å’Œä¸€å€‹æŒ‰éµ-ï¼ŒESP32å’ŒArduinoä¸Šæ˜¯ä½¿ç”¨é¡æ¯”è¨Šè™Ÿæ¸¬é‡ï¼Œä¸éåœ¨ESP32ä¸Šåªæœ‰3-3Væ‰€ä»¥é¡æ¯”è¨Šè™Ÿæœƒåˆ°4059-å¿…é ˆè½‰æ›åˆ°1023ï¼Œå¾Œä¾†æ‰ç™¼ç¾ESP32æœ‰å¹¾å€‹å…§éµè½‰æ›çš„å‡½å¼ä¸éŒ¯ç”¨ï¼Œå°±ä¸ç”¨ä¸€ç›´æ­»å‘†å‘†çš„ç”¨-map-ä¾†è½‰æ›ã€‚ç„¶å¾Œå®ƒçš„åŸç†å’Œå¯èª¿é›»é˜»ä¸€æ¨£ï¼Œæ‰€ä»¥æ²’ä»€éº¼ç‰¹åˆ¥è¦å¼·èª¿çš„ã€‚\"><a href=\"#æ–æ¡¿æ¨¡çµ„å¤§éƒ½ç”¨æ–¼æ©Ÿæ¢°æ‰‹è‡‚æˆ–æ§åˆ¶æœ‰ä¼ºæœé¦¬é”çš„åœ°æ–¹ï¼Œå®ƒæœ‰ï¼’çµ„è»¸ï¼ˆXå’ŒYï¼‰å’Œä¸€å€‹æŒ‰éµ-ï¼ŒESP32å’ŒArduinoä¸Šæ˜¯ä½¿ç”¨é¡æ¯”è¨Šè™Ÿæ¸¬é‡ï¼Œä¸éåœ¨ESP32ä¸Šåªæœ‰3-3Væ‰€ä»¥é¡æ¯”è¨Šè™Ÿæœƒåˆ°4059-å¿…é ˆè½‰æ›åˆ°1023ï¼Œå¾Œä¾†æ‰ç™¼ç¾ESP32æœ‰å¹¾å€‹å…§éµè½‰æ›çš„å‡½å¼ä¸éŒ¯ç”¨ï¼Œå°±ä¸ç”¨ä¸€ç›´æ­»å‘†å‘†çš„ç”¨-map-ä¾†è½‰æ›ã€‚ç„¶å¾Œå®ƒçš„åŸç†å’Œå¯èª¿é›»é˜»ä¸€æ¨£ï¼Œæ‰€ä»¥æ²’ä»€éº¼ç‰¹åˆ¥è¦å¼·èª¿çš„ã€‚\" class=\"headerlink\" title=\"æ–æ¡¿æ¨¡çµ„å¤§éƒ½ç”¨æ–¼æ©Ÿæ¢°æ‰‹è‡‚æˆ–æ§åˆ¶æœ‰ä¼ºæœé¦¬é”çš„åœ°æ–¹ï¼Œå®ƒæœ‰ï¼’çµ„è»¸ï¼ˆï¼¸å’Œï¼¹ï¼‰å’Œä¸€å€‹æŒ‰éµ ï¼ŒESP32å’ŒArduinoä¸Šæ˜¯ä½¿ç”¨é¡æ¯”è¨Šè™Ÿæ¸¬é‡ï¼Œä¸éåœ¨ESP32ä¸Šåªæœ‰3.3Væ‰€ä»¥é¡æ¯”è¨Šè™Ÿæœƒåˆ°4059  å¿…é ˆè½‰æ›åˆ°1023ï¼Œå¾Œä¾†æ‰ç™¼ç¾ESP32æœ‰å¹¾å€‹å…§éµè½‰æ›çš„å‡½å¼ä¸éŒ¯ç”¨ï¼Œå°±ä¸ç”¨ä¸€ç›´æ­»å‘†å‘†çš„ç”¨  map()ä¾†è½‰æ›ã€‚ç„¶å¾Œå®ƒçš„åŸç†å’Œå¯èª¿é›»é˜»ä¸€æ¨£ï¼Œæ‰€ä»¥æ²’ä»€éº¼ç‰¹åˆ¥è¦å¼·èª¿çš„ã€‚\"></a>æ–æ¡¿æ¨¡çµ„å¤§éƒ½ç”¨æ–¼æ©Ÿæ¢°æ‰‹è‡‚æˆ–æ§åˆ¶æœ‰ä¼ºæœé¦¬é”çš„åœ°æ–¹ï¼Œå®ƒæœ‰ï¼’çµ„è»¸ï¼ˆï¼¸å’Œï¼¹ï¼‰å’Œä¸€å€‹æŒ‰éµ ï¼ŒESP32å’ŒArduinoä¸Šæ˜¯ä½¿ç”¨é¡æ¯”è¨Šè™Ÿæ¸¬é‡ï¼Œä¸éåœ¨ESP32ä¸Šåªæœ‰3.3Væ‰€ä»¥é¡æ¯”è¨Šè™Ÿæœƒåˆ°4059  å¿…é ˆè½‰æ›åˆ°1023ï¼Œå¾Œä¾†æ‰ç™¼ç¾ESP32æœ‰å¹¾å€‹å…§éµè½‰æ›çš„å‡½å¼ä¸éŒ¯ç”¨ï¼Œå°±ä¸ç”¨ä¸€ç›´æ­»å‘†å‘†çš„ç”¨  map()ä¾†è½‰æ›ã€‚ç„¶å¾Œå®ƒçš„åŸç†å’Œå¯èª¿é›»é˜»ä¸€æ¨£ï¼Œæ‰€ä»¥æ²’ä»€éº¼ç‰¹åˆ¥è¦å¼·èª¿çš„ã€‚</h3><hr>\n<h2 id=\"æ¥ç·š\"><a href=\"#æ¥ç·š\" class=\"headerlink\" title=\"æ¥ç·š\"></a>æ¥ç·š</h2><h3 id=\"Xâ€“-gt-D33-A5\"><a href=\"#Xâ€“-gt-D33-A5\" class=\"headerlink\" title=\"Xâ€“&gt;D33(A5)\"></a>Xâ€“&gt;D33(A5)</h3><h3 id=\"Yâ€“-gt-D32-A4\"><a href=\"#Yâ€“-gt-D32-A4\" class=\"headerlink\" title=\"Yâ€“&gt;D32(A4)\"></a>Yâ€“&gt;D32(A4)</h3><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2467346807906815384#\"><img src=\"https://1.bp.blogspot.com/-eo9WBofHtSo/YIkUVUGy3qI/AAAAAAAAeGY/UINLcUssojkL362WOFOI2wTBFM4P68OtACNcBGAsYHQ/w568-h472/1.jpg\"></a></p>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><p>esp32å‡½å¼ç­†è¨˜æœ¬-<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2467346807906815384#\">https://esp32-blairan.blogspot.com/2021/04/esp32_26.html</a></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#defineÂ posXÂ 33\n#defineÂ posYÂ 32\nvoidÂ setup()\n&#123;\nÂ Â Serial.begin(115200);\nÂ Â analogSetAttenuation(ADC_11db);\nÂ Â analogSetWidth(10);\n&#125;\n\nvoidÂ loop()&#123;\nÂ Â intÂ valx&#x3D;analogRead(posX);\nÂ Â intÂ valy&#x3D;analogRead(posY);\nÂ Â delay(500);\nÂ Â Serial.printf(&quot;posXçš„æ–æ¡¿å€¼ç‚º:Â %dÂ Â &#x2F;&#x2F;Â posYçš„æ–æ¡¿å€¼ç‚º:Â %d\\\\n&quot;,valx,Â valy);\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<hr>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/kJ70IxVJXVo\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>","categories":["esp32"],"tags":["é™æ¡¿æ¨¡çµ„"]},{"title":"DS1306å¯¦æ™‚æ™‚é˜æ¨¡çµ„-ESP32","url":"/2021/08/29/DS1306%E5%AF%A6%E6%99%82%E6%99%82%E9%90%98%E6%A8%A1%E7%B5%84-ESP32/","content":"<h2 id=\"DS1306å¯¦æ™‚æ™‚é˜æ¨¡çµ„-ESP32\"><a href=\"#DS1306å¯¦æ™‚æ™‚é˜æ¨¡çµ„-ESP32\" class=\"headerlink\" title=\"DS1306å¯¦æ™‚æ™‚é˜æ¨¡çµ„-ESP32\"></a>DS1306å¯¦æ™‚æ™‚é˜æ¨¡çµ„-ESP32</h2><h6 id=\"tags-esp32-ds1302\"><a href=\"#tags-esp32-ds1302\" class=\"headerlink\" title=\"tags: esp32 ds1302\"></a>tags: <code>esp32</code> <code>ds1302</code></h6><p>é€™æ˜¯å»£è¯é›»å­ä¸Šçš„ä»‹ç´¹<br>â— æ™‚é˜å…·æœ‰èƒ½è¨ˆç®—2100 å¹´ä¹‹å‰çš„ç§’ã€åˆ†ã€æ™‚ã€æ—¥ã€æ˜ŸæœŸã€æœˆã€å¹´çš„èƒ½åŠ›ï¼Œé‚„æœ‰é–å¹´èª¿æ•´çš„èƒ½åŠ›<br>â— 31 8 ä½æš«å­˜æ•¸æ“šå­˜å„²RAM<br>â— ä¸²è¡Œ I/O å£æ–¹å¼ä½¿å¾—ç®¡è…³æ•¸é‡æœ€å°‘<br>â— å¯¬ç¯„åœå·¥ä½œé›»å£“2.0 5.5V<br>â— å·¥ä½œé›»æµ 2.0V æ™‚,å°æ–¼300nA<br>â— è®€ / å¯«æ™‚é˜æˆ–RAM æ•¸æ“šæ™‚æœ‰å…©ç¨®å‚³é€æ–¹å¼å–®å­—ç¯€å‚³é€å’Œå¤šå­—ç¯€å‚³é€å­—ç¬¦çµ„æ–¹å¼<br>â— 8 è…³DIP å°è£æˆ–å¯é¸çš„8 è…³SOIC å°è£æ ¹æ“šè¡¨é¢è£é…<br>â— ç°¡å–® 3 ç·šæ¥å£<br>â— èˆ‡ TTL ç›¸å®¹Vcc=5V<br>â— é›™é›»æºç®¡ç”¨æ–¼ä¸»é›»æºå’Œå‚™ä»½é›»æºä¾›æ‡‰<br>â— é›»æ± ï¼šCR2032 é›»å£“3Vï¼Œé›»æµ260mAh<br>â— æ™¶æŒ¯32.768KHzï¼ŒåŒ¹é…é›»å®¹ç‚º6pF<br>â— DS1302ç‚º8è…³ç›´æ’å¤§æ™¶ç‰‡ï¼Œæ™¶ç‰‡ä¸‹é¢æœ‰ICåº§ï¼Œæ–¹ä¾¿æ›´æ›åŠæ’æ‹”ç‰‡<br>6.æ¨¡å¡Šå·¥ä½œé›»å£“å…¼å®¹3.3V/5Vï¼Œå¯èˆ‡5VåŠ3.3Vå–®ç‰‡æ©Ÿé€£æ¥<br>â—å¸¶4å€‹å®šä½å­”ï¼Œç›´å¾‘3.1mm<br>â—å·¥ä½œæº«åº¦ï¼š0Â°ï½70Â°</p>\n<p>â— å®‰è£æ³¨æ„!<br>1.VCCèˆ‡GNDåƒè¬ä¸è¦æ¥åï¼Œä»¥å…ç‡’å£æ™¶ç‰‡<br>2.51ç³»åˆ—å–®æ™¶ç‰‡P0æ¥è…³éœ€è¦é€£æ¥ä¸Šæ‹‰é›»é˜»ï¼Œå¦‚æœå–®æ™¶ç‰‡æ²’æœ‰é€£æ¥ä¸Šæ‹‰é›»é˜»ï¼Œå¯ä»¥å°‡æ•¸æ“šç·šæ¥åˆ°å…¶ä»–æ¥è…³</p>\n<p>æ­¥é©Ÿ1:<br>åœ¨Arduino IDEä¸‹è¼‰ç¨‹å¼åº«DS1302ï¼Œä¸¦é¸å¥½ç‰ˆå‹ï¼ŒCOMå’Œæ³¢ç‰¹ç‡</p>\n<p>æ¥ç·š</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">&#x2F;&#x2F; DS1302 CLK&#x2F;SCLK --&gt; 5\n&#x2F;&#x2F; DS1302 DAT&#x2F;IO --&gt; 4\n&#x2F;&#x2F; DS1302 RST&#x2F;CE --&gt; 2\n&#x2F;&#x2F; DS1302 VCC --&gt; 3.3v - 5v\n&#x2F;&#x2F; DS1302 GND --&gt; GND<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>ç¨‹å¼ç¢¼</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;ThreeWire.h&gt;  \n#include &lt;RtcDS1302.h&gt;\n \nThreeWire myWire(4,5,2); &#x2F;&#x2F; IO, SCLK, CE  &#x2F;&#x2F;å¯¹åº”æ¥åˆ°ESP32çš„IOå·\nRtcDS1302&lt;ThreeWire&gt; Rtc(myWire);\n \nvoid setup () &#123;\n    Serial.begin(57600);\n    Serial.print(&quot;compiled: &quot;);\n    Serial.print(__DATE__); &#x2F;&#x2F;æ‰“å°ç³»ç»Ÿæ—¥æœŸ\n    Serial.println(__TIME__); &#x2F;&#x2F;æ‰“å°ç³»ç»Ÿæ—¶é—´\n    Rtc.Begin();  &#x2F;&#x2F;ç”¨ç®¡è„šå£°æ˜æ¥åˆå§‹åŒ–RTC\n \n    RtcDateTime compiled &#x3D; RtcDateTime(__DATE__, __TIME__); &#x2F;&#x2F;å°†ç³»ç»Ÿæ—¶é—´å£°æ˜ä¸€ä¸ªæ—¶é—´ç»“æ„\n    printDateTime(compiled);  &#x2F;&#x2F;æ‰“å°æ—¶é—´\n    Serial.println();\n \n    if (!Rtc.IsDateTimeValid())   &#x2F;&#x2F;è¯»RTCæ—¶é—´ï¼Œå¦‚æœæ²¡è¯»åˆ°ï¼Œå°±æ˜¯ç”µæ± æ²¡ç”µäº†\n    &#123;\n        &#x2F;&#x2F; Common Causes:\n        &#x2F;&#x2F;    1) first time you ran and the device wasn&#39;t running yet\n        &#x2F;&#x2F;    2) the battery on the device is low or even missing\n \n        Serial.println(&quot;RTC lost confidence in the DateTime!&quot;);\n        Rtc.SetDateTime(compiled);    &#x2F;&#x2F;è®¾ç½®ç³»ç»Ÿæ—¶é—´ä¸ºå½“å‰æ—¶é—´\n    &#125;\n \n    if (Rtc.GetIsWriteProtected())    &#x2F;&#x2F;æ£€æŸ¥æ˜¯ä¸æ˜¯å†™ä¿æŠ¤äº†\n    &#123;\n        Serial.println(&quot;RTC was write protected, enabling writing now&quot;);\n        Rtc.SetIsWriteProtected(false);\n    &#125;\n \n    if (!Rtc.GetIsRunning())  &#x2F;&#x2F;æ£€æŸ¥æ˜¯ä¸æ˜¯å¯è¯»\n    &#123;\n        Serial.println(&quot;RTC was not actively running, starting now&quot;);\n        Rtc.SetIsRunning(true);\n    &#125;\n \n    RtcDateTime now &#x3D; Rtc.GetDateTime();  &#x2F;&#x2F;å¾—åˆ°RTCçš„æ—¶é—´\n    if (now &lt; compiled) &#x2F;&#x2F;å¦‚æœè¯»å‡ºçš„æ—¶é—´æ—©äºç³»ç»Ÿæ—¶é—´ï¼Œåˆ™é‡æ–°è®¾ç½®RTCæ—¶é—´\n    &#123;\n        Serial.println(&quot;RTC is older than compile time!  (Updating DateTime)&quot;);\n        Rtc.SetDateTime(compiled);\n    &#125;\n    else if (now &gt; compiled) &#x2F;&#x2F;å¦‚æœè¯»å‡ºçš„æ—¶é—´æ™šäºç³»ç»Ÿæ—¶é—´ï¼Œåˆ™é‡æ–°è®¾ç½®RTCæ—¶é—´\n    &#123;\n        Serial.println(&quot;RTC is newer than compile time. (this is expected)&quot;);\n    &#125;\n    else if (now &#x3D;&#x3D; compiled) \n    &#123;\n        Serial.println(&quot;RTC is the same as compile time! (not expected but all is fine)&quot;);\n    &#125;\n&#125;\n \nvoid loop () &#123;\n    RtcDateTime now &#x3D; Rtc.GetDateTime();    &#x2F;&#x2F;æ ¸å¿ƒå‡½æ•°ï¼Œè¯»å½“å‰RTCæ—¶é—´\n    printDateTime(now);\n    Serial.println();\n    if (!now.IsValid())&#123;\n        &#x2F;&#x2F; Common Causes:\n        &#x2F;&#x2F;    1) the battery on the device is low or even missing and the power line was disconnected\n        Serial.println(&quot;RTC lost confidence in the DateTime!&quot;);\n    &#125;\n    delay(10000); &#x2F;&#x2F; ten seconds    &#x2F;&#x2F;å»¶æ—¶10s\n&#125;\n \n#define countof(a) (sizeof(a) &#x2F; sizeof(a[0]))\nvoid printDateTime(const RtcDateTime&amp; dt)   &#x2F;&#x2F;ä¸€ä¸ªé€šè¿‡ä¸²å£æ ¼å¼åŒ–æ‰“å°æ—¥æœŸå’Œæ—¶é—´çš„å‡½æ•°\n&#123;\n    char datestring[20];\n \n    snprintf_P(datestring,                &#x2F;&#x2F;avrçš„ä¸€ä¸ªæ‰“å°æ ¼å¼åŒ–å‡½æ•°\n            countof(datestring),\n            PSTR(&quot;%04u&#x2F;%02u&#x2F;%02u %02u:%02u:%02u&quot;),    &#x2F;&#x2F;å’Œprintç±»ä¼¼ï¼ŒæŒ‡å®šé•¿åº¦\n            dt.Year(),\n            dt.Month(),\n            dt.Day(),\n            dt.Hour(),\n            dt.Minute(),\n            dt.Second() );\n    Serial.print(datestring);\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>DS1306å¯¦æ™‚æ™‚é˜æ¨¡çµ„+0.96OLED<br>æç¤º:å…ˆä¸‹è¼‰é€™äº›ç¨‹å¼åº«</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;Adafruit_SSD1306.h&gt;\n#include &lt;Adafruit_GFX.h&gt;\n#include &lt;Adafruit_GrayOLED.h&gt;\n#include &lt;Wire.h&gt;\n#include &lt;ThreeWire.h&gt;  \n#include &lt;RtcDS1302.h&gt;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>ds1302åœ¨ç¯„ä¾‹è£¡é¢æœ‰</p>\n<p>// CONNECTIONS:<br>// DS1302 CLK/SCLK â€“&gt; 5<br>// DS1302 DAT/IO â€“&gt; 4<br>// DS1302 RST/CE â€“&gt; 2<br>// DS1302 VCC â€“&gt; 3.3v - 5v<br>// DS1302 GND â€“&gt; GND</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;SPI.h&gt;\n#include &lt;Adafruit_SSD1306.h&gt;\n#include &lt;Adafruit_GFX.h&gt;\n#include &lt;Adafruit_GrayOLED.h&gt;\n#include &lt;Wire.h&gt;\n#include &lt;ThreeWire.h&gt;  \n#include &lt;RtcDS1302.h&gt;\n\nThreeWire myWire(4,5,2); &#x2F;&#x2F; IO, SCLK, CE\nRtcDS1302&lt;ThreeWire&gt; Rtc(myWire);\n\n#define SCREEN_WIDTH 128\n#define SCREEN_HEIGHT 64\n#define OLED_RESET -1\n\nAdafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &amp;Wire, OLED_RESET);\n\nvoid setup () \n&#123;\n    Serial.begin(115200);\n    display.begin(SSD1306_SWITCHCAPVCC, 0x3C, OLED_RESET);\n    Serial.print(&quot;compiled: &quot;);\n    Serial.print(__DATE__);\n    Serial.println(__TIME__);\n\n    Rtc.Begin();\n\n    RtcDateTime compiled &#x3D; RtcDateTime(__DATE__, __TIME__);\n    printDateTime(compiled);\n    Serial.println();\n\n    if (!Rtc.IsDateTimeValid()) \n    &#123;\n        &#x2F;&#x2F; Common Causes:\n        &#x2F;&#x2F;    1) first time you ran and the device wasn&#39;t running yet\n        &#x2F;&#x2F;    2) the battery on the device is low or even missing\n\n        Serial.println(&quot;RTC lost confidence in the DateTime!&quot;);\n        Rtc.SetDateTime(compiled);\n    &#125;\n\n    if (Rtc.GetIsWriteProtected())\n    &#123;\n        Serial.println(&quot;RTC was write protected, enabling writing now&quot;);\n        Rtc.SetIsWriteProtected(false);\n    &#125;\n\n    if (!Rtc.GetIsRunning())\n    &#123;\n        Serial.println(&quot;RTC was not actively running, starting now&quot;);\n        Rtc.SetIsRunning(true);\n    &#125;\n\n    RtcDateTime now &#x3D; Rtc.GetDateTime();\n    if (now &lt; compiled) \n    &#123;\n        Serial.println(&quot;RTC is older than compile time!  (Updating DateTime)&quot;);\n        Rtc.SetDateTime(compiled);\n    &#125;\n    else if (now &gt; compiled) \n    &#123;\n        Serial.println(&quot;RTC is newer than compile time. (this is expected)&quot;);\n    &#125;\n    else if (now &#x3D;&#x3D; compiled) \n    &#123;\n        Serial.println(&quot;RTC is the same as compile time! (not expected but all is fine)&quot;);\n    &#125;\n&#125;\n\nvoid loop () \n&#123;\n    RtcDateTime now &#x3D; Rtc.GetDateTime();\n\n    printDateTime(now);\n    Serial.println();\n\n    if (!now.IsValid())\n    &#123;\n        &#x2F;&#x2F; Common Causes:\n        &#x2F;&#x2F;    1) the battery on the device is low or even missing and the power line was disconnected\n        Serial.println(&quot;RTC lost confidence in the DateTime!&quot;);\n    &#125;\n    display.clearDisplay();\n    display.setTextSize(2);\n    display.setTextColor(WHITE);\n    display.setCursor(0, 0);\n    display.print(now.Year()); display.print(&quot;&#x2F;&quot;); display.print(now.Month()); display.print(&quot;&#x2F;&quot;); display.println(now.Day());\n    display.setCursor(0, 20);\n    display.setTextSize(2);\n    display.setTextColor(WHITE);\n    display.print(now.Hour()); display.print(&quot;:&quot;); display.print(now.Minute()); display.print(&quot;:&quot;); display.println(now.Second());\n    display.display();\n    delay(1000); &#x2F;&#x2F; ten seconds\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/8HeV3ZOpPSI\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n","categories":["esp32"],"tags":["DS1306"]},{"title":"BMP280+ThingSpeak IoT","url":"/2021/08/29/BMP280-ThingSpeak-IoT/","content":"<h1 id=\"BMP280-ThingSpeak-IoT\"><a href=\"#BMP280-ThingSpeak-IoT\" class=\"headerlink\" title=\"BMP280+ThingSpeak IoT\"></a>BMP280+ThingSpeak IoT</h1><h6 id=\"tags-esp32-thingspeak-bmp280\"><a href=\"#tags-esp32-thingspeak-bmp280\" class=\"headerlink\" title=\"tags: esp32 thingspeak bmp280\"></a>tags: <code>esp32</code> <code>thingspeak</code> <code>bmp280</code></h6><p><em>ESP32çœŸçš„æ˜¯å€‹æ–¹ä¾¿åˆç¥å¥‡çš„ç‰ˆå­ï¼Œ3å€‹æœˆå‰æˆ‘é‚„åœ¨çŒ¶è±«è¦ä¸è¦è·¨è¶³</em></p>\n<p><em>ç ”ç©¶ESP32ï¼Œå¸¶è‘—ä¸€ä»½ä¸å®‰çš„å¿ƒï¼Œè²·äº†ä¸€äº›æ›¸é–‹å§‹å­¸ï¼Œè‡³ä»Šç´„ä¸‰å€‹æœˆ</em></p>\n<p><em>ï¼Œè¦ºå¾—ä¹‹å‰æœ‰ç©Arduinoå› ç‚ºèªè¨€ç›¸é€šï¼Œçœå»äº†ä¸€äº›æ™‚é–“ï¼Œåªæ˜¯æ¯”è¼ƒ</em></p>\n<p><em>ç•¥é¡¯ä¸è¶³çš„æ˜¯esp32æ²’æœ‰5Vå€’æ˜¯æœ‰é»å¯æƒœï¼Œå¦å¤–æˆ‘è¦ºå¾—å„ªå‹¢æ˜¯å…§å»ºWIFI</em></p>\n<p><em>å’Œè—èŠ½ï¼Œä¸ç”¨åˆå¤–æ¥ï¼Œä¸¦ä¸”ä¹Ÿæ”¯æ´mpythonï¼Œé€™è®“æˆ‘ç„¡å½¢ä¸­ä¸æœƒå› ç‚ºåª</em></p>\n<p><em>ç©esp32ç”¨äº†Cèªè¨€ï¼Œè€Œå¿˜äº†Pythonã€‚</em></p>\n<hr>\n<p>ä»Šå¤©å‘¢å°±å¿ƒè¡€ä¾†æ½®æƒ³ç©ä¸€ä¸‹äº‘ç«¯æ•¸æ“šåœ–å½¢åŒ–ï¼Œä¹‹å‰çœ‹äº†å¾ˆå¤šç¶²ä¸Šå¤§ç¥å€‘</p>\n<p>éƒ½æœ‰æåŠThingSpeaké€™å€‹å’Œæ„Ÿæ¸¬å™¨çµåˆä¸€èµ·ç”¨ï¼Œæ˜¨å¤©å‰›ç ”ç©¶äº†BMP280å‰›å¥½</p>\n<p>å¯ä»¥æ´¾ä¸Šç”¨å ´ã€‚</p>\n<p>ç­†è¨˜é€£çµâ€”<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/849309138521769078#\">BMP280æ°£å£“,æº«åº¦æ¨¡çµ„-ESP32</a></p>\n<p><em><strong>é€™è£¡å°±ç›´æ¥æ¥çµåˆWIFIå’ŒThingSpeak IoTçš„ä½¿ç”¨</strong></em></p>\n<h2 id=\"å¦‚ä½•ç”³è«‹ThingSpeak\"><a href=\"#å¦‚ä½•ç”³è«‹ThingSpeak\" class=\"headerlink\" title=\"å¦‚ä½•ç”³è«‹ThingSpeak\"></a>å¦‚ä½•ç”³è«‹ThingSpeak</h2><p><strong><em>å¦‚ä½•ç”³è«‹</em></strong><em><strong>ThingSpeak IoTå¸³è™Ÿ-<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/849309138521769078#\">http://web.htjh.tp.edu.tw/B4/106iot/ThingSpeak%E7%89%A9%E8%81%AF%E7%B6%B2%E5%B9%B3%E5%8F%B0.pdf</a></strong></em></p>\n<p>_</p>\n<hr>\n<p>_<strong>ä»¥ä¸‹å› ç¯€çœæ™‚é–“ï¼Œå¼•ç”¨åˆ¥çš„ä½œè€…çš„æ–‡ç« ï¼Œå‡ºè™•</strong>â€”<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/849309138521769078#\">https://randomnerdtutorials.com/esp32-thingspeak-publish-arduino/</a></p>\n<p>**è½‰åˆ° ThingSpeakï¼Œç„¶å¾Œå–®æ“Šâ€œå…è²»å…¥é–€â€æŒ‰éˆ•å‰µå»ºä¸€å€‹æ–°å¸³æˆ¶ã€‚æ­¤å¸³æˆ¶èˆ‡ Mathworks å¸³æˆ¶ç›¸é—œè¯ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨å·²æœ‰ Mathworks å¸³æˆ¶ï¼Œå‰‡æ‡‰ä½¿ç”¨è©²å¸³æˆ¶ç™»éŒ„ã€‚  </p>\n<p>å‰µå»ºæ–°é »é“<br>å¸³æˆ¶æº–å‚™å¥½å¾Œï¼Œç™»éŒ„ï¼Œæ‰“é–‹â€œé »é“â€æ¨™ç±¤ä¸¦é¸æ“‡â€œæˆ‘çš„é »é“â€ã€‚**</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/849309138521769078#\"><img src=\"https://lh3.googleusercontent.com/-XzTxSCPscZ0/YPa4xM-M8vI/AAAAAAAAedA/zy3dDY4cQDMSnSWEP6fOfBxrGtOgNea6wCNcBGAsYHQ/w437-h257/image.png\"></a></p>\n<p><strong>æŒ‰â€œæ–°é »é“â€æŒ‰éˆ•å‰µå»ºä¸€å€‹æ–°é »é“ã€‚</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/849309138521769078#\"><img src=\"https://lh3.googleusercontent.com/-MJJR2oVyJQk/YPa45d0cVHI/AAAAAAAAedE/b4Qqx0Wvn7M8szBtL9iXxVv7XkY3g8KHACNcBGAsYHQ/w481-h346/image.png\"></a></p>\n<p><strong>ç‚ºæ‚¨çš„é »é“è¼¸å…¥åç¨±ä¸¦æ·»åŠ èªªæ˜ã€‚</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/849309138521769078#\"><img src=\"https://lh3.googleusercontent.com/-7eVycTiCOuQ/YPa5Gv1-SJI/AAAAAAAAedM/Q1KRU-Rqu98pbo5kkSlP8yvRTnR_zCxoACNcBGAsYHQ/w481-h325/image.png\"></a></p>\n<p><strong>å¯ä»¥è‡ªå®šç¾©åœ–è¡¨ï¼Œè½‰åˆ°æ‚¨çš„ç§äººè¦–åœ–é¸é …å¡ï¼Œç„¶å¾Œå–®æ“Šç·¨è¼¯åœ–æ¨™ã€‚</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/849309138521769078#\"><img src=\"https://lh3.googleusercontent.com/-zJ909rDk0Lg/YPa5P7g5aiI/AAAAAAAAedU/g8BMvBNOgYIjFTkI6SE7I8gDnFP1Qs6YQCNcBGAsYHQ/w472-h474/image.png\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/849309138521769078#\"><img src=\"https://lh3.googleusercontent.com/-dT4teOJYE3I/YPa5XbOTmTI/AAAAAAAAedc/qFrNXBkcyLI_MEbT0y6lPsUrzW2qwS7cwCNcBGAsYHQ/w574-h477/image.png\"></a></p>\n<p><strong>å®Œæˆå¾Œï¼ŒæŒ‰â€œä¿å­˜â€æŒ‰éˆ•ã€‚</strong></p>\n<p><strong>è¦å°‡å€¼å¾ ESP32 ç™¼é€åˆ° ThingSpeakï¼Œæ‚¨éœ€è¦å¯«å…¥ API å¯†é‘°ã€‚æ‰“é–‹â€œAPI å¯†é‘°â€<br>é¸é …å¡ä¸¦å°‡å¯«å…¥ API å¯†é‘°è¤‡è£½åˆ°ä¸€å€‹å®‰å…¨çš„åœ°æ–¹ï¼Œå› ç‚ºæ‚¨ç¨å¾Œæœƒéœ€è¦å®ƒã€‚</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/849309138521769078#\"><img src=\"https://lh3.googleusercontent.com/-35r-wuz8QZA/YPa5nUmuVSI/AAAAAAAAedo/UXDaOoHybCMW0cC2Si6Mj7d_uKNcDv1VACNcBGAsYHQ/w729-h351/image.png\"></a></p>\n<hr>\n<p>å®‰è£ ThingSpeak åº«<br>è¦å°‡å‚³æ„Ÿå™¨è®€æ•¸ç™¼é€åˆ° ThingSpeakï¼Œæˆ‘å€‘å°‡ä½¿ç”¨ thingspeak-arduino åº«ã€‚æ‚¨å¯ä»¥é€šé Arduino åº«ç®¡ç†å™¨å®‰è£æ­¤åº«ã€‚è½‰åˆ° Sketch Include Library Manage Librariesâ€¦ ä¸¦åœ¨ Library Manager ä¸­æœç´¢â€œThingSpeakâ€ã€‚å®‰è£ MathWorks çš„ ThingSpeak åº«ã€‚</p>\n<hr>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/849309138521769078#\"><img src=\"https://lh3.googleusercontent.com/-x91vImHJl_g/YPa9gniW-2I/AAAAAAAAedw/ta8IapxF41MfqYbYSXUOIlN3IY8f_pQUQCNcBGAsYHQ/w627-h353/image.png\"></a></p>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;WiFi.h&gt;\n#include &lt;Wire.h&gt;\n#include &lt;SPI.h&gt;\n#include &lt;Adafruit_BMP280.h&gt;\n#include &lt;ThingSpeak.h&gt;\n\nconstÂ char*Â ssid&#x3D;&quot;---&quot;;\nconstÂ char*Â password&#x3D;&quot;-----&quot;;\nconstÂ char*Â APIKey&#x3D;&quot;X0V369ZQ4VM9YGA8&quot;;\n\nWiFiClientÂ client;\n\nAdafruit_BMP280Â bmp;Â &#x2F;&#x2F;Â I2C\n\nunsignedÂ longÂ lastTime&#x3D;0;\nunsignedÂ longÂ currenTime&#x3D;millis();\n\nvoidÂ setup()Â &#123;\nÂ Â Serial.begin(115200);\nÂ Â ifÂ (!bmp.begin())Â &#123;\nÂ Â Â Â Serial.println(F(&quot;CouldÂ notÂ findÂ aÂ validÂ BMP280Â sensor,Â checkÂ wiringÂ orÂ &quot;\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &quot;tryÂ aÂ differentÂ address!&quot;));\nÂ Â Â Â whileÂ (1)Â delay(10);\nÂ Â &#125;\nÂ Â WiFi.mode(WIFI_STA);\nÂ Â ThingSpeak.begin(client);\nÂ Â WiFi.begin(ssid,Â password);\nÂ Â whileÂ (WiFi.status()Â !&#x3D;Â WL_CONNECTED)&#123;\nÂ Â Â Â Serial.print(&quot;.&quot;);\nÂ Â &#125;\nÂ Â Serial.println(&quot;ConnectedÂ successful!&quot;);\n&#125;\n\n\nvoidÂ loop()Â &#123;\nÂ Â floatÂ temp&#x3D;bmp.readTemperature();\nÂ Â intÂ x&#x3D;ThingSpeak.writeField(1,Â 1,Â temp,Â APIKey);\nÂ Â ifÂ (x&#x3D;&#x3D;200)&#123;\nÂ Â Â Â Serial.println(&quot;requestÂ successful!&quot;);\nÂ Â &#125;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"è§£æ\"><a href=\"#è§£æ\" class=\"headerlink\" title=\"è§£æ\"></a>è§£æ</h2><p><strong>åŒ¯å…¥æ‰€é ˆçš„æ¨¡çµ„</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;WiFi.h&gt;\n#include &lt;Wire.h&gt;\n#include &lt;SPI.h&gt;\n#include &lt;Adafruit_BMP280.h&gt;\n#include &lt;ThingSpeak.h&gt;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>WIFIå’ŒAPIçš„KEY</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">const char*Â ssid&#x3D;&quot;åŸºåœ°å°åç¨±&quot;;\nconst char*Â password&#x3D;&quot;åŸºåœ°å°å¯†ç¢¼&quot;;\nconst char*Â APIKey&#x3D;&quot;X0V36---------&quot;;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p><strong>WIFIçš„å®¢æˆ¶ç«¯</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">WiFiClientÂ client;&#96;\n\n**BMP280æŒ‡å®šå°è±¡**\n\nAdafruit_BMP280Â bmp;Â &#x2F;&#x2F;Â I2C&#96;\n\n**BMP280åˆå§‹åŒ–**\n\n&#96;&#96;&#96;c#\nifÂ (!bmp.begin())Â &#123;\nÂ Â Â Â Serial.println(F(&quot;CouldÂ notÂ findÂ aÂ validÂ BMP280Â sensor,Â checkÂ wiringÂ orÂ &quot;\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &quot;tryÂ aÂ differentÂ address!&quot;));\nÂ Â Â Â whileÂ (1)Â delay(10);\nÂ Â &#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>WIFIé€£ç·šè¨­å®šèˆ‡è¨­å®šæˆSTAæ¨¡å¼</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">WiFi.mode(WIFI_STA);\nWiFi.begin(ssid,Â password);\nÂ Â whileÂ (WiFi.status()Â !&#x3D;Â WL_CONNECTED)&#123;\nÂ Â Â Â Serial.print(&quot;.&quot;);\nÂ Â &#125;\nÂ Â Serial.println(&quot;ConnectedÂ successful!&quot;);\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>ThingSpeakåˆå§‹åŒ–</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">ThingSpeak.begin(client);<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>loop()è£¡é¢</strong></p>\n<p><strong>è®€å–æº«åº¦å’Œä¸Šå‚³æ•¸è‡³åˆ°ThingSpeak</strong></p>\n<p><strong>å¦‚æœæˆåŠŸç™¼å¸ƒè®€æ•¸ï¼Œæ­¤å‡½æ•¸å°‡è¿”å›ä»£ç¢¼ 200ã€‚</strong><br><strong>// å¯«å…¥ ThingSpeakã€‚ä¸€å€‹é€šé“æœ€å¤šæœ‰ 8 å€‹å­—æ®µï¼Œæœ€å¤šå¯ä»¥å­˜å„² 8 å€‹ä¸åŒçš„å­—æ®µã€‚<br>// é€šé“ä¸­çš„ä¿¡æ¯ç‰‡æ®µã€‚åœ¨é€™è£¡ï¼Œæˆ‘å€‘å¯«å…¥å­—æ®µ 1ã€‚</strong></p>\n<p><strong>//ThingSpeak.writeField(1,Â 1,Â temp,Â APIKey)ç¬¬ä¸€å€‹1ä»£è¡¨é »é“,ç¬¬äºŒå€‹1ä»£è¡¨å­—æ®µ</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">floatÂ temp&#x3D;bmp.readTemperature();\nÂ Â intÂ x&#x3D;ThingSpeak.writeField(1,Â 1,Â temp,Â APIKey);\nÂ Â ifÂ (x&#x3D;&#x3D;200)&#123;\nÂ Â Â Â Serial.println(&quot;requestÂ successful!&quot;);\nÂ Â &#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<hr>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/849309138521769078#\"><img src=\"https://1.bp.blogspot.com/-I1rIMHBqD9I/YPbEIweD_4I/AAAAAAAAed4/g288Q1gyvFwLWDSlOo4WzL_wFCcgqypmgCNcBGAsYHQ/w687-h303/BMP280TEMP.jpg\"></a></p>\n","categories":["esp32"],"tags":["bmp280","ThingSpeak","IOT"]},{"title":"BMP280æ°£å£“,æº«åº¦æ¨¡çµ„-ESP32","url":"/2021/08/29/BMP280%E6%B0%A3%E5%A3%93-%E6%BA%AB%E5%BA%A6%E6%A8%A1%E7%B5%84-ESP32/","content":"<h1 id=\"BMP280æ°£å£“-æº«åº¦æ¨¡çµ„-ESP32\"><a href=\"#BMP280æ°£å£“-æº«åº¦æ¨¡çµ„-ESP32\" class=\"headerlink\" title=\"BMP280æ°£å£“,æº«åº¦æ¨¡çµ„-ESP32\"></a>BMP280æ°£å£“,æº«åº¦æ¨¡çµ„-ESP32</h1><h6 id=\"tags-esp32-bmp280\"><a href=\"#tags-esp32-bmp280\" class=\"headerlink\" title=\"tags: esp32 bmp280\"></a>tags: <code>esp32</code> <code>bmp280</code></h6><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2010016947036646160#\"><img src=\"https://1.bp.blogspot.com/-4LdM2J8lnOY/YPV1dYnda-I/AAAAAAAAecQ/OXHYgyYLfkgCzpZzyPV9wC_xhR4CiLv2ACNcBGAsYHQ/s320/21805656779815_796.jpg\"></a></p>\n<p>**_BMP280,è©²å‚³æ„Ÿå™¨å¯ä»¥éå¸¸æº–ç¢ºåœ°æ¸¬é‡æ°£å£“å’Œæº«åº¦ã€‚  </p>\n<p>æ‚¨å¯ä»¥ä½¿ç”¨ I2C æˆ– SPI é€£æ¥å”è­°å°‡å…¶èˆ‡æ‚¨çš„ Arduino æ¿é€£æ¥ã€‚å®ƒæœ‰ä¸€å€‹ 3.3V ç©©å£“å™¨å’Œé›»å¹³è½‰æ›ï¼Œå› æ­¤æ‚¨å¯ä»¥æ¯«ç„¡å•é¡Œåœ°å°‡å®ƒèˆ‡ 3V æˆ– 5V é‚è¼¯å¾®æ§åˆ¶å™¨ä¸€èµ·ä½¿ç”¨ã€‚_**</p>\n<hr>\n<h2 id=\"æ¥ç·š\"><a href=\"#æ¥ç·š\" class=\"headerlink\" title=\"æ¥ç·š\"></a>æ¥ç·š</h2><p>*<strong>ç¶²è·¯ä¸Šå¾ˆå¤šæ•™å­¸éƒ½æ²’æœ‰èªªSDOè¦æ¥VCC,å› ç‚ºæˆ‘ä¸€é–‹å§‹æ˜¯</strong></p>\n<p><strong>æ²’æœ‰æ¥,ç™¼ç¾ä¸€ç›´é¡¯ç¤ºæ‰¾ä¸åˆ°Addr,å¾Œä¾†æŸ¥ä¸€ä¸‹åœ‹å¤–æœ‰äººèªª</strong></p>\n<p><strong>æ¥ä¸Šå»æ‰æœƒæ‰¾çš„åˆ°ä½å€ã€‚</strong></p>\n<p>| BME280       | ESP32 |</p>\n<p>| <strong>SDOâ€“&gt;VCC</strong>|<br> |<br>| <strong>VCC</strong>â€”â€”â€”-| 3.3V |<br>| <strong>GND</strong>â€”â€”â€”| GND |<br>| <strong>SCL</strong>â€”â€”â€”-| GPIO 22 |<br>| <strong>SDA</strong>â€”â€”â€”| GPIO 21 |</p>\n<p>There are other versions of this sensor that can use either SPI or I2C communication protocols, like the module shown in the next figure:</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2010016947036646160#\"><img src=\"https://1.bp.blogspot.com/-_kyGe2Iyy2E/YPV2DIT7ndI/AAAAAAAAecY/FaJYnuihXPEGxJyZgeP-KK2B7mx4DkzEgCNcBGAsYHQ/w653-h310/1.jpg\"></a></p>\n<hr>\n<h2 id=\"ä¸‹è¼‰å‡½å¼åº«\"><a href=\"#ä¸‹è¼‰å‡½å¼åº«\" class=\"headerlink\" title=\"ä¸‹è¼‰å‡½å¼åº«\"></a>ä¸‹è¼‰å‡½å¼åº«</h2><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2010016947036646160#\">Adafruit_BME280_Library</a>  </p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2010016947036646160#\">Adafruit_Sensor</a>  </p>\n<p>å°‡ä¸Šé¢å…©å€‹æª”è§£å£“å¾Œ,æ•´å€‹è³‡æ–™å¤¾æ”¾å…¥Arduinoçš„libraryè£¡</p>\n<hr>\n<p>æ‰“é–‹Arduino IDEâ€“&gt;<strong><em>æª”æ¡ˆ</em></strong>Â &gt; <strong><em>ç¯„ä¾‹</em></strong>&gt;Â <em>Adafruit BME280 library</em>Â &gt;Â <em>bme280 test</em></p>\n<p>å°‡æ­¤ç¨‹å¼ç¢¼ä¸Šå‚³</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;Wire.h&gt;\n#include &lt;SPI.h&gt;\n#include &lt;Adafruit_BMP280.h&gt;\n\n#define BMP_SCKÂ Â (13)\n#define BMP_MISOÂ (12)\n#define BMP_MOSIÂ (11)\n#define BMP_CSÂ Â Â (10)\n\n\nAdafruit_BMP280Â bmp;Â &#x2F;&#x2F;Â I2C\n&#x2F;&#x2F;Adafruit_BMP280Â bmp(BMP_CS);Â &#x2F;&#x2F;Â hardwareÂ SPI\n&#x2F;&#x2F;Adafruit_BMP280Â bmp(BMP_CS,Â BMP_MOSI,Â BMP_MISO,Â Â BMP_SCK);\n\nvoid setup()Â &#123;\n Serial.begin(9600);\n Serial.println(F(&quot;BMP280Â test&quot;));\n\nÂ Â &#x2F;&#x2F;ifÂ (!bmp.begin(BMP280_ADDRESS_ALT,Â BMP280_CHIPID))Â &#123;\n ifÂ (!bmp.begin())Â &#123;\n    Serial.println(F(&quot;CouldÂ notÂ findÂ aÂ validÂ BMP280Â sensor,Â checkÂ wiringÂ orÂ &quot;\n    &quot;tryÂ aÂ differentÂ address!&quot;));\n whileÂ (1)Â delay(10);\nÂ Â &#125;\n\n  \nÂ Â &#x2F;*Â DefaultÂ settingsÂ fromÂ datasheet.Â *&#x2F;\n bmp.setSampling(Adafruit_BMP280::MODE_NORMAL,Â Â Â Â Â &#x2F;*Â OperatingÂ Mode.Â *&#x2F;\n Adafruit_BMP280::SAMPLING_X2,Â Â Â Â Â &#x2F;*Â Temp.Â oversamplingÂ *&#x2F;\n Adafruit_BMP280::SAMPLING_X16,Â Â Â Â &#x2F;*Â PressureÂ oversamplingÂ *&#x2F;\n Adafruit_BMP280::FILTER_X16,Â Â Â Â Â Â &#x2F;*Â Filtering.Â *&#x2F;\n Adafruit_BMP280::STANDBY_MS_500);Â &#x2F;*Â StandbyÂ time.Â *&#x2F;\n&#125;\n\n  \nvoid loop()Â &#123;\n Serial.print(F(&quot;TemperatureÂ &#x3D;Â &quot;));\n Serial.print(bmp.readTemperature());\n Serial.println(&quot;Â *C&quot;);\n Serial.print(F(&quot;PressureÂ &#x3D;Â &quot;));\n Serial.print(bmp.readPressure());\n Serial.println(&quot;Â Pa&quot;);\n Serial.print(F(&quot;ApproxÂ altitudeÂ &#x3D;Â &quot;));\n Serial.print(bmp.readAltitude(1013.25));Â &#x2F;*Â AdjustedÂ toÂ localÂ forecast!Â *&#x2F;\n Serial.println(&quot;Â m&quot;);\n Serial.println();\n delay(2000);\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<hr>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2010016947036646160#\"><img src=\"https://1.bp.blogspot.com/-uuCjmn1O69U/YPYNTBw5lXI/AAAAAAAAecg/PdiElAnsgXY-m87_nbhB_nYmHrFE8svHQCNcBGAsYHQ/w488-h261/bmp280-val.jpg\"></a></p>\n","categories":["esp32"],"tags":["bmp280"]},{"title":"DHT11/12ç¶²è·¯ç›£æ¸¬-ESP32","url":"/2021/08/29/DHT11-12%E7%B6%B2%E8%B7%AF%E7%9B%A3%E6%B8%AC-ESP32/","content":"<head>\nÂ Â <metaÂ charset=\"utf-8\"Â />\nÂ Â <metaÂ name=\"viewport\"Â content=\"width=device-width,Â initial-scale=1.0\"Â />\nÂ Â <style>\nÂ Â Â Â h1Â Â {text-align:Â center;Â background-color:Â orange;Â margin-right:5px;}\nÂ Â Â Â dlÂ {Â width:Â 320px;Â margin:Â 12pxÂ auto;Â }\nÂ Â Â Â dtÂ {Â \nÂ Â Â Â Â Â font-size:Â 20pt;Â color:Â #444;Â background-color:Â #ddd;\nÂ Â Â Â Â Â margin:Â 6ptÂ 0;Â padding:Â 6ptÂ 12pt;\nÂ Â Â Â }\nÂ Â Â Â ddÂ {\nÂ Â Â Â Â Â text-align:Â right;Â padding-right:Â 6pt;\nÂ Â Â Â }\nÂ Â Â Â .numÂ {Â font-size:Â 36pt;Â color:Â dodgerblue;Â }\nÂ Â </style>\nÂ Â </head>\n<body>\nÂ Â <p><h1>ESP32Â æº«æº¼åº¦é¡¯ç¤ºè¨ˆ</h1></p>\nÂ Â <dl>\nÂ Â Â Â <dt>æº«åº¦</dt>\nÂ Â Â Â <ddÂ class=num>%TEMP%Â Â°C</dd>\nÂ Â Â Â <dt>æ¿•åº¦</dt>\nÂ Â Â Â <ddÂ class=num>%HUMI%Â %</dd>\nÂ Â </dl>\n</body>\n</html>\n\n<p>)===â€;</p>\n<hr>\n<p><strong><em>å…¶ä¸­æœ‰å…©å€‹å‡½å¼ä¸€å€‹æ˜¯readTemp()å’ŒreadHumi()æ˜¯è®€å–æº«åº¦å’Œæ¿•åº¦</em></strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">StringÂ readTemp()&#123;\nÂ Â dht.temperature().getEvent(&amp;event);\nÂ Â ifÂ (isnan(event.temperature))Â &#123;\nÂ Â Â Â Serial.println(F(&quot;ErrorÂ readingÂ temperature!&quot;));\nÂ Â Â Â returnÂ &quot;--&quot;;\nÂ Â &#125;\nÂ Â elseÂ &#123;\nÂ Â Â Â Serial.print(F(&quot;Temperature:Â &quot;));\nÂ Â Â Â Serial.print(float(event.temperature));\nÂ Â Â Â Serial.println(F(&quot;Â°C&quot;));\nÂ Â Â Â returnÂ String(float(event.temperature));\nÂ Â &#125;\n&#125;\n\nStringÂ readHumi()&#123;\nÂ Â dht.humidity().getEvent(&amp;event);\nÂ Â ifÂ (isnan(event.relative_humidity))Â &#123;\nÂ Â Â Â Serial.println(F(&quot;ErrorÂ readingÂ humidity!&quot;));\nÂ Â Â Â returnÂ &quot;--&quot;;\nÂ Â &#125;\nÂ Â elseÂ &#123;\nÂ Â Â Â Serial.print(F(&quot;Humidity:Â &quot;));\nÂ Â Â Â Serial.print(float(event.relative_humidity));\nÂ Â Â Â Serial.println(F(&quot;%&quot;));\nÂ Â Â Â returnÂ String(float(event.relative_humidity));\nÂ Â &#125;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong><em>é€™å€‹å‡½å¼æ„æŒ‡å¦‚æœè®€åˆ°ç¶²é è«‹æ±‚çš„å­—ä¸²æ˜¯TEMPå°±å›å‚³readTemp()è£¡çš„æº«åº¦æ•¸å€¼ä»¥å­—ä¸²å›å‚³</em></strong></p>\n<p><strong><em>å¦‚æœç¶²é è«‹æ±‚çš„å­—ä¸²æ˜¯HUMIå°±å›å‚³readHumi()è£¡çš„æ¿•åº¦æ•¸å€¼ä¸¦ä»¥å­—ä¸²å›å‚³</em></strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">StringÂ tmplProcessor(constÂ StringÂ &amp;Â var)&#123;\nÂ Â ifÂ (varÂ &#x3D;&#x3D;Â &quot;TEMP&quot;)&#123;\nÂ Â Â Â returnÂ readTemp();\nÂ Â &#125;elseÂ ifÂ (varÂ &#x3D;&#x3D;Â &quot;HUMI&quot;)&#123;\nÂ Â Â Â returnÂ readHumi();\nÂ Â &#125;\nÂ Â returnÂ String();\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong><em>åœ¨void stup(){ }è£¡</em></strong></p>\n<p><strong><em>å…ˆæŠŠesp32é€£åˆ°åŸºåœ°å°çš„è¨­åˆ¶å¯«å¥½</em></strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">Serial.begin(115200);\ndht.begin();\nWiFi.begin(ssid,Â password);Â Serial.print(&quot;åŸºåœ°å°åç¨±:Â &quot;);Â Serial.println(ssid);\nwhileÂ (WiFi.status()Â !&#x3D;Â WL_CONNECTED)&#123;\nÂ Â Â delay(1000);\nÂ Â Â Serial.println(&quot;.&quot;);\n&#125;\nSerial.print(&quot;IP:Â &quot;);Â Serial.println(WiFi.localIP());<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong><em>å‰©ä¸‹å°±æ˜¯ä¼ºæœå™¨çš„å›æ‡‰æ–¹å¼</em></strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">server.on(&quot;&#x2F;&quot;,Â HTTP_GET,Â [](AsyncWebServerRequestÂ *request)&#123;\nÂ Â Â Â request-&gt;send_P(200,Â &quot;text&#x2F;html&quot;,Â indexHtml,Â tmplProcessor);\n&#125;);\n\nserver.on(&quot;&#x2F;TEMP&quot;,Â HTTP_GET,Â [](AsyncWebServerRequestÂ *request)&#123;\nÂ Â   request-&gt;send_P(200,Â &quot;text&#x2F;plain&quot;,Â readTemp().c_str());\nÂ Â &#125;);\n\nserver.on(&quot;&#x2F;HUMI&quot;,Â HTTP_GET,Â [](AsyncWebServerRequestÂ *request)&#123;\nÂ Â Â Â request-&gt;send_P(200,Â &quot;text&#x2F;plain&quot;,Â readHumi().c_str());\nÂ Â &#125;);\nserver.begin();<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<hr>\n<p><strong><em>ç¨‹å¼ç¢¼ä¸Šå‚³å¾Œå¯ä»¥çœ‹åœ¨é¡¯ç¤ºçš„ipæ‰“é–‹ç€è¦½å™¨å°±æœƒå‘ˆç¾å¦‚ä¸‹:</em></strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7172775240521960034?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-qC9CxO4i-Xc/YOZFdnar8PI/AAAAAAAAeaI/R8u1hTYwETYdszDZYvxurjlFGHujuNH6QCNcBGAsYHQ/s1600/1625703786581523-0.png\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7172775240521960034?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-oOSgkfavhws/YOWz-Awpe-I/AAAAAAAAeZk/izEsvNIimRAk01_oxk-CKIQGdiK3c57YQCNcBGAsYHQ/w638-h349/1.jpg\"></a></p>\n","categories":["esp32"],"tags":["webserver","dht11/dht12"]},{"title":"è¶…éŸ³æ³¢&0.96OLED-ESP32","url":"/2021/08/29/%E8%B6%85%E9%9F%B3%E6%B3%A2-0-96OLED-ESP32/","content":"<h1 id=\"è¶…éŸ³æ³¢-amp-0-96OLED-ESP32\"><a href=\"#è¶…éŸ³æ³¢-amp-0-96OLED-ESP32\" class=\"headerlink\" title=\"è¶…éŸ³æ³¢&amp;0.96OLED-ESP32\"></a>è¶…éŸ³æ³¢&amp;0.96OLED-ESP32</h1><h6 id=\"tags-esp32-HC-SR04-è¶…éŸ³æ³¢æ¨¡çµ„\"><a href=\"#tags-esp32-HC-SR04-è¶…éŸ³æ³¢æ¨¡çµ„\" class=\"headerlink\" title=\"tags: esp32 HC-SR04 è¶…éŸ³æ³¢æ¨¡çµ„\"></a>tags: <code>esp32</code> <code>HC-SR04</code> <code>è¶…éŸ³æ³¢æ¨¡çµ„</code></h6><p><strong>0.96OLEDå¯¦ä½œåƒè€ƒ</strong>-<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/4510305853656321015#\">https://esp32-blairan.blogspot.com/2021/05/091oled-esp32.html</a></p>\n<p><strong>è¶…éŸ³æ³¢(Arduino)å¯¦ä½œåƒè€ƒ</strong>-<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/4510305853656321015#\">https://blairandreamwork.blogspot.com/2021/05/hc-sr04.html</a></p>\n<p><strong>è¶…éŸ³æ³¢å’ŒArduinoä¸Šçš„æ¨¡çµ„å¤§åŒå°ç¾©,ä¸éæˆ‘ä½¿ç”¨çš„æ¨¡çµ„æ¯”ä¸€èˆ¬ç°¡å–®å¤šäº†,çœå»</strong></p>\n<p><strong>è¨ˆç®—,ç›´æ¥å‘¼å«å‡½å¼å°±èƒ½å–å¾—incå’Œcmã€‚</strong></p>\n<h2 id=\"æ¥ç·š\"><a href=\"#æ¥ç·š\" class=\"headerlink\" title=\"æ¥ç·š\"></a>æ¥ç·š</h2><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/4510305853656321015#\"><img src=\"https://1.bp.blogspot.com/-vO1z_SK7Oh8/YOfhLRPWtII/AAAAAAAAeaw/vccMexvBlicqE1OUOSTG8UonqgV6fIe6wCNcBGAsYHQ/w698-h338/%25E4%25B8%258B%25E8%25BC%2589.jpg\"></a></p>\n<p>â€”â€”â€”â€”â€”â€”â€”â€”â€“Â Â Â Â Â  â€”â€”â€”â€”â€”â€”â€”Â Â Â Â Â </p>\n<p>//Â Â *Â |Â HC-SC04Â |Â ESP32 Â |Â Â Â Â Â |  OLED | ESP32 |</p>\n<p>//Â Â *Â â€”â€”â€”â€”â€”â€”â€”Â Â Â Â Â â€”â€”â€”â€”â€”â€”â€”Â Â Â Â Â </p>\n<p>//Â Â *Â |Â Â Â VccÂ Â Â |Â Â Â 3.3VÂ Â |Â Â Â Â Â | Vcc | 3.3V |</p>\n<p>//Â Â *Â |Â Â Â TrigÂ Â |Â Â Â 32Â Â Â Â |Â Â Â  Â | Gnd | GND |</p>\n<p>//Â Â *Â |Â Â Â EchoÂ Â |Â Â Â 33Â Â Â Â |Â Â Â Â Â | SCL | 21 |</p>\n<p>//Â Â *Â |Â Â Â GndÂ Â Â |Â Â Â GNDÂ Â Â |Â Â Â  Â | SDA | 22 |</p>\n<p>//Â Â *Â --------------------- â€”â€”â€”â€”â€”â€”â€”-</p>\n<hr>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;Ultrasonic.h&gt;\n#include &lt;Adafruit_SSD1306.h&gt;\n#include &lt;Adafruit_GFX.h&gt;\n#include &lt;Adafruit_GrayOLED.h&gt;\n#include &lt;Wire.h&gt;\n\nUltrasonicÂ ultrasonic1(32,Â 33);Â &#x2F;&#x2F;ultrasonic(trig,Â echo)\n#define SCREEN_WIDTH 128\n#define SCREEN_HEIGHT 64\n#define OLED_RESET -1\n\nAdafruit_SSD1306Â display(SCREEN_WIDTH,Â SCREEN_HEIGHT,Â &amp;Wire,Â OLED_RESET);\nvoidÂ setup()&#123;\nÂ Â Â Â Serial.begin(115200);\nÂ Â Â Â display.begin(SSD1306_SWITCHCAPVCC,Â 0x3C,Â OLED_RESET);\n&#125;\n\nvoidÂ loop()&#123;\nÂ Â Â Â unsignedÂ intÂ distance&#x3D;ultrasonic1.read(CM);\nÂ Â Â Â Serial.print(distance);Â Serial.println(&quot;Â CM&quot;);\nÂ Â Â Â display.clearDisplay();\nÂ Â Â Â display.setTextSize(3);\nÂ Â Â Â display.setTextColor(WHITE);\nÂ Â Â Â display.setCursor(0,Â 20);\nÂ Â Â Â display.print(distance);\nÂ Â Â Â display.setTextSize(2);\nÂ Â Â Â display.setCursor(60,Â 40);\nÂ Â Â Â display.println(&quot;CM&quot;);\nÂ Â Â Â display.display();\nÂ Â Â Â delay(500);\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong><em>é€™å€‹æ¨¡çµ„æ˜¯å‘¼å¸è¶…éŸ³æ³¢ç”¨çš„</em></strong></p>\n<pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;Ultrasonic.h></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong><em>é€™äº›æ˜¯OLEDä½¿ç”¨çš„æ¨¡çµ„</em></strong></p>\n<pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;Adafruit_SSD1306.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;Adafruit_GFX.h></span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;Adafruit_GrayOLED.h></span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;Wire.h></span></span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong><em>è¨­åˆ¶è¶…éŸ³æ³¢è…³ä½</em></strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">Ultrasonic ultrasonic1(32,Â 33);Â &#x2F;&#x2F;ultrasonic(trig,Â echo)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong><em>å®šç¾©oledæ‰€é ˆåƒæ•¸</em></strong></p>\n<pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">SCREEN_WIDTH</span> <span class=\"token expression\"><span class=\"token number\">128</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">SCREEN_HEIGHT</span> <span class=\"token expression\"><span class=\"token number\">64</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">OLED_RESET</span> <span class=\"token expression\"><span class=\"token operator\">-</span><span class=\"token number\">1</span></span></span>\n\nAdafruit_SSD1306 <span class=\"token function\">display</span><span class=\"token punctuation\">(</span>SCREEN_WIDTH<span class=\"token punctuation\">,</span> SCREEN_HEIGHT<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>Wire<span class=\"token punctuation\">,</span> OLED_RESET<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><em><strong>åˆå§‹åŒ–</strong></em></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">void setup()&#123;\nÂ Â Â Â Serial.begin(115200);\nÂ Â Â Â display.begin(SSD1306_SWITCHCAPVCC,Â 0x3C,Â OLED_RESET);\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p>void loop(){}è£¡é¢</p>\n<p><em><strong>è®€å–è¶…éŸ³æ³¢æ•¸è³ªä¸¦è³¦äºˆè®Šæ•¸</strong></em></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">unsigned int distance&#x3D;ultrasonic1.read(CM);\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>å…¶ä¸­</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">setTextSize(3),\nsetTextColor(WHITE),\nsetCursor(0,Â 20),\ndisplay.display()<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p><em><strong>ä¸€å®šè¦æœ‰,è¦ä¸ç„¶ä¸æœƒé¡¯ç¤ºæ–¼OLEDä¸Š</strong></em></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">display.clearDisplay();\nÂ Â Â Â display.setTextSize(3);\nÂ Â Â Â display.setTextColor(WHITE);\nÂ Â Â Â display.setCursor(0,Â 20);\nÂ Â Â Â display.print(distance);\nÂ Â Â Â display.setTextSize(2);\nÂ Â Â Â display.setCursor(60,Â 40);\nÂ Â Â Â display.println(&quot;CM&quot;);\nÂ Â Â Â display.display();\nÂ Â Â Â delay(500);<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/HDNld7TiiFQ\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>","categories":["esp32"],"tags":["HC-SC04","è¶…éŸ³æ³¢æ¨¡çµ„"]},{"title":"DHT11/DHT12æº«æº¼åº¦å‚³æ„Ÿå™¨å¯¦é©—","url":"/2021/08/29/DHT11-DHT12%E6%BA%AB%E6%BA%BC%E5%BA%A6%E5%82%B3%E6%84%9F%E5%99%A8%E5%AF%A6%E9%A9%97/","content":"<h1 id=\"DHT11-DHT12æº«æº¼åº¦å‚³æ„Ÿå™¨å¯¦é©—\"><a href=\"#DHT11-DHT12æº«æº¼åº¦å‚³æ„Ÿå™¨å¯¦é©—\" class=\"headerlink\" title=\"DHT11/DHT12æº«æº¼åº¦å‚³æ„Ÿå™¨å¯¦é©—\"></a>DHT11/DHT12æº«æº¼åº¦å‚³æ„Ÿå™¨å¯¦é©—</h1><h6 id=\"tags-esp32-dht11-dht12\"><a href=\"#tags-esp32-dht11-dht12\" class=\"headerlink\" title=\"tags: esp32 dht11/dht12\"></a>tags: <code>esp32</code> <code>dht11/dht12</code></h6><p>Â <strong>åƒè€ƒç¶²å€</strong>-[<a href=\"https://randomnerdtutorials.com/esp32-dht11-dht22-temperature-humidity-sensor-arduino-ide/]\">https://randomnerdtutorials.com/esp32-dht11-dht22-temperature-humidity-sensor-arduino-ide/]</a>(<a href=\"https://draft.blo/\">https://draft.blo</a> gger.com/blog/post/edit/3809681606094011522/8795709619283851665?hl=zh-TW#)</p>\n<p><em>æº«æº¼åº¦å‚³æ„Ÿå™¨åœ¨æ§åˆ¶æ¿å­¸ç¿’è£¡æ˜¯å¿…å‚™å…¥é–€å¯¦ä½œçš„èª²é¡Œ</em></p>\n<p><em>å®ƒåŒ…å«DHT11/DHT12é€™å…©ç¨®å½¢å¼,é€™äº›å‚³æ„Ÿå™¨åŒ…å«ä¸€å€‹</em></p>\n<p><em>èŠ¯ç‰‡ï¼Œå¯ä»¥é€²è¡Œæ¨¡æ“¬åˆ°æ•¸å­—çš„è½‰æ›ï¼Œä¸¦è¼¸å‡ºå¸¶æœ‰æº«åº¦å’Œæ¿•åº¦</em></p>\n<p><em>çš„æ•¸å­—ä¿¡è™Ÿã€‚é€™ä½¿å¾—å®ƒå€‘å¾ˆå®¹æ˜“èˆ‡ä»»ä½•å¾®æ§åˆ¶å™¨ä¸€èµ·ä½¿ç”¨ã€‚</em></p>\n<p>_DHT11 å’Œ DHT22 éå¸¸ç›¸ä¼¼ï¼Œä½†å®ƒå€‘çš„è¦æ ¼ä¸åŒã€‚</p>\n<hr>\n<p>_DHT11 çš„ç¯„åœæ›´å°ï¼Œç²¾åº¦ä¹Ÿæ›´ä½ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥æ¯ç§’è«‹æ±‚å‚³æ„Ÿå™¨è®€æ•¸ã€‚å®ƒä¹Ÿä¾¿å®œä¸€é»ã€‚<br>_</p>\n<p><em>DHT22å‚³æ„Ÿå™¨å…·æœ‰æ›´å¥½çš„åˆ†è¾¨ç‡å’Œæ›´å¯¬çš„æº«æ¿•åº¦æ¸¬é‡ç¯„åœã€‚ä½†æ˜¯ï¼Œå®ƒæœ‰é»è²´ï¼Œä¸¦ä¸”æ‚¨</em></p>\n<p><em>åªèƒ½ä»¥ 2 ç§’çš„é–“éš”è«‹æ±‚è®€æ•¸ã€‚</em></p>\n<h2 id=\"æ¥è…³\"><a href=\"#æ¥è…³\" class=\"headerlink\" title=\"æ¥è…³\"></a>æ¥è…³</h2><p><em>DHT å‚³æ„Ÿå™¨æœ‰å››å€‹å¼•è…³ï¼Œå¦‚ä¸‹åœ–æ‰€ç¤ºã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å°‡ DHT å‚³æ„Ÿå™¨å®‰è£åœ¨åˆ†ç·šæ¿ä¸­ï¼Œå‰‡å®ƒåªæœ‰ä¸‰å€‹å¼•è…³ï¼Œä¸¦ä¸”åœ¨å¼•è…³ 2 ä¸Šå¸¶æœ‰ä¸€å€‹å…§éƒ¨ä¸Šæ‹‰é›»é˜»ã€‚</em></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/8795709619283851665?hl=zh-TW#\"><img src=\"https://i2.wp.com/randomnerdtutorials.com/wp-content/uploads/2019/04/dht22-pinout.png?resize=138,300&quality=100&strip=all&ssl=1\"></a></p>\n<p><em>ä¸‹è¡¨é¡¯ç¤ºäº† DHT22/DHT11 å¼•è…³æ’åˆ—ã€‚ç•¶å‚³æ„Ÿå™¨é¢å‘æ‚¨æ™‚ï¼Œå¼•è…³ç·¨è™Ÿå¾å·¦åˆ°å³å¾ 1 é–‹å§‹</em></p>\n<p>| DHT pin | Connect to |<br>| 1 | 3.3V |<br>| 2 | Any digital GPIO; also connect a 10k Ohm pull-up resistor |<br>| 3 | Donâ€™t connect |<br>| 4 | GND |</p>\n<h2 id=\"æ‰€é ˆææ–™\"><a href=\"#æ‰€é ˆææ–™\" class=\"headerlink\" title=\"æ‰€é ˆææ–™\"></a>æ‰€é ˆææ–™</h2><ul>\n<li>  ESP32</li>\n<li>  DHT11æˆ–DHT22æº«æ¿•åº¦å‚³æ„Ÿå™¨</li>\n<li>  10k æ­å§†é›»é˜»</li>\n<li>  éºµåŒ…æ¿</li>\n<li>  è·³ç·š</li>\n</ul>\n<hr>\n<h2 id=\"æ¥ç·šåœ–\"><a href=\"#æ¥ç·šåœ–\" class=\"headerlink\" title=\"æ¥ç·šåœ–\"></a>æ¥ç·šåœ–</h2><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/8795709619283851665?hl=zh-TW#\"><img src=\"https://i0.wp.com/randomnerdtutorials.com/wp-content/uploads/2019/04/dht_esp32_bb.png?w=714&quality=100&strip=all&ssl=1\"></a></p>\n<hr>\n<p>ä¸‹è¼‰æ‰€é ˆçš„å‡½å¼åº«</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/8795709619283851665?hl=zh-TW#\">Adafruit_Sensor</a>  </p>\n<p>åŒ¯å…¥ç¯„ä¾‹æª”</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;Adafruit_Sensor.h&gt;\n\n#include &lt;DHT.h&gt;\n\n#include &lt;DHT_U.h&gt;\n\n  \n\n#define DHTPIN 4Â Â Â Â Â &#x2F;&#x2F;Â DigitalÂ pinÂ connectedÂ toÂ theÂ DHTÂ sensorÂ \n\n&#x2F;&#x2F;Â FeatherÂ HUZZAHÂ ESP8266Â note:Â useÂ pinsÂ 3,Â 4,Â 5,Â 12,Â 13Â orÂ 14Â --\n\n&#x2F;&#x2F;Â PinÂ 15Â canÂ workÂ butÂ DHTÂ mustÂ beÂ disconnectedÂ duringÂ programÂ upload.\n\n  \n\n&#x2F;&#x2F;Â UncommentÂ theÂ typeÂ ofÂ sensorÂ inÂ use:\n\n#define DHTTYPE DHT11Â Â Â Â Â &#x2F;&#x2F;Â DHTÂ 11\n\n&#x2F;&#x2F;#defineÂ DHTTYPEÂ Â Â Â DHT22Â Â Â Â Â &#x2F;&#x2F;Â DHTÂ 22Â (AM2302)\n\n&#x2F;&#x2F;#defineÂ DHTTYPEÂ Â Â Â DHT21Â Â Â Â Â &#x2F;&#x2F;Â DHTÂ 21Â (AM2301)\n\n  \n\n&#x2F;&#x2F;Â SeeÂ guideÂ forÂ detailsÂ onÂ sensorÂ wiringÂ andÂ usage:\n\n&#x2F;&#x2F;Â Â Â https:&#x2F;&#x2F;learn.adafruit.com&#x2F;dht&#x2F;overview\n\n  \n\nDHT_UnifiedÂ dht(DHTPIN,Â DHTTYPE);\n\n  \n\nuint32_tÂ delayMS;\n\n  \n\nvoidÂ setup()Â &#123;\n\nÂ Â Serial.begin(115200);\n\nÂ Â &#x2F;&#x2F;Â InitializeÂ device.\n\nÂ Â dht.begin();\n\n&#125;\n\n  \n\nvoidÂ loop()Â &#123;\n\nÂ Â &#x2F;&#x2F;Â DelayÂ betweenÂ measurements.\n\nÂ Â delay(2000);\n\nÂ Â &#x2F;&#x2F;Â GetÂ temperatureÂ eventÂ andÂ printÂ itsÂ value.\n\nÂ Â sensors\\_event\\_tÂ event;\n\nÂ Â dht.temperature().getEvent(&amp;event);\n\nÂ Â ifÂ (isnan(event.temperature))Â &#123;\n\nÂ Â Â Â Serial.println(F(&quot;ErrorÂ readingÂ temperature!&quot;));\n\nÂ Â &#125;\n\nÂ Â elseÂ &#123;\n\nÂ Â Â Â Serial.print(F(&quot;Temperature:Â &quot;));\n\nÂ Â Â Â Serial.print(event.temperature);\n\nÂ Â Â Â Serial.println(F(&quot;Â°C&quot;));\n\nÂ Â &#125;\n\nÂ Â &#x2F;&#x2F;Â GetÂ humidityÂ eventÂ andÂ printÂ itsÂ value.\n\nÂ Â dht.humidity().getEvent(&amp;event);\n\nÂ Â ifÂ (isnan(event.relative_humidity))Â &#123;\n\nÂ Â Â Â Serial.println(F(&quot;ErrorÂ readingÂ humidity!&quot;));\n\nÂ Â &#125;\n\nÂ Â elseÂ &#123;\n\nÂ Â Â Â Serial.print(F(&quot;Humidity:Â &quot;));\n\nÂ Â Â Â Serial.print(event.relative_humidity);\n\nÂ Â Â Â Serial.println(F(&quot;%&quot;));\n\nÂ Â &#125;\n\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<hr>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/8795709619283851665?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-5Zp3nVebHME/YOPu0xLelvI/AAAAAAAAeZY/hXFOvxMB5WYGya2btew2FDpecuWGw4oUQCNcBGAsYHQ/w510-h226/DHT-C.jpg\"></a></p>\n","categories":["esp32"],"tags":["dht11/dht12"]},{"title":"DeepSleepæ·±åº¦ç¡çœ çš„å¯¦é©—","url":"/2021/08/29/DeepSleep%E6%B7%B1%E5%BA%A6%E7%9D%A1%E7%9C%A0%E7%9A%84%E5%AF%A6%E9%A9%97/","content":"<h2 id=\"ç‚ºä»€éº¼è¦è®“ESP32é€²å…¥æ·±åº¦ç¡çœ æ¨¡å¼\"><a href=\"#ç‚ºä»€éº¼è¦è®“ESP32é€²å…¥æ·±åº¦ç¡çœ æ¨¡å¼\" class=\"headerlink\" title=\"ç‚ºä»€éº¼è¦è®“ESP32é€²å…¥æ·±åº¦ç¡çœ æ¨¡å¼?\"></a>ç‚ºä»€éº¼è¦è®“ESP32é€²å…¥æ·±åº¦ç¡çœ æ¨¡å¼?</h2><p><strong><em>å…¶å¯¦æˆ‘ä¹Ÿæ˜¯æœ€è¿‘å‰›å­¸åˆ°é€™ä¸€å¡Šï¼Œæ‰€ä»¥å°±é †æ‰‹ç´€éŒ„ä¸‹ä¾†ã€‚</em></strong></p>\n<p><strong><em>è¨˜å¾—ä»¥å‰åšéä¸€äº›è¦é›»æ± çš„æˆå“ï¼Œç™¼ç¾æ”¾ä¸€å¤©åŠå·¦å³å°±</em></strong></p>\n<p><strong><em>æ²’é›»äº†ï¼Œå¾Œä¾†ç¶²è·¯ä¸Šæœå°‹ç›¸é—œçŸ¥è­˜æ‰çŸ¥é“Arduinoå’Œesp32</em></strong></p>\n<p><strong><em>å®ƒå€‘éƒ½æœ‰ä½¿å…¶é€²å…¥æ·±åº¦ç¡çœ çš„æ–¹æ³•ã€‚</em></strong></p>\n<p><strong><em>åœ¨æ·±åº¦ç¡çœ ä¸­ï¼Œå¯ä»¥ä½¿æ©Ÿæ¿é™ä½åŠŸè€—ï¼ŒCPUå’ŒWIFIéƒ½æœƒ</em></strong></p>\n<p><strong>_åœæ­¢é‹ä½œï¼Œåªæœ‰ULPé‚„æœƒä»¥æœ€ä½åŠŸè€—é‹ä½œï¼Œé›–ç„¶ ESP32Â _</strong></p>\n<p><strong><em>è™•æ–¼æ·±åº¦ç¡çœ æ¨¡å¼ï¼Œä½† RTC è¨˜æ†¶é«”ä¹Ÿä»ç„¶è™•æ–¼æ‰“é–‹ç‹€æ…‹ï¼Œ</em></strong></p>\n<p><strong><em>å› æ­¤æˆ‘å€‘å¯ä»¥ç‚º ULP å…±åŒè™•ç†å™¨ç·¨å¯«ä¸€å€‹ç¨‹å¼ï¼Œä¸¦å°‡å…¶</em></strong></p>\n<p><strong><em>å­˜å„²åœ¨ RTC è¨˜æ†¶é«”ä¸­ä»¥è¨ªå•é€±é‚Šè¨­å‚™ã€å…§éƒ¨å®šæ™‚å™¨å’Œå…§</em></strong></p>\n<p><strong><em>éƒ¨æ„Ÿæ¸¬å™¨ã€‚</em></strong></p>\n<h2 id=\"RTCå¼•è…³\"><a href=\"#RTCå¼•è…³\" class=\"headerlink\" title=\"RTCå¼•è…³\"></a>RTCå¼•è…³</h2><p><strong><em>ä¸‹åœ–é»ƒè‰²å€å¡Šçš„éƒ½å¯ä»¥ä½¿ç”¨RTC</em></strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/4527766207386106731#\"><img src=\"https://1.bp.blogspot.com/-Ap7xbLO-MAE/YM_mR7e9KwI/AAAAAAAAeUw/rcA6j1T1gKgaLSdPPXI5A2zfn467tEIJwCNcBGAsYHQ/w694-h412/ESP32-DOIT-DEVKIT-V1-Board-Pinout-30-GPIOs-Copy.png\"></a></p>\n<hr>\n<h2 id=\"å–šé†’æ¨¡å¼\"><a href=\"#å–šé†’æ¨¡å¼\" class=\"headerlink\" title=\"å–šé†’æ¨¡å¼\"></a>å–šé†’æ¨¡å¼</h2><h3 id=\"ä¸»è¦æœ‰ç¨®å–šé†’æ¨¡å¼\"><a href=\"#ä¸»è¦æœ‰ç¨®å–šé†’æ¨¡å¼\" class=\"headerlink\" title=\"ä¸»è¦æœ‰ç¨®å–šé†’æ¨¡å¼\"></a>ä¸»è¦æœ‰ç¨®å–šé†’æ¨¡å¼</h3><ol>\n<li> <em><strong>å®šæ™‚å™¨å–šé†’</strong></em></li>\n<li> <em><strong>è§¸æ‘¸å–šé†’</strong></em></li>\n<li> <em><strong>å¤–éƒ¨å–šé†’/å¤šç¨®ä¸åŒçš„å¤–éƒ¨å–šé†’</strong></em></li>\n<li> <em><strong>ULPå–šé†’</strong></em></li>\n</ol>\n<hr>\n<h2 id=\"1-å®šæ™‚å™¨å–šé†’æ¨¡å¼å¯¦é©—\"><a href=\"#1-å®šæ™‚å™¨å–šé†’æ¨¡å¼å¯¦é©—\" class=\"headerlink\" title=\"1.å®šæ™‚å™¨å–šé†’æ¨¡å¼å¯¦é©—\"></a>1.å®šæ™‚å™¨å–šé†’æ¨¡å¼å¯¦é©—</h2><p><strong><em>ESP32å¯é€²å…¥æ·±ç¡æ¨¡å¼ï¼Œä¸¦é è¨­æ™‚é–“å–šé†’</em></strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">\n#define us_to_s 1000000\n\n#define time__to_sleep 5\n\n  \n\nRTC_DATA_ATTRÂ intÂ countÂ &#x3D;Â 0;\n\n  \n\nvoidÂ print_wakeup_reason()\n\n&#123;\n\nÂ Â esp_sleep_wakeup_cause_tÂ wakeup_reason;\n\nÂ Â wakeup_reasonÂ &#x3D;Â esp_sleep_get_wakeup_cause();\n\nÂ Â switchÂ (wakeup_reason)\n\nÂ Â &#123;\n\nÂ Â caseÂ ESP_SLEEP_WAKEUP_EXT0:\n\nÂ Â Â Â Serial.println(&quot;WakeupÂ causedÂ byÂ externalÂ signalÂ usingÂ RTC_IO&quot;);\n\nÂ Â Â Â break;\n\nÂ Â caseÂ ESP_SLEEP_WAKEUP_EXT1:\n\nÂ Â Â Â Serial.println(&quot;WakeupÂ causedÂ byÂ externalÂ signalÂ usingÂ RTC_CNTL&quot;);\n\nÂ Â Â Â break;\n\nÂ Â caseÂ ESP_SLEEP_WAKEUP_TIMER:\n\nÂ Â Â Â Serial.println(&quot;WakeupÂ causedÂ byÂ timer&quot;);\n\nÂ Â Â Â break;\n\nÂ Â caseÂ ESP_SLEEP_WAKEUP_TOUCHPAD:\n\nÂ Â Â Â Serial.println(&quot;WakeupÂ causedÂ byÂ touchpad&quot;);\n\nÂ Â Â Â break;\n\nÂ Â caseÂ ESP_SLEEP_WAKEUP_ULP:\n\nÂ Â Â Â Serial.println(&quot;WakeupÂ causedÂ byÂ ULPÂ program&quot;);\n\nÂ Â Â Â break;\n\nÂ Â default:\n\nÂ Â Â Â Serial.printf(&quot;WakeupÂ wasÂ notÂ causedÂ byÂ deepÂ sleep:Â %d\\n&quot;,Â wakeup_reason);\n\nÂ Â Â Â break;\n\nÂ Â &#125;\n\n&#125;\n\n  \n\nvoidÂ setup()\n\n&#123;\n\nÂ Â Serial.begin(115200);\n\nÂ Â delay(1000);\n\nÂ Â ++count;\n\nÂ Â Serial.println(&quot;bootÂ num:Â &quot;Â +Â String(count));\n\nÂ Â print_wakeup_reason();\n\nÂ Â esp_sleep_enable_timer_wakeup(us_to_sÂ *Â time_to_sleep);\n\nÂ Â delay(1000);\n\nÂ Â esp_deep_sleep_start();\n\n&#125;\n\n\nvoidÂ loop()&#123;\n\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>ä¸€é–‹å§‹è¨­å®šå¾®ç§’è½‰æˆç§’ï¼Œä¹Ÿå¯ä»¥ä»¥ç›´æ¥å¯«æˆ</strong>TIME_TO_SLEEPÂ  5000000</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#define us_TO_s 1000000\n#define TIME_TO_SLEEP  5   <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<p><strong>é€™ä¸€æ®µæ˜¯èªªè¦åœ¨RTCä¸Šä¿å­˜å–šé†’çš„æ¬¡æ•¸ï¼Œå¯ä»¥åœ¨æœ€å‰é¢åŠ ä¸ŠRTC_DATA_ATTR</strong></p>\n<p>**_<em>ä½†æ˜¯åœ¨æŒ‰ä¸‹ENéµé‡å•“é€™å€‹æ•¸æ“šæœƒæµå¤±æ‰_</em>*</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">RTC_DATA_ATTR int count &#x3D; 0;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><strong>é€™å€‹å‡½å¼ä¸»è¦æ˜¯è¨­å®šâ€è¢«æ›é†’çš„åŸå› â€</strong></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">rst:0x5Â (DEEPSLEEP_RESET),boot:0x17Â (SPI_FAST_FLASH_BOOT)\n\nconfigsip:Â 0,Â SPIWP:0xee\n\nclk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00\n\nmode:DIO,Â clockÂ div:2\n\nload:0x3fff0018,len:4\n\nload:0x3fff001c,len:1044\n\nload:0x40078000,len:10124\n\nload:0x40080400,len:5828\n\nentryÂ 0x400806a8\n\nbootÂ num:Â 2\n\nWakeupÂ causedÂ byÂ timer\n\netsÂ JunÂ Â 8Â 2016Â 00:22:57\n\n  \n\nrst:0x5Â (DEEPSLEEP_RESET),boot:0x17Â (SPI_FAST_FLASH_BOOT)\n\nconfigsip:Â 0,Â SPIWP:0xee\n\nclk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00\n\nmode:DIO,Â clockÂ div:2\n\nload:0x3fff0018,len:4\n\nload:0x3fff001c,len:1044\n\nload:0x40078000,len:10124\n\nload:0x40080400,len:5828\n\nentryÂ 0x400806a8\n\nbootÂ num:Â 3\n\nWakeupÂ causedÂ byÂ timer\n\netsÂ JunÂ Â 8Â 2016Â 00:22:57\n\n  \n\nrst:0x5Â (DEEPSLEEP\\_RESET),boot:0x17Â (SPI\\_FAST\\_FLASH\\_BOOT)\n\nconfigsip:Â 0,Â SPIWP:0xee\n\nclk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00\n\nmode:DIO,Â clockÂ div:2\n\nload:0x3fff0018,len:4\n\nload:0x3fff001c,len:1044\n\nload:0x40078000,len:10124\n\nload:0x40080400,len:5828\n\nentryÂ 0x400806a8\n\nbootÂ num:Â 4\n\nWakeupÂ causedÂ byÂ timer\n\netsÂ JunÂ Â 8Â 2016Â 00:22:57<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<hr>\n<p><strong>é€²å…¥åˆ°void setup(){}</strong></p>\n<p><strong>è¨­å®šåºåˆ—åŸ çš„æ³¢ç‰¹ç‡</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">Serial.begin(115200);<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>æ¯æ¬¡è¢«å–šé†’ï¼Œcountå°±æœƒåŠ 1ï¼Œä¸¦è¢«å°å‡ºä¾†</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">++count; Serial.println(&quot;Boot number: &quot;   +   String(bootCount));<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>èª¿ç”¨å‰›æœ€å‰æ–¹é‚£å€‹è¢«å–šé†’çš„åŸå› å‡½å¼</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">print_wakeup_reason()<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>å•“ç”¨å¹¾ç§’å¾Œï¼Œèª¿ç”¨ç¡çœ æ¨¡å¼çš„å‡½å¼</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">esp_sleep_enable_timer_wakeup(TIME_TO_SLEEP * uS_TO_S_FACTOR);\n\nesp_deep_sleep_start()<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<hr>\n<h2 id=\"å¯¦é©—çµæœ\"><a href=\"#å¯¦é©—çµæœ\" class=\"headerlink\" title=\"å¯¦é©—çµæœ\"></a>å¯¦é©—çµæœ</h2><p>ç´…è‰²å­—é«”æ˜¯æŒ‡é€²å…¥æ·±ç¡æ¨¡å¼</p>\n<p>åœŸé»ƒè‰²å­—é«”æ˜¯æŒ‡è¢«å–šé†’çš„æ¬¡æ•¸</p>\n<p>æ·±è—è‰²å­—é«”æ˜¯è¢«å–šé†’çš„åŸå› </p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">rst:0x5Â (DEEPSLEEP\\_RESET),boot:0x17Â (SPI\\_FAST\\_FLASH\\_BOOT)\n\nconfigsip:Â 0,Â SPIWP:0xee\n\nclk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00\n\nmode:DIO,Â clockÂ div:2\n\nload:0x3fff0018,len:4\n\nload:0x3fff001c,len:1044\n\nload:0x40078000,len:10124\n\nload:0x40080400,len:5828\n\nentryÂ 0x400806a8\n\nbootÂ num:Â 2\n\nWakeupÂ causedÂ byÂ timer\n\netsÂ JunÂ Â 8Â 2016Â 00:22:57\n\n  \n\nrst:0x5Â (DEEPSLEEP\\_RESET),boot:0x17Â (SPI\\_FAST\\_FLASH\\_BOOT)\n\nconfigsip:Â 0,Â SPIWP:0xee\n\nclk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00\n\nmode:DIO,Â clockÂ div:2\n\nload:0x3fff0018,len:4\n\nload:0x3fff001c,len:1044\n\nload:0x40078000,len:10124\n\nload:0x40080400,len:5828\n\nentryÂ 0x400806a8\n\nbootÂ num:Â 3\n\nWakeupÂ causedÂ byÂ timer\n\netsÂ JunÂ Â 8Â 2016Â 00:22:57\n\n  \n\nrst:0x5Â (DEEPSLEEP\\_RESET),boot:0x17Â (SPI\\_FAST\\_FLASH\\_BOOT)\n\nconfigsip:Â 0,Â SPIWP:0xee\n\nclk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00\n\nmode:DIO,Â clockÂ div:2\n\nload:0x3fff0018,len:4\n\nload:0x3fff001c,len:1044\n\nload:0x40078000,len:10124\n\nload:0x40080400,len:5828\n\nentryÂ 0x400806a8\n\nbootÂ num:Â 4\n\nWakeupÂ causedÂ byÂ timer\n\netsÂ JunÂ Â 8Â 2016Â 00:22:57<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<hr>\n<h2 id=\"ï¼’-è§¸æ‘¸å–šé†’å¯¦é©—\"><a href=\"#ï¼’-è§¸æ‘¸å–šé†’å¯¦é©—\" class=\"headerlink\" title=\"ï¼’.è§¸æ‘¸å–šé†’å¯¦é©—\"></a>ï¼’.è§¸æ‘¸å–šé†’å¯¦é©—</h2><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/4527766207386106731#\"><img src=\"https://i0.wp.com/randomnerdtutorials.com/wp-content/uploads/2019/02/Zero_Touch_Wake_Up_bb.png?w=858&quality=100&strip=all&ssl=1\"></a></p>\n<p>å¾Œä¾†æˆ‘ç™¼ç¾ä¾†åœ¨Arduino IDEè£¡åˆ‡æ›åˆ°ESP32çš„æ¨¡å¼ä¸‹ï¼Œç¯„ä¾‹è£¡å°±æœ‰DEEP SLEEPçš„ç¯„ä¾‹å¯ç”¨</p>\n<p>å°‡ç¯„ä¾‹è¼‰å…¥å¾Œï¼Œä¸Šå‚³ã€‚</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/4527766207386106731#\"><img src=\"https://1.bp.blogspot.com/-3tHh0qOHWtA/YNFMzOX5NfI/AAAAAAAAeVY/oDALi3RFu_43L-nOaPyxfx28RiB_6ypmwCNcBGAsYHQ/w603-h647/1.jpg\"></a></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">\n#define Threshold 40 \n\nRTC_DATA_ATTRÂ intÂ bootCountÂ &#x3D;Â 0;\n\ntouch_pad_tÂ touchPin;\n\n\nvoidÂ print_wakeup_reason()&#123;\n\nÂ Â esp_sleep_wakeup_cause_tÂ wakeup_reason;\n\nÂ Â wakeup_reasonÂ &#x3D;Â esp_sleep_get_wakeup_cause();\nÂ Â switch(wakeup_reason)\nÂ Â &#123;\n\nÂ Â Â Â caseÂ ESP_SLEEP_WAKEUP_EXT0Â :Â Serial.println(&quot;WakeupÂ causedÂ byÂ externalÂ signalÂ usingÂ RTC_IO&quot;);Â break;\n\nÂ Â Â Â caseÂ ESP_SLEEP_WAKEUP_EXT1Â :Â Serial.println(&quot;WakeupÂ causedÂ byÂ externalÂ signalÂ usingÂ RTC_CNTL&quot;);Â break;\n\nÂ Â Â Â caseÂ ESP_SLEEP_WAKEUP_TIMERÂ :Â Serial.println(&quot;WakeupÂ causedÂ byÂ timer&quot;);Â break;\n\nÂ Â Â Â caseÂ ESP_SLEEP_WAKEUP_TOUCHPADÂ :Â Serial.println(&quot;WakeupÂ causedÂ byÂ touchpad&quot;);Â break;\n\nÂ Â Â Â caseÂ ESP_SLEEP_WAKEUP_ULPÂ :Â Serial.println(&quot;WakeupÂ causedÂ byÂ ULPÂ program&quot;);Â break;\n\nÂ Â Â Â defaultÂ :Â Serial.printf(&quot;WakeupÂ wasÂ notÂ causedÂ byÂ deepÂ sleep:Â %d\\\\n&quot;,wakeup_reason);Â break;\nÂ Â &#125;\n\n&#125;\n\n  \nvoidÂ print_wakeup_touchpad()&#123;\n\nÂ Â touchPinÂ &#x3D;Â esp_sleep_get_touchpad_wakeup_status();\n\nÂ Â switch(touchPin)\n\nÂ Â &#123;\n\nÂ Â Â Â caseÂ 0Â Â :Â Serial.println(&quot;TouchÂ detectedÂ onÂ GPIOÂ 4&quot;);Â break;\n\nÂ Â Â Â caseÂ 1Â Â :Â Serial.println(&quot;TouchÂ detectedÂ onÂ GPIOÂ 0&quot;);Â break;\n\nÂ Â Â Â caseÂ 2Â Â :Â Serial.println(&quot;TouchÂ detectedÂ onÂ GPIOÂ 2&quot;);Â break;\n\nÂ Â Â Â caseÂ 3Â Â :Â Serial.println(&quot;TouchÂ detectedÂ onÂ GPIOÂ 15&quot;);Â break;\n\nÂ Â Â Â caseÂ 4Â Â :Â Serial.println(&quot;TouchÂ detectedÂ onÂ GPIOÂ 13&quot;);Â break;\n\nÂ Â Â Â caseÂ 5Â Â :Â Serial.println(&quot;TouchÂ detectedÂ onÂ GPIOÂ 12&quot;);Â break;\n\nÂ Â Â Â caseÂ 6Â Â :Â Serial.println(&quot;TouchÂ detectedÂ onÂ GPIOÂ 14&quot;);Â break;\n\nÂ Â Â Â caseÂ 7Â Â :Â Serial.println(&quot;TouchÂ detectedÂ onÂ GPIOÂ 27&quot;);Â break;\n\nÂ Â Â Â caseÂ 8Â Â :Â Serial.println(&quot;TouchÂ detectedÂ onÂ GPIOÂ 33&quot;);Â break;\n\nÂ Â Â Â caseÂ 9Â Â :Â Serial.println(&quot;TouchÂ detectedÂ onÂ GPIOÂ 32&quot;);Â break;\n\nÂ Â Â Â defaultÂ :Â Serial.println(&quot;WakeupÂ notÂ byÂ touchpad&quot;);Â break;\n\nÂ Â &#125;\n\n&#125;\n\nvoidÂ callback()&#123;\n\n&#125;\n\nvoidÂ setup()&#123;\nÂ Â Serial.begin(115200)\nÂ Â delay(1000);Â \n\nÂ Â ++bootCount;\nÂ Â Serial.println(&quot;BootÂ number:Â &quot;Â +Â String(bootCount));\n\nÂ Â print_wakeup_reason();\nÂ Â print_wakeup_touchpad();\n\nÂ Â touchAttachInterrupt(T4,Â callback,Â Threshold);\n\nÂ Â esp_sleep_enable_touchpad_wakeup();\n\nÂ Â Serial.println(&quot;GoingÂ toÂ sleepÂ now&quot;);\n\nÂ Â esp_deep_sleep_start();\n\nÂ Â Serial.println(&quot;ThisÂ willÂ neverÂ beÂ printed&quot;);\n\n&#125;\n\nvoidÂ loop()&#123;\n\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>ç¨‹å¼ç¢¼è£¡é¢é€™å€‹æ˜¯çµ¦äºˆè§¸æ‘¸è§¸ç™¼çš„å€¼</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#define Threshold   40<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>ç•¶åœ¨è§¸æ‘¸å¼•è…³ä¸Šè®€å–çš„å€¼ä½æ–¼ Threshold è®Šé‡ä¸Šè¨­ç½®çš„å€¼æ™‚ï¼ŒESP32 å–šé†’ä¸¦åŸ·è¡Œå›èª¿å‡½æ•¸ã€‚<br>Callback() å‡½æ•¸åªæœ‰åœ¨ ESP32 è™•æ–¼å–šé†’ç‹€æ…‹æ™‚æ‰æœƒåŸ·è¡Œã€‚</p>\n<p>æ‰€ä»¥å¦‚æœæ˜¯åœ¨å–šé†’çš„ç‹€æ…‹ä¸‹å£“è‘—è§¸æ‘¸è…³ä¸æ”¾é–‹ï¼Œä¸¦ä¸æœƒåŸ·è¡Œcallback()å›èª¿ã€‚</p>\n<p>å¦‚æœæ˜¯åœ¨ç¡çœ ç‹€æ…‹ä¸‹ç¢°äº†ä¸€ä¸‹å¼•è…³é¦¬ä¸Šæ”¾é–‹ï¼Œé€™æ¨£ä¹Ÿä¸æœƒåŸ·è¡Œcallback()å›èª¿ã€‚</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">touchAttachInterrupt(T3, callback, Threshold); <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>callback() å‡½æ•¸æ˜¯ç©ºçš„</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">void  callback()&#123;   &#x2F;&#x2F;placeholder callback function   &#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>æ¥ä¸‹ä¾†ï¼Œä½¿ç”¨ esp_sleep_enable_touchpad_wakeup() å‡½æ•¸å°‡è§¸æ‘¸å¼•è…³è¨­ç½®ç‚ºå–šé†’æºã€‚</p>\n<p>esp_sleep_enable_touchpad_wakeup()</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/4527766207386106731#\"><img src=\"https://lh3.googleusercontent.com/-gTuSGE2uzFA/YNFSKM2L1WI/AAAAAAAAeVg/mSIR56s4R8QZhOw7ylC3CoBbSPiYcyoygCNcBGAsYHQ/s1600/1624330763119130-0.png\"></a> </p>\n<hr>\n<h2 id=\"3-å¤–éƒ¨å–šé†’-ext0\"><a href=\"#3-å¤–éƒ¨å–šé†’-ext0\" class=\"headerlink\" title=\"3.å¤–éƒ¨å–šé†’ (ext0)\"></a>3.å¤–éƒ¨å–šé†’ (ext0)</h2><p>è¦ä½¿ç”¨æ­¤å–šé†’ï¼Œè«‹ä½¿ç”¨ä»¥ä¸‹å‡½æ•¸ï¼š  </p>\n<p>Esp_sleep_enable_ext0_wakeupï¼ˆGPIO_NUM_Xï¼Œlevelï¼‰<br>æ­¤å‡½æ•¸æ¥å—æ‚¨è¦ä½¿ç”¨çš„å¼•è…³ä½œç‚ºç¬¬ä¸€å€‹åƒæ•¸ï¼Œæ ¼å¼ç‚º GPIO_NUM_Xï¼Œå…¶ä¸­ X è¡¨ç¤ºè©²å¼•è…³çš„ GPIO ç·¨è™Ÿã€‚  </p>\n<p>ç¬¬äºŒå€‹åƒæ•¸ level å¯ä»¥æ˜¯ 1 æˆ– 0ã€‚é€™è¡¨ç¤ºå°‡è§¸ç™¼å–šé†’çš„ GPIO ç‹€æ…‹ã€‚</p>\n<p>æ³¨æ„ï¼šä½¿ç”¨æ­¤å–šé†’ï¼Œåªèƒ½ä½¿ç”¨ RTC GPIO å¼•è…³ã€‚</p>\n<blockquote>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/4527766207386106731#\"><img src=\"https://i1.wp.com/randomnerdtutorials.com/wp-content/uploads/2019/02/external_wake_up_button_bb.png?w=1134&quality=100&strip=all&ssl=1\"></a></p>\n</blockquote>\n<p><strong>å¯ä»¥åœ¨ç¯„ä¾‹è£¡è¼‰å…¥å¦‚ä¸‹ç¨‹å¼ç¢¼</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/4527766207386106731#\"><img src=\"https://1.bp.blogspot.com/-E9SwEIStzFc/YNKgrFbR7fI/AAAAAAAAeVo/OtrrY-gkN-QraG7XaiuSA6VUX-pik6F2wCNcBGAsYHQ/w655-h549/2.jpg\"></a></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">&gt; &#x2F;*\n&gt; \n&gt; DeepÂ SleepÂ withÂ ExternalÂ WakeÂ Up\n&gt; \n&gt; &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n&gt; \n&gt; ThisÂ codeÂ displaysÂ howÂ toÂ useÂ deepÂ sleepÂ with\n&gt; \n&gt; anÂ externalÂ triggerÂ asÂ aÂ wakeÂ upÂ sourceÂ andÂ how\n&gt; \n&gt; toÂ storeÂ dataÂ inÂ RTCÂ memoryÂ toÂ useÂ itÂ overÂ reboots\n&gt; \n&gt;   \n&gt; \n&gt; ThisÂ codeÂ isÂ underÂ PublicÂ DomainÂ License.\n&gt; \n&gt; \n&gt; HardwareÂ Connections\n&gt; \n&gt; &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n&gt; \n&gt; PushÂ ButtonÂ toÂ GPIOÂ 33Â pulledÂ downÂ withÂ aÂ 10KÂ Ohm\n&gt; \n&gt; resistor\n&gt;\n&gt; \n&gt; NOTE:\n&gt; \n&gt; &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n&gt; \n&gt; OnlyÂ RTCÂ IOÂ canÂ beÂ usedÂ asÂ aÂ sourceÂ forÂ externalÂ wake\n&gt; \n&gt; source.Â TheyÂ areÂ pins:Â 0,2,4,12-15,25-27,32-39.\n&gt; \n&gt; \n&gt; Author:\n&gt; \n&gt; PranavÂ CherukupalliÂ &lt;cherukupallip@gmail.com&gt;\n&gt; \n&gt; *&#x2F;\n&gt; \n&gt; \n&gt; #define BUTTON_PIN_BITMASK 0x200000000Â &#x2F;&#x2F;Â 2^33Â inÂ hex\n&gt; \n&gt;   \n&gt; \n&gt; RTC_DATA_ATTRÂ intÂ bootCountÂ &#x3D;Â 0;\n&gt;\n&gt; \n&gt; &#x2F;*\n&gt; \n&gt; MethodÂ toÂ printÂ theÂ reasonÂ byÂ whichÂ ESP32\n&gt; \n&gt; hasÂ beenÂ awakenÂ fromÂ sleep\n&gt; \n&gt; *&#x2F;\n&gt; \n&gt; voidÂ print_wakeup_reason()&#123;\n&gt; \n&gt; Â Â esp_sleep_wakeup_cause_tÂ wakeup_reason;\n&gt;\n&gt; \n&gt; Â Â wakeup_reasonÂ &#x3D;Â esp_sleep_get_wakeup_cause();\n&gt; \n&gt; \n&gt; Â Â switch(wakeup_reason)\n&gt; \n&gt; Â Â &#123;\n&gt; \n&gt; Â Â Â Â caseÂ ESP_SLEEP_WAKEUP_EXT0Â :Â Serial.println(&quot;WakeupÂ causedÂ byÂ externalÂ signalÂ usingÂ RTC_IO&quot;);Â break;\n&gt; \n&gt; Â Â Â Â caseÂ ESP_SLEEP_WAKEUP_EXT1Â :Â Serial.println(&quot;WakeupÂ causedÂ byÂ externalÂ signalÂ usingÂ RTC_CNTL&quot;);Â break;\n&gt; \n&gt; Â Â Â Â caseÂ ESP_SLEEP_WAKEUP_TIMERÂ :Â Serial.println(&quot;WakeupÂ causedÂ byÂ timer&quot;);Â break;\n&gt; \n&gt; Â Â Â Â caseÂ ESP_SLEEP_WAKEUP_TOUCHPADÂ :Â Serial.println(&quot;WakeupÂ causedÂ byÂ touchpad&quot;);Â break;\n&gt; \n&gt; Â Â Â Â caseÂ ESP_SLEEP_WAKEUP_ULPÂ :Â Serial.println(&quot;WakeupÂ causedÂ byÂ ULPÂ program&quot;);Â break;\n&gt; \n&gt; Â Â Â Â defaultÂ :Â Serial.printf(&quot;WakeupÂ wasÂ notÂ causedÂ byÂ deepÂ sleep:Â %d\\\\n&quot;,wakeup_reason);Â break;\n&gt; \n&gt; Â Â &#125;\n&gt; \n&gt; &#125;\n&gt; \n&gt;   \n&gt; \n&gt; voidÂ setup()&#123;\n&gt; \n&gt; Â Â Serial.begin(115200);\n&gt; \n&gt; Â Â delay(1000);Â &#x2F;&#x2F;TakeÂ someÂ timeÂ toÂ openÂ upÂ theÂ SerialÂ Monitor\n&gt; \n&gt; \n&gt; Â Â &#x2F;&#x2F;IncrementÂ bootÂ numberÂ andÂ printÂ itÂ everyÂ reboot\n&gt; \n&gt; Â Â ++bootCount;\n&gt; \n&gt; Â Â Serial.println(&quot;BootÂ number:Â &quot;Â +Â String(bootCount));\n&gt; \n&gt;   \n&gt; Â Â &#x2F;&#x2F;PrintÂ theÂ wakeupÂ reasonÂ forÂ ESP32\n&gt; \n&gt; Â Â print_wakeup_reason();\n&gt; \n&gt;  \n&gt; Â Â &#x2F;*\n&gt; \n&gt; Â Â FirstÂ weÂ configureÂ theÂ wakeÂ upÂ source\n&gt; \n&gt; Â Â WeÂ setÂ ourÂ ESP32Â toÂ wakeÂ upÂ forÂ anÂ externalÂ trigger.\n&gt; \n&gt; Â Â ThereÂ areÂ twoÂ typesÂ forÂ ESP32,Â ext0Â andÂ ext1Â .\n&gt; \n&gt; Â Â ext0Â usesÂ RTC_IOÂ toÂ wakeupÂ thusÂ requiresÂ RTCÂ peripherals\n&gt; \n&gt; Â Â toÂ beÂ onÂ whileÂ ext1Â usesÂ RTCÂ ControllerÂ soÂ doesntÂ need\n&gt; \n&gt; Â Â peripheralsÂ toÂ beÂ poweredÂ on.\n&gt; \n&gt; Â Â NoteÂ thatÂ usingÂ internalÂ pullups&#x2F;pulldownsÂ alsoÂ requires\n&gt; \n&gt; Â Â RTCÂ peripheralsÂ toÂ beÂ turnedÂ on.\n&gt; \n&gt; Â Â *&#x2F;\n&gt; \n&gt; Â Â esp_sleep_enable_ext0_wakeup(GPIO_NUM_33,1);Â &#x2F;&#x2F;1Â &#x3D;Â High,Â 0Â &#x3D;Â Low\n&gt; \n&gt;   \n&gt; \n&gt; Â Â &#x2F;&#x2F;IfÂ youÂ wereÂ toÂ useÂ ext1,Â youÂ wouldÂ useÂ itÂ like\n&gt; \n&gt; Â Â &#x2F;&#x2F;esp_sleep_enable_ext1_wakeup(BUTTON_PIN_BITMASK,ESP_EXT1_WAKEUP_ANY_HIGH);\n&gt; \n&gt;   \n&gt; \n&gt; Â Â &#x2F;&#x2F;GoÂ toÂ sleepÂ now\n&gt; \n&gt; Â Â Serial.println(&quot;GoingÂ toÂ sleepÂ now&quot;);\n&gt; \n&gt; Â Â esp_deep_sleep_start();\n&gt; \n&gt; Â Â Serial.println(&quot;ThisÂ willÂ neverÂ beÂ printed&quot;);\n&gt; \n&gt; &#125;\n&gt; \n&gt;   \n&gt; \n&gt; voidÂ loop()&#123;\n&gt; \n&gt; Â Â &#x2F;&#x2F;ThisÂ isÂ notÂ goingÂ toÂ beÂ called\n&gt; \n&gt; &#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<blockquote>\n<p>åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨äº†åœ¨ä»£ç¢¼é–‹é ­å®šç¾©çš„è®Šé‡ BUTTON_PIN_BITMASKï¼š</p>\n</blockquote>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#define   BUTTON\\_PIN\\_BITMASK   0x200000000 &#x2F;&#x2F; 2^33 in hex<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>æŒ‰éˆ•é€£æ¥åˆ° GPIO 33ã€‚è¦ç²å– GPIO 33 çš„åå…­é€²ä½ç¢¼ï¼š  </p>\n<p>è¨ˆç®— 2çš„33æ¬¡æ–¹,æ‡‰è©²å¾—åˆ° 8589934592,å°‡è©²æ•¸å­— (8589934592) è½‰æ›ç‚ºåå…­é€²åˆ¶ã€‚æ‚¨å¯ä»¥è½‰åˆ°æ­¤è½‰æ›å™¨ä¾†åŸ·è¡Œæ­¤æ“ä½œã€‚</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">esp_sleep_enable_ext0_wakeup(GPIO_NUM_33,1);   &#x2F;&#x2F;1 &#x3D; High, 0 &#x3D; Low<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>ï¼ƒå¯ä»¥ä½¿ç”¨ä»»ä½•å…¶ä»– RTC GPIO å¼•è…³ä¾†ä»£æ›¿ GPIO 33</p>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/twRIlLu60Y0\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n<hr>\n<h2 id=\"4-å¤–éƒ¨å–šé†’-ext1\"><a href=\"#4-å¤–éƒ¨å–šé†’-ext1\" class=\"headerlink\" title=\"4.å¤–éƒ¨å–šé†’ (ext1)\"></a>4.å¤–éƒ¨å–šé†’ (ext1)</h2><p>åœ¨é€™è£¡ä¸ä½¿ç”¨esp_sleep_enable_ext0_wakeup()ï¼Œè€Œæ˜¯ä½¿ç”¨</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">esp_sleep_enable_ext1_wakeup()\n&#96;&#96;&#96;c#\n&#x2F;*\n\nDeepÂ SleepÂ withÂ ExternalÂ WakeÂ Up\n\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n\nThisÂ codeÂ displaysÂ howÂ toÂ useÂ deepÂ sleepÂ with\n\nanÂ externalÂ triggerÂ asÂ aÂ wakeÂ upÂ sourceÂ andÂ how\n\ntoÂ storeÂ dataÂ inÂ RTCÂ memoryÂ toÂ useÂ itÂ overÂ reboots\n\n  \n\nThisÂ codeÂ isÂ underÂ PublicÂ DomainÂ License.\n\n  \n\nHardwareÂ Connections\n\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n\nPushÂ ButtonÂ toÂ GPIOÂ 33Â pulledÂ downÂ withÂ aÂ 10KÂ Ohm\n\nresistor\n\n  \n\nNOTE:\n\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\n\nOnlyÂ RTCÂ IOÂ canÂ beÂ usedÂ asÂ aÂ sourceÂ forÂ externalÂ wake\n\nsource.Â TheyÂ areÂ pins:Â 0,2,4,12-15,25-27,32-39.\n\n  \n\nAuthor:\n\nPranavÂ CherukupalliÂ &lt;cherukupallip@gmail.com&gt;\n\n*&#x2F;\n\n#define BUTTON_PIN_BITMASK 0x8004Â &#x2F;&#x2F;Â GPIOsÂ 2Â andÂ 15\n\nRTC_DATA_ATTRÂ intÂ bootCountÂ &#x3D;Â 0;\n\n&#x2F;*\n\nMethodÂ toÂ printÂ theÂ reasonÂ byÂ whichÂ ESP32\n\nhasÂ beenÂ awakenÂ fromÂ sleep\n\n*&#x2F;\n\nvoidÂ print_wakeup_reason()&#123;\n\nÂ Â esp_sleep_wakeup_cause_tÂ wakeup_reason;\n\nÂ Â wakeup_reasonÂ &#x3D;Â esp_sleep_get_wakeup_cause();\n\nÂ Â switch(wakeup_reason)\n\nÂ Â &#123;\n\nÂ Â Â Â caseÂ ESP_SLEEP_WAKEUP_EXT0Â :Â Serial.println(&quot;WakeupÂ causedÂ byÂ externalÂ signalÂ usingÂ RTC_IO&quot;);Â break;\n\nÂ Â Â Â caseÂ ESP_SLEEP_WAKEUP_EXT1Â :Â Serial.println(&quot;WakeupÂ causedÂ byÂ externalÂ signalÂ usingÂ RTC_CNTL&quot;);Â break;\n\nÂ Â Â Â caseÂ ESP_SLEEP_WAKEUP_TIMERÂ :Â Serial.println(&quot;WakeupÂ causedÂ byÂ timer&quot;);Â break;\n\nÂ Â Â Â caseÂ ESP_SLEEP_WAKEUP_TOUCHPADÂ :Â Serial.println(&quot;WakeupÂ causedÂ byÂ touchpad&quot;);Â break;\n\nÂ Â Â Â caseÂ ESP_SLEEP_WAKEUP_ULPÂ :Â Serial.println(&quot;WakeupÂ causedÂ byÂ ULPÂ program&quot;);Â break;\n\nÂ Â Â Â defaultÂ :Â Serial.printf(&quot;WakeupÂ wasÂ notÂ causedÂ byÂ deepÂ sleep:Â %d\\\\n&quot;,wakeup_reason);Â break;\n\nÂ Â &#125;\n\n&#125;\n\n&#x2F;*\n\nMethodÂ toÂ printÂ theÂ GPIOÂ thatÂ triggeredÂ theÂ wakeup\n\n*&#x2F;\n\nvoidÂ print_GPIO_wake_up()&#123;\n\nÂ Â uint64_tÂ GPIO_reasonÂ &#x3D;Â esp_sleep_get_ext1_wakeup_status();\n\nÂ Â Serial.print(&quot;GPIOÂ thatÂ triggeredÂ theÂ wakeÂ up:Â GPIOÂ &quot;);\n\nÂ Â Serial.println((log(GPIO_reason))&#x2F;log(2),Â 0);\n\n&#125;\n\nvoidÂ setup()&#123;\n\nÂ Â Serial.begin(115200);\n\nÂ Â delay(1000);Â &#x2F;&#x2F;TakeÂ someÂ timeÂ toÂ openÂ upÂ theÂ SerialÂ Monitor\n\n  \n\nÂ Â &#x2F;&#x2F;IncrementÂ bootÂ numberÂ andÂ printÂ itÂ everyÂ reboot\n\nÂ Â ++bootCount;\n\nÂ Â Serial.println(&quot;BootÂ number:Â &quot;Â +Â String(bootCount));\n\n  \n\nÂ Â &#x2F;&#x2F;PrintÂ theÂ wakeupÂ reasonÂ forÂ ESP32\n\nÂ Â print_wakeup_reason();\n  \n\nÂ Â &#x2F;&#x2F;PrintÂ theÂ GPIOÂ usedÂ toÂ wakeÂ up\n\nÂ Â print\\_GPIO\\_wake_up();\n\n\nÂ Â &#x2F;*\n\nÂ Â FirstÂ weÂ configureÂ theÂ wakeÂ upÂ source\n\nÂ Â WeÂ setÂ ourÂ ESP32Â toÂ wakeÂ upÂ forÂ anÂ externalÂ trigger.\n\nÂ Â ThereÂ areÂ twoÂ typesÂ forÂ ESP32,Â ext0Â andÂ ext1Â .\n\nÂ Â ext0Â usesÂ RTC_IOÂ toÂ wakeupÂ thusÂ requiresÂ RTCÂ peripherals\n\nÂ Â toÂ beÂ onÂ whileÂ ext1Â usesÂ RTCÂ ControllerÂ soÂ doesntÂ need\n\nÂ Â peripheralsÂ toÂ beÂ poweredÂ on.\n\nÂ Â NoteÂ thatÂ usingÂ internalÂ pullups&#x2F;pulldownsÂ alsoÂ requires\n\nÂ Â RTCÂ peripheralsÂ toÂ beÂ turnedÂ on.\n\nÂ Â *&#x2F;\n\nÂ Â &#x2F;&#x2F;esp_deep_sleep_enable_ext0_wakeup(GPIO\\_NUM_15,1);Â &#x2F;&#x2F;1Â &#x3D;Â High,Â 0Â &#x3D;Â Low\n\n  \n\nÂ Â &#x2F;&#x2F;IfÂ youÂ wereÂ toÂ useÂ ext1,Â youÂ wouldÂ useÂ itÂ like\n\nÂ Â esp_sleep_enable_ext1_wakeup(BUTTON_PIN_BITMASK,ESP_EXT1_WAKEUP_ANY_HIGH);\n\nÂ Â &#x2F;&#x2F;GoÂ toÂ sleepÂ now\n\nÂ Â Serial.println(&quot;GoingÂ toÂ sleepÂ now&quot;);\n\nÂ Â delay(1000);\n\nÂ Â esp_deep_sleep_start();\n\nÂ Â Serial.println(&quot;ThisÂ willÂ neverÂ beÂ printed&quot;);\n\n&#125;\n\n  \n\nvoidÂ loop()&#123;\n\nÂ Â &#x2F;&#x2F;ThisÂ isÂ notÂ goingÂ toÂ beÂ called\n\n&#125;\n\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>0x8004æ€éº¼ä¾†çš„?</strong></p>\n<p>è¨ˆç®— 2^2 + 2^15ã€‚ä½ æ‡‰è©²å¾—åˆ° 32772</p>\n<p>å°‡è©²æ•¸å­—è½‰æ›ç‚ºåå…­é€²åˆ¶ã€‚ä½ æ‡‰è©²å¾—åˆ°ï¼š8004</p>\n<p>åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨äº†åœ¨ä»£ç¢¼é–‹é ­å®šç¾©çš„è®Šé‡Â BUTTON_PIN_BITMASK</p>\n<pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">BUTTON_PIN_BITMASK</span>   <span class=\"token expression\"><span class=\"token number\">0x8004</span></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>ç•¶æ‚¨ä½¿ç”¨å¤šå€‹å¼•è…³ä¾†å–šé†’ ESP32 æ™‚ï¼ŒçŸ¥é“æ˜¯å“ªå€‹å¼•è…³å¼•èµ·äº†å–šé†’æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ç‚ºæ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹åŠŸèƒ½ï¼š</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">esp_sleep_get_ext1_wakeup_status()<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>è©²å‡½æ•¸è¿”å›ä¸€å€‹åŸºæ•¸2ï¼Œèˆ‡GPIOè™Ÿç¢¼ä½œç‚ºæŒ‡æ•¸ï¼š2 ^ï¼ˆGPIO_NUMBERï¼‰ã€‚å› æ­¤ï¼Œåœ¨å°æ•¸å¾—åˆ°GPIOï¼Œä½ éœ€è¦åšä»¥ä¸‹è¨ˆç®—ï¼š</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">GPIO &#x3D; log(GPIO_NUMBER)&#x2F;log(2)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>å…¶å®ƒç¨‹å¼ç¢¼å¦‚åŒå‰é¢è©¦é©—</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/4527766207386106731#\"><img src=\"https://i1.wp.com/randomnerdtutorials.com/wp-content/uploads/2019/02/external_wake_up_2buttons_bb.png?w=984&quality=100&strip=all&ssl=1\"></a></p>\n<p><strong>å°‡ç¨‹å¼ç¢¼ä¸Šå‚³å¾Œå¯ä»¥çœ‹åˆ°æŒ‰å£“å“ªå€‹GPIOæœƒé¡¯ç¤ºåœ¨ç›£æ¸¬çª—å£</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/4527766207386106731#\"><img src=\"https://1.bp.blogspot.com/-YanqfR__Opo/YNWKA45FOQI/AAAAAAAAeWE/pkp3y8n5qa8WHrloC2ZCECaWWHN5kTwuACNcBGAsYHQ/w674-h314/1.jpg\"></a></p>\n","categories":["esp32"],"tags":["deep sleep"]},{"title":"ç¶²é æ§åˆ¶LEDç‡ˆ-ESP32","url":"/2021/08/29/%E7%B6%B2%E9%A0%81%E6%8E%A7%E5%88%B6LED%E7%87%88-ESP32/","content":"<h1 id=\"ç¶²é æ§åˆ¶LEDç‡ˆ-ESP32\"><a href=\"#ç¶²é æ§åˆ¶LEDç‡ˆ-ESP32\" class=\"headerlink\" title=\"ç¶²é æ§åˆ¶LEDç‡ˆ-ESP32\"></a>ç¶²é æ§åˆ¶LEDç‡ˆ-ESP32</h1><h6 id=\"tags-esp32\"><a href=\"#tags-esp32\" class=\"headerlink\" title=\"tags: esp32\"></a>tags: <code>esp32</code></h6><h2 id=\"å…ˆä¸Šç¨‹å¼ç¢¼\"><a href=\"#å…ˆä¸Šç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"å…ˆä¸Šç¨‹å¼ç¢¼\"></a>å…ˆä¸Šç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;WiFi.h&gt;\n\nconst char* ssid&#x3D;&quot;åŸºåœ°å°åç¨±&quot;;\nconst char* password&#x3D;&quot;åŸºåœ°å°å¯†ç¢¼&quot;;\n\nWiFiServer server(80);\n\nString header;\n\nString output2&#x3D;&quot;off&quot;;\nconst int output&#x3D;2;\nunsigned long currentTime&#x3D;millis();\nunsigned long previousTime&#x3D;0;\nvoid setup()&#123;\n  pinMode(output, OUTPUT);\n  digitalWrite(output, LOW);\n  WiFi.begin(ssid, password);\n  Serial.begin(115200);\n  while (WiFi.status() !&#x3D; WL_CONNECTED)\n  &#123;\n    delay(500);\n    Serial.print(&quot;.&quot;);\n  &#125;\n  Serial.println(&quot;å·²é€£ç·šåˆ°åŸºåœ°å°&quot;);\n  Serial.print(&quot;åŸºåœ°å°åç¨±: &quot;);\n  Serial.println(ssid);\n  Serial.println(WiFi.localIP());\n  server.begin();\n&#125;\n\nvoid loop()&#123;\n  WiFiClient client&#x3D;server.available();\n  if (client)&#123;\n    currentTime&#x3D;millis();\n    previousTime&#x3D;currentTime;\n    Serial.println(&quot;æ–°çš„å®¢æˆ¶ç«¯&quot;);\n    String currentLine&#x3D;&quot;&quot;;\n    while (client.connected()&amp;&amp;currentTime-previousTime&lt;&#x3D;2000)\n    &#123;\n      currentTime&#x3D;millis();\n      if (client.available())&#123;\n        char c&#x3D;client.read();\n        Serial.write(c);\n        header+&#x3D;c;\n        if (c&#x3D;&#x3D;&#39;\\n&#39;)&#123;\n          if (currentLine.length()&#x3D;&#x3D;0)&#123;\n            client.println(&quot;HTTP&#x2F;1.1 200 OK&quot;);\n            client.println(&quot;Content-type:text&#x2F;html&quot;);\n            client.println(&quot;Connection: close&quot;);\n            client.println();\n            if (header.indexOf(&quot;GET &#x2F;2&#x2F;on&quot;)&gt;&#x3D;0)&#123;\n              Serial.println(&quot;on&quot;);\n              output2&#x3D;&quot;on&quot;;\n              digitalWrite(output, HIGH);\n            &#125;else if (header.indexOf(&quot;GET &#x2F;2&#x2F;off&quot;)&gt;&#x3D;0)&#123;\n              Serial.println(&quot;off&quot;);\n              output2&#x3D;&quot;off&quot;;\n              digitalWrite(output, LOW);\n            &#125;\n            client.println(&quot;&lt;!DOCTYPE html&gt;&lt;html&gt;&quot;);\n            client.println(&quot;&lt;style&gt;html &#123;text-align: center;font-family: Arial;display: inline-block;margin: auto;&#125;&quot;);\n            client.println(&quot;.button &#123;background-color: #e0e252; border: none;color: white;padding: 15px 35px;&quot;);\n            client.println(&quot;text-align: center;text-decoration: none;display: inline-block;font-size: 16px;&#125;&quot;);\n            client.println(&quot;.button2 &#123;background-color: #b0b1a2;padding: 15px 32px;&#125;&lt;&#x2F;style&gt;&lt;&#x2F;head&gt;&quot;);\n            \n            client.println(&quot;&lt;body&gt;&lt;h1&gt;ESP32 Web Server&lt;&#x2F;h1&gt;&quot;);\n            \n            client.println(&quot;&lt;p&gt;GPIO-2  &quot;+output2+&quot;&lt;&#x2F;p&gt;&quot;);\n               \n            if (output2&#x3D;&#x3D;&quot;off&quot;) &#123;\n              client.println(&quot;&lt;p&gt;&lt;a href&#x3D;\\&quot;&#x2F;2&#x2F;on\\&quot;&gt;&lt;button class&#x3D;\\&quot;button\\&quot;&gt;ON&lt;&#x2F;button&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;&quot;);\n              client.println(&quot;&lt;p&gt;&lt;a href&#x3D;\\&quot;&#x2F;2&#x2F;off\\&quot;&gt;&lt;button class&#x3D;\\&quot;button button2\\&quot;&gt;OFF&lt;&#x2F;button&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;&quot;);\n            &#125; else if (output2&#x3D;&#x3D;&quot;on&quot;)&#123;\n              client.println(&quot;&lt;p&gt;&lt;a href&#x3D;\\&quot;&#x2F;2&#x2F;on\\&quot;&gt;&lt;button class&#x3D;\\&quot;button button2\\&quot;&gt;ON&lt;&#x2F;button&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;&quot;);\n              client.println(&quot;&lt;p&gt;&lt;a href&#x3D;\\&quot;&#x2F;2&#x2F;off\\&quot;&gt;&lt;button class&#x3D;\\&quot;button\\&quot;&gt;OFF&lt;&#x2F;button&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;&quot;);\n            &#125;\n            client.println(&quot;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;&quot;);\n            client.println();\n            break;\n          &#125;else&#123;\n            currentLine&#x3D;&quot;&quot;;\n          &#125;\n        &#125;\n      &#125;\n    &#125;\n  header&#x3D;&quot;&quot;;\n  client.stop();\n  Serial.println(&quot;Client disconnected.&quot;);\n  Serial.println(&quot;&quot;);\n  &#125;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"è§£æ\"><a href=\"#è§£æ\" class=\"headerlink\" title=\"è§£æ\"></a>è§£æ</h2><p>åŒ¯å…¥WIFIçš„åº«</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;WiFi.h&gt;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>å®šç¾©åŸºåœ°å°åç¨±å’Œå¯†ç¢¼</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">const char* ssid&#x3D;&quot;åŸºåœ°å°åç¨±&quot;;\nconst char* password&#x3D;&quot;åŸºåœ°å°å¯†ç¢¼&quot;;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>å®šç¾©ä¼ºæœå™¨çš„ç«¯å£</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">WiFiServer server(80);<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>å»ºç«‹å­˜æ”¾æ¥æ•¸åˆ°çš„æª”é ­</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">String header;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>ç¶²å€åˆ—é è¨­å…§å»ºLEDç‚ºoff<br>ä¾‹å¦‚:<a href=\"http://localhost/off\">http://localhost/off</a></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">String output2&#x3D;&quot;off&quot;;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>å»ºç«‹LEDè…³ä½,ç´€éŒ„ç•¶ä¸‹æ™‚é–“,å’Œéå»çš„æ™‚é–“</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">const int output&#x3D;2;\nunsigned long currentTime&#x3D;millis();\nunsigned long previousTime&#x3D;0;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>ä¸»è¦æ˜¯å»ºç«‹WiFié€£ç·šåˆ°åŸºåœ°å°çš„åˆå§‹åŒ–<br>åŒ…å«ä¼ºæœç«¯çš„åˆå§‹åŒ–,å¦‚æœé€£ç·šæˆåŠŸå¾Œ,<br>æœƒåœ¨ç›£æ§è¦–çª—ä¸Šé¡¯ç¤ºIP</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">void setup()&#123;\n  pinMode(output, OUTPUT);\n  digitalWrite(output, LOW);\n  WiFi.begin(ssid, password);\n  Serial.begin(115200);\n  while (WiFi.status() !&#x3D; WL_CONNECTED)\n  &#123;\n    delay(500);\n    Serial.print(&quot;.&quot;);\n  &#125;\n  Serial.println(&quot;å·²é€£ç·šåˆ°åŸºåœ°å°&quot;);\n  Serial.print(&quot;åŸºåœ°å°åç¨±: &quot;);\n  Serial.println(ssid);\n  Serial.println(WiFi.localIP());\n  server.begin();\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>åœ¨void loop(){}è£¡é¢<br>å…ˆå»ºç«‹å®¢æœç«¯çš„ç›£è½</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">WiFiClient client&#x3D;server.available();<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>å¦‚æœå®¢æˆ¶ç«¯å’Œä¼ºæœç«¯èƒ½æˆåŠŸå»ºç«‹æºé€š,ä¼ºæœç«¯æœƒä¸€ç›´ç›£è½å®¢æœç«¯æ‰€çµ¦äºˆçš„è«‹æ±‚<br>é€™å€‹è«‹æ±‚æ˜¯ä»¥å­—ä¸²è¢«å­˜å…¥è®Šæ•¸ä¸¦å­˜æ”¾æ–¼å…§,å¦‚æœå¾—åˆ°onå°±å›æ‡‰é–‹ç‡ˆ,å¥³æœå¾—åˆ°off<br>å°±é—œç‡ˆ</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">if (client)&#123;\n    currentTime&#x3D;millis();\n    previousTime&#x3D;currentTime;\n    Serial.println(&quot;æ–°çš„å®¢æˆ¶ç«¯&quot;);\n    String currentLine&#x3D;&quot;&quot;;\n    while (client.connected()&amp;&amp;currentTime-previousTime&lt;&#x3D;2000)\n    &#123;\n      currentTime&#x3D;millis();\n      if (client.available())&#123;\n        char c&#x3D;client.read();\n        Serial.write(c);\n        header+&#x3D;c;\n        if (c&#x3D;&#x3D;&#39;\\n&#39;)&#123;\n          if (currentLine.length()&#x3D;&#x3D;0)&#123;\n            client.println(&quot;HTTP&#x2F;1.1 200 OK&quot;);\n            client.println(&quot;Content-type:text&#x2F;html&quot;);\n            client.println(&quot;Connection: close&quot;);\n            client.println();\n \n            if (header.indexOf(&quot;GET &#x2F;2&#x2F;on&quot;)&gt;&#x3D;0)&#123;\n              Serial.println(&quot;on&quot;);\n              output2&#x3D;&quot;on&quot;;\n              digitalWrite(output, HIGH);\n            &#125;else if (header.indexOf(&quot;GET &#x2F;2&#x2F;off&quot;)&gt;&#x3D;0)&#123;\n              Serial.println(&quot;off&quot;);\n              output2&#x3D;&quot;off&quot;;\n              digitalWrite(output, LOW);\n            &#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>ä»¥ä¸‹æ˜¯html</p>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\">client.println(\"<span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\");\nclient.println(\"<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\"><span class=\"token selector\">html</span> <span class=\"token punctuation\">&#123;</span><span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span><span class=\"token property\">font-family</span><span class=\"token punctuation\">:</span> Arial<span class=\"token punctuation\">;</span><span class=\"token property\">display</span><span class=\"token punctuation\">:</span> inline-block<span class=\"token punctuation\">;</span><span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> auto<span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span>\"<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nclient.<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".button &#123;background-color: #e0e252; border: none;color: white;padding: 15px 35px;\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nclient.<span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text-align: center;text-decoration: none;display: inline-block;font-size: 16px;&#125;\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nclient.<span class=\"token function\">println</span><span class=\"token punctuation\">(</span>\".button2 <span class=\"token punctuation\">&#123;</span><span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #b0b1a2<span class=\"token punctuation\">;</span><span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 15px 32px<span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\");\n\nclient.println(\"<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>ESP32 Web Server<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\");\n\nclient.println(\"<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>GPIO-2  \"+output2+\"<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\");\n   \nif (output2==\"off\") &#123;\n  client.println(\"<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>&lt;a href=\\\"/2/on\\\">&lt;button class=\\\"button\\\">ON<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\");\n  client.println(\"<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>&lt;a href=\\\"/2/off\\\">&lt;button class=\\\"button button2\\\">OFF<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\");\n&#125; else if (output2==\"on\")&#123;\n  client.println(\"<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>&lt;a href=\\\"/2/on\\\">&lt;button class=\\\"button button2\\\">ON<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\");\n  client.println(\"<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>&lt;a href=\\\"/2/off\\\">&lt;button class=\\\"button\\\">OFF<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\");\n&#125;\nclient.println(\"<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span>\");<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>æœ€å¾Œå®Œæˆå›æ‡‰,çµ‚æ­¢å®¢æˆ¶ç«¯å°ä¼ºæœç«¯çš„è«‹æ±‚</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">client.stop();<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h2 id=\"å¯¦é©—çµæœ\"><a href=\"#å¯¦é©—çµæœ\" class=\"headerlink\" title=\"å¯¦é©—çµæœ\"></a>å¯¦é©—çµæœ</h2><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/OmbY4UQ8Kcc\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>","categories":["esp32"],"tags":["webserver"]},{"title":"PIRäººé«”æ„Ÿæ‡‰å™¨","url":"/2021/08/29/PIR%E4%BA%BA%E9%AB%94%E6%84%9F%E6%87%89%E5%99%A8/","content":"<h1 id=\"PIRäººé«”æ„Ÿæ‡‰å™¨\"><a href=\"#PIRäººé«”æ„Ÿæ‡‰å™¨\" class=\"headerlink\" title=\"PIRäººé«”æ„Ÿæ‡‰å™¨\"></a>PIRäººé«”æ„Ÿæ‡‰å™¨</h1><h6 id=\"tags-esp32-PIR-motion\"><a href=\"#tags-esp32-PIR-motion\" class=\"headerlink\" title=\"tags: esp32 PIR_motion\"></a>tags: <code>esp32</code> <code>PIR_motion</code></h6><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5742917802289246193?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-IyjhCgpFA20/YMtNtZbtNII/AAAAAAAAeUI/Yxs-05vGkwQmMKGDMdRG4OWA72p9fYW-ACNcBGAsYHQ/w403-h333/pir-01.jpg\"></a><br>å¯¦é©—èªªæ˜</p>\n<hr>\n<p><em>æ­¤æ¬¡å¯¦é©—ï¼Œä»¥PIRæ„Ÿæ‡‰å™¨æª¢æ¸¬äººé«”é‹å‹•ï¼Œåœ¨é«˜é›»ä½æ™‚ä½¿LEDäº®ï¼Œ</em></p>\n<p><em>åˆ°é”è¨­è£½çš„æ™‚é–“ï¼Œè‡ªå‹•æ»…æ‰ã€‚</em></p>\n<p><em>åŒæ™‚æˆ‘åœ¨é€™å€‹å¯¦é©—è£¡å­¸åˆ°ä¸­æ–·å‡½å¼attachInterrupt()å’Œmills()çš„é‹ç”¨</em></p>\n<p><em>ä¸­æ–·å‡½å¼å¯ä»¥é‹ç”¨åœ¨PIRï¼Œç•¶æª¢æ¸¬åˆ°è®ŠåŒ–ï¼Œä¸­æ–·å‡½å¼æœƒè¢«è§¸ç™¼å»åŸ·è¡Œæ‰€</em></p>\n<p><em>è¨­å®šçš„å‹•ä½œã€‚åŒæ™‚è—‰ç”±mills()æ›¿åŒ–delay()è€Œä¸è‡³æ–¼æ‰€æœ‰çš„éç¨‹éƒ½è¢«delay()</em></p>\n<p><em>æš«åœã€‚</em></p>\n<hr>\n<h2 id=\"æ¥ç·šæ–¹å¼\"><a href=\"#æ¥ç·šæ–¹å¼\" class=\"headerlink\" title=\"æ¥ç·šæ–¹å¼\"></a>æ¥ç·šæ–¹å¼</h2><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5742917802289246193?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-kZQEvtpmUs8/YMtRIIu7vbI/AAAAAAAAeUQ/cap6CtGU6xAU2z7SGzMpPxYlg-pUY5kZQCNcBGAsYHQ/w826-h457/0d48261252092c03a3a44e37cd427709.jpg\"></a></p>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">constÂ intÂ led&#x3D;18;\n\nconstÂ intÂ motionSensor&#x3D;27;\n\nunsignedÂ longÂ oldTime;\n\nboolÂ startTimer&#x3D;false;\n\n\nvoidÂ IRAM_ATTRÂ detectedMotion()&#123;\n\nÂ Â Â Â Serial.println(&quot;detectedÂ motion....&quot;);\n\nÂ Â Â Â digitalWrite(led,Â HIGH);\n\nÂ Â Â Â oldTime&#x3D;millis();\n\nÂ Â Â Â startTimer&#x3D;true;\n\n&#125;\n\nvoidÂ setup()&#123;\n\nÂ Â Â Â Serial.begin(115200);\n\nÂ Â Â Â pinMode(led,Â OUTPUT);\n\nÂ Â Â Â pinMode(motionSensor,Â INPUT_PULLUP);\n\nÂ Â Â Â attachInterrupt(digitalPinToInterrupt(motionSensor),Â detectedMotion,Â RISING);\n\n&#125;\n\nvoidÂ loop()&#123;\n\nÂ Â Â Â unsignedÂ longÂ now&#x3D;millis();\n\nÂ Â Â Â ifÂ (startTimer&amp;&amp;(now-oldTime&gt;5000))&#123;\n\nÂ Â Â Â Â Â Â Â Serial.println(&quot;motionÂ stop!!!&quot;);\n\nÂ Â Â Â Â Â Â Â digitalWrite(led,Â LOW);\n\nÂ Â Â Â Â Â Â Â startTimer&#x3D;false;\nÂ Â Â Â &#125;\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><em>ç‰¹åˆ¥æåˆ°é€™è£¡æœ‰ä¸€å€‹è‡ªå®šç¾©å‡½å¼ï¼Œå®ƒçš„ä½œç”¨æ˜¯ç•¶PIRåµæ¸¬åˆ°å‹•ä½œå¾Œï¼Œå°±æœƒå»åŸ·è¡Œé€™éƒ¨ä»½</em></p>\n<p><em>ä¸¦ä¸”ä½¿startTimeré–‹å§‹ç´€éŒ„åŸ·è¡Œå¾Œçš„æ—¶é–“ã€‚</em></p>\n<p><strong>æ³¨æ„ï¼šIRAM_ATTR ç”¨æ–¼é‹è¡Œ RAM ä¸­çš„ä¸­æ–·ä»£ç¢¼ï¼Œå¦å‰‡ä»£ç¢¼å­˜å„²åœ¨ flash ä¸­ï¼Œé€Ÿåº¦è¼ƒæ…¢ã€‚</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">voidÂ IRAM_ATTRÂ detectedMotion()&#123;\n\nÂ Â Â Â Serial.println(&quot;detectedÂ motion....&quot;);\n\nÂ Â Â Â digitalWrite(led,Â HIGH);\n\nÂ Â Â Â oldTime&#x3D;millis();\n\nÂ Â Â Â startTimer&#x3D;true;\n\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><em>ä¸­æ–·å‡½å¼å¯ä»¥åƒè€ƒ</em>-<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5742917802289246193?hl=zh-TW#\">æˆ‘çš„å‡½å¼ç­†è¨˜æœ¬</a></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">attachInterrupt(digitalPinToInterrupt(motionSensor),Â detectedMotion,Â RISING);<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><em>æ™‚é–“å‡½å¼å¯ä»¥åƒè€ƒ</em>-<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5742917802289246193?hl=zh-TW#\">æˆ‘çš„å‡½å¼ç­†è¨˜æœ¬</a></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">unsignedÂ longÂ now&#x3D;millis();\n\nÂ Â Â Â ifÂ (startTimer&amp;&amp;(now-oldTime&gt;5000))&#123;\n\nÂ Â Â Â Â Â Â Â Serial.println(&quot;motionÂ stop!!!&quot;);\n\nÂ Â Â Â Â Â Â Â digitalWrite(led,Â LOW);\n\nÂ Â Â Â Â Â Â Â startTimer&#x3D;false;\n\nÂ Â Â Â &#125;\n  <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/xQr5rVHvR-k\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>","categories":["esp32"],"tags":["PIR","PIRäººé«”æ„Ÿæ‡‰å™¨"]},{"title":"å‘¼å¸ç‡ˆ-ESP32","url":"/2021/08/29/%E5%91%BC%E5%90%B8%E7%87%88-ESP32/","content":"<h1 id=\"å‘¼å¸ç‡ˆ-ESP32\"><a href=\"#å‘¼å¸ç‡ˆ-ESP32\" class=\"headerlink\" title=\"å‘¼å¸ç‡ˆ-ESP32\"></a>å‘¼å¸ç‡ˆ-ESP32</h1><h2 id=\"æ¥ç·šæ–¹å¼\"><a href=\"#æ¥ç·šæ–¹å¼\" class=\"headerlink\" title=\"æ¥ç·šæ–¹å¼\"></a>æ¥ç·šæ–¹å¼</h2><h6 id=\"tags-esp32\"><a href=\"#tags-esp32\" class=\"headerlink\" title=\"tags: esp32\"></a>tags: <code>esp32</code></h6><ul>\n<li>  <strong>é›»é˜» 10Kæ­å§† x1</strong></li>\n<li>  <strong>LED x1</strong></li>\n</ul>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/632666415205285811?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-o7ZeTZikdPc/YMlLS_bH5VI/AAAAAAAAeT8/p-2FoevUIRQT9z24R3Dfjrq-w-hmE7rgwCNcBGAsYHQ/w594-h373/222251qialhmh1wlko8hz8.jpg\"></a></p>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><p><strong><em>å‡½å¼èªªæ˜è«‹åƒè€ƒ-</em></strong><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/632666415205285811?hl=zh-TW#\">æˆ‘çš„å‡½å¼ç­†è¨˜æœ¬</a></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">voidÂ setup()&#123;\nÂ Â Â Â ledcSetup(0,Â 5000,Â 8);\nÂ Â Â Â ledcAttachPin(25,Â 0);\n&#125;\n\nvoidÂ loop()&#123;\nÂ Â Â Â forÂ (intÂ iÂ &#x3D;Â 0;Â iÂ &lt;&#x3D;255Â ;Â i++)\nÂ Â Â Â &#123;\nÂ Â Â Â Â Â Â Â ledcWrite(0,Â i);\nÂ Â Â Â Â Â Â Â delay(20);\nÂ Â Â Â &#125;\n\nÂ Â Â Â forÂ (intÂ jÂ &#x3D;Â 255;Â jÂ &gt;Â 0;Â j--)\nÂ Â Â Â &#123;\nÂ Â Â Â Â Â Â Â ledcWrite(0,Â j);\nÂ Â Â Â Â Â Â Â delay(20);\nÂ Â Â Â &#125;\nÂ Â Â Â delay(300);\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","categories":["esp32"],"tags":["å‘¼å¸ç‡ˆ"]},{"title":"0.96å‹OLEDåŸºæœ¬é¡¯ç¤º-ESP32","url":"/2021/08/29/0-96%E5%90%8BOLED%E5%9F%BA%E6%9C%AC%E9%A1%AF%E7%A4%BA-ESP32/","content":"<h1 id=\"0-96å‹OLEDåŸºæœ¬é¡¯ç¤º-ESP32\"><a href=\"#0-96å‹OLEDåŸºæœ¬é¡¯ç¤º-ESP32\" class=\"headerlink\" title=\"0.96å‹OLEDåŸºæœ¬é¡¯ç¤º-ESP32\"></a>0.96å‹OLEDåŸºæœ¬é¡¯ç¤º-ESP32</h1><h6 id=\"tags-esp32-oled\"><a href=\"#tags-esp32-oled\" class=\"headerlink\" title=\"tags: esp32 oled\"></a>tags: <code>esp32</code> <code>oled</code></h6><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/6459347446114782211?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-SfRPMdP0feE/YMdKWUgpKzI/AAAAAAAAeTk/DtG0FqRB7hI4Xu0suyprVmf1lSZ2c6BpwCNcBGAsYHQ/s1600/1623673410135139-0.png\"></a></p>\n<h2 id=\"æ¥ç·šæ–¹å¼\"><a href=\"#æ¥ç·šæ–¹å¼\" class=\"headerlink\" title=\"æ¥ç·šæ–¹å¼\"></a>æ¥ç·šæ–¹å¼</h2><p><strong><em>OLED</em></strong>||<strong>ESP32</strong></p>\n<p>-----------------</p>\n<p>VCC----3V3</p>\n<p>GNDâ€”-GND</p>\n<p>SCLâ€”â€“D22</p>\n<p>SDAâ€”-D21</p>\n<h2 id=\"å‡½å¼åƒè€ƒ\"><a href=\"#å‡½å¼åƒè€ƒ\" class=\"headerlink\" title=\"å‡½å¼åƒè€ƒ\"></a>å‡½å¼åƒè€ƒ</h2><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/6459347446114782211?hl=zh-TW#\">æˆ‘çš„å‡½å¼ç­†è¨˜æœ¬</a>  </p>\n<hr>\n<h2 id=\"é ˆä¸‹è¼‰åŠåŒ¯å…¥ä»¥ä¸‹å‡½å¼åº«\"><a href=\"#é ˆä¸‹è¼‰åŠåŒ¯å…¥ä»¥ä¸‹å‡½å¼åº«\" class=\"headerlink\" title=\"é ˆä¸‹è¼‰åŠåŒ¯å…¥ä»¥ä¸‹å‡½å¼åº«\"></a>é ˆä¸‹è¼‰åŠåŒ¯å…¥ä»¥ä¸‹å‡½å¼åº«</h2><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/6459347446114782211?hl=zh-TW#\">Adafruit_SSD1306</a>  </p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/6459347446114782211?hl=zh-TW#\">Adafruit-GFX-Library</a>  </p>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;Adafruit_GFX.h&gt;\n\n#include &lt;Adafruit_SSD1306.h&gt;\n\n#include &lt;Adafruit_GrayOLED.h&gt;\n\n#include &lt;Wire.h&gt;\n\n\n#define SCREEN_WIDTH 128Â &#x2F;&#x2F;Â OLEDÂ displayÂ width,Â inÂ pixels\n\n#define SCREEN_HEIGHT 64Â &#x2F;&#x2F;Â OLEDÂ displayÂ height,Â inÂ pixels\n\n  \n#define OLED_RESET -1Â &#x2F;&#x2F;Â ResetÂ pinÂ #Â (orÂ -1Â ifÂ sharingÂ ArduinoÂ resetÂ pin)\n\n#define SCREEN_ADDRESS 0x3CÂ &#x2F;&#x2F;&#x2F;&lt;Â SeeÂ datasheetÂ forÂ Address;Â 0x3DÂ forÂ 128x64,Â 0x3CÂ forÂ 128x32\n\nAdafruit_SSD1306Â display(SCREEN_WIDTH,Â SCREEN_HEIGHT,Â &amp;Wire,Â OLED_RESET);\n\n\nvoidÂ setup()&#123;\n\nÂ Â Serial.begin(115200);\n\nÂ Â display.begin(SSD1306_SWITCHCAPVCC,Â SCREEN_ADDRESS,Â OLED_RESET);\n\n&#125;\n\n\nvoidÂ loop()&#123;\n\nÂ Â display.clearDisplay();\n\nÂ Â display.setCursor(0,Â 0);\n\nÂ Â display.setTextSize(1);\n\nÂ Â display.setTextColor(BLACK,Â WHITE);\n\nÂ Â display.println(&quot;Hello!&quot;);\n\nÂ Â display.setCursor(0,Â 16);\n\nÂ Â display.setTextSize(2);\n\nÂ Â display.setTextColor(WHITE);\n\nÂ Â display.println(&quot;ESP32&quot;);\n\nÂ Â display.setTextSize(3);\n\nÂ Â display.setCursor(0,Â 32);\n\nÂ Â display.println(&quot;Arduino&quot;);\n\nÂ Â display.display();\n\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<hr>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/6459347446114782211?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-FEjaHLmo_yM/YMdNVhVTE-I/AAAAAAAAeTs/fbsZkMqTyR8UmjWzqETE6Bvx6Hce70NCACNcBGAsYHQ/s1600/1623674195093239-0.png\"></a></p>\n","categories":["esp32"],"tags":["oled"]},{"title":"åˆåšESP32-å¯«å…¥è»”é«”","url":"/2021/08/29/%E5%88%9D%E5%9A%90ESP32-%E5%AF%AB%E5%85%A5%E8%BB%94%E9%AB%94/","content":"<h1 id=\"åˆåšESP32â€”å¯«å…¥è»”é«”\"><a href=\"#åˆåšESP32â€”å¯«å…¥è»”é«”\" class=\"headerlink\" title=\"åˆåšESP32â€”å¯«å…¥è»”é«”\"></a>åˆåšESP32â€”å¯«å…¥è»”é«”</h1><h6 id=\"tags-esp32\"><a href=\"#tags-esp32\" class=\"headerlink\" title=\"tags: esp32\"></a>tags: <code>esp32</code></h6><h2 id=\"æœ‰é»è¤‡é›œä½†åˆå¦äººæƒ³åšè©¦çš„ESP32\"><a href=\"#æœ‰é»è¤‡é›œä½†åˆå¦äººæƒ³åšè©¦çš„ESP32\" class=\"headerlink\" title=\"æœ‰é»è¤‡é›œä½†åˆå¦äººæƒ³åšè©¦çš„ESP32\"></a>æœ‰é»è¤‡é›œä½†åˆå¦äººæƒ³åšè©¦çš„ESP32</h2><p>æ¨‚é‘«ç§‘æŠ€-<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7215718092950677692#\">https://www.espressif.com/zh-hans/products/devkits/esp32-devkitc/overview</a>  </p>\n<p>ç©äº†ä¸€é™£å­Arduinoå¾Œï¼Œçœ‹äº†å¹¾å€‹ç¤¾åœ˜æ¨ESP32ç³»åˆ—ï¼Œ</p>\n<p>æ–¼æ˜¯å…¥æ‰‹äº†ESP32-CAMä¾†ç©ç©ï¼Œå°æ¯”æ¨¹è“æ´¾çš„äººè‡‰</p>\n<p>è¾¨è­˜ï¼Œåªè¦çŒå…¥ç¯„ä¾‹å°±èƒ½è·‘äººè‡‰è­˜åˆ¥ï¼Œæ‰€ä»¥é–‹å§‹é—œæ³¨</p>\n<p>ESP32ç³»åˆ—çš„æ¿å­ã€‚åŸä¾†å®ƒæ˜¯å¤§é™¸ä¸€å®¶å«æ¨‚é‘«çš„å¤§å» </p>\n<p>åšçš„é–‹æºæ¿ï¼Œä¸Šç¶²çœ‹äº†ä»–å€‘çš„ç¶²ç«™ï¼Œç™¼ç¾é —è±å¯Œçš„ï¼Œ</p>\n<p>å…¶å¯¦å¾ˆå¤šå‰è¼©è€å¸«å€‘éƒ½å·²åšäº†å¾ˆè©³ç›¡çš„ä»‹ç´¹ï¼Œæˆ‘å°±</p>\n<p>ä¸å¤šèªªäº†ã€‚</p>\n<p>ä¸»è¦æˆ‘æ˜¯è¦ºå¾—ESP32æ„Ÿè¦ºæœ‰åŒæ–¼Arduinoç³»åˆ—ï¼Œä½†åˆæœ‰</p>\n<p>ä¸ä¸€æ¨£çš„åœ°æ–¹ï¼Œè½èªªå®ƒè…³ä½æœ‰äº›ä¸èƒ½çµ¦æˆ‘å€‘æ­£å¸¸ä½¿ç”¨ï¼Œ</p>\n<p>è€Œä¸”åªæ¥å—3.3Vè¼¸å…¥ï¼Œä½†å¥½è™•æ˜¯é›†çµäº†WIFIå’Œè—èŠ½ã€‚</p>\n<p>å¯ä»¥ç”¨micropythonå’ŒCèªè¨€ä¾†ç·¨è­¯ï¼Œä½†é€™è£¡æˆ‘å°±æœ‰é»</p>\n<p>é›£å–æ¨ï¼Œåˆ°åº•è¦ç”¨micropythonæˆ–Cä¾†å¯«ï¼Œé›–ç„¶ç”¨ï½ƒæ¯”è¼ƒ</p>\n<p>ç°¡å–®è€Œä¸”åˆæœ‰å¼·å¤§çš„ç¯„ä¾‹ï¼Œä½†ä¹Ÿæˆ‘æœ¬èº«æ˜¯å¾pythoné–‹å§‹</p>\n<p>å­¸èµ·çš„ï¼Œæˆ–è¨±æœ‰ç©ºå…©ç¨®éƒ½æœƒå­¸å­¸ã€‚</p>\n<hr>\n<h2 id=\"æˆ‘å…¥æ‰‹çš„ESP32-DOIT-DEVKIT-V1\"><a href=\"#æˆ‘å…¥æ‰‹çš„ESP32-DOIT-DEVKIT-V1\" class=\"headerlink\" title=\"æˆ‘å…¥æ‰‹çš„ESP32-DOIT-DEVKIT-V1\"></a>æˆ‘å…¥æ‰‹çš„ESP32-DOIT-DEVKIT-V1</h2><p>é€™è£¡æ„Ÿè¦ºå¾ˆå²å®³çš„æ˜¯æœ‰è¨±å¤šçµ„â€è§¸æ§æ¥è…³â€ï¼Œä»¥ï¼‚TOUCHï¼‚é–‹é ­ç‚ºè¡¨ç¤º</p>\n<p>å¦å¤–GPIOç”¨Arduinoçš„æ–¹å¼å¯«ä¸€æ¨£æ˜¯D*ï¼Œè€ŒADC1 CH0å°±è¡¨ç¤ºA0ã€‚</p>\n<p>é‚„æœ‰ä¸€å€‹è¦æ³¨æ„çš„æ˜¯ï¼Œåºåˆ—æ’å­”å·¦å³æœ‰å…©å€‹æŒ‰éµï¼Œï¼¥ï¼®ä»£è¡¨ï¼²ï¼³ï¼´</p>\n<p>ï¼¢ï¼¯ï¼¯ï¼´ä»£è¡¨å¯«å…¥ç‹€æ…‹</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7215718092950677692#\"><img src=\"https://1.bp.blogspot.com/-aqByH8jZaHU/YIZiXH3A6NI/AAAAAAAAeFk/ZHPxVHay7pgsHhz54ZGE8xA33kHgiIWxwCNcBGAsYHQ/w327-h294/c44b9f5d0a23649c7b352c7c1eb8b5d8.jpg\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7215718092950677692#\"><img src=\"https://1.bp.blogspot.com/-uV84UOVkK8A/YIZij6ll2LI/AAAAAAAAeFs/jQsh0S-ZUswKm_V-HmN8tGN_i2G7bpQJwCNcBGAsYHQ/w496-h359/ESP32-DOIT-DEVKIT-V1-Board-Pinout-30-GPIOs-Copy.png\"></a></p>\n<hr>\n<h2 id=\"å¦‚ä½•å¯«å…¥è»”é«”\"><a href=\"#å¦‚ä½•å¯«å…¥è»”é«”\" class=\"headerlink\" title=\"å¦‚ä½•å¯«å…¥è»”é«”\"></a>å¦‚ä½•å¯«å…¥è»”é«”</h2><p>åƒè€ƒç¶²å€</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7215718092950677692#\">ä¸‹è¼‰ windows å°ˆç”¨ FlashTools</a>-å–è‡ªJIMIå¤§çš„æ•™å­¸ç¶²ç«™  </p>\n<p>é€™è£¡è¦æ³¨æ„çš„æ˜¯ESP32ç‡’éŒ„å·¥å…·è‹¥ä¸€æ‰“é–‹å°±è·³æ‰ï¼Œè«‹åˆ°</p>\n<p>ï¼‚è¨­å®šï¼‚-â€œæ™‚é–“èˆ‡èªè¨€â€-â€œåœ°å€æ ¼å¼â€é¸æ“‡ç‚ºâ€ä¸­æ–‡(ç°¡é«”,ä¸­åœ‹)ï¼‚</p>\n<p>é‡é–‹æ©Ÿå³å¯åŸ·è¡Œè©²è»Ÿé«”ã€‚</p>\n","categories":["esp32"],"tags":["å¯«å…¥è»”é«”"]},{"title":"ESP32-CAMç¸®æ™‚éŒ„å½±","url":"/2021/08/29/ESP32-CAM%E7%B8%AE%E6%99%82%E9%8C%84%E5%BD%B1/","content":"<h1 id=\"ESP32-CAMç¸®æ™‚éŒ„å½±\"><a href=\"#ESP32-CAMç¸®æ™‚éŒ„å½±\" class=\"headerlink\" title=\"ESP32-CAMç¸®æ™‚éŒ„å½±\"></a>ESP32-CAMç¸®æ™‚éŒ„å½±</h1><h6 id=\"tags-esp32-esp32-camç¸®æ™‚éŒ„å½±\"><a href=\"#tags-esp32-esp32-camç¸®æ™‚éŒ„å½±\" class=\"headerlink\" title=\"tags: esp32 esp32-camç¸®æ™‚éŒ„å½±\"></a>tags: <code>esp32</code> <code>esp32-camç¸®æ™‚éŒ„å½±</code></h6><h2 id=\"æº–å‚™\"><a href=\"#æº–å‚™\" class=\"headerlink\" title=\"æº–å‚™\"></a>æº–å‚™</h2><p><strong>MicroSDå¡ x1</strong></p>\n<p><strong>ESP32-CAM x1</strong></p>\n<p><strong>USB TTLå‚³è¼¸ç·š æˆ– USB TTLæ¨¡çµ„</strong></p>\n<p><strong>é›™æ¯æœé‚¦ç·š x1</strong></p>\n<hr>\n<h2 id=\"ä¸‹è¼‰ç¸®æ™‚éŒ„å½±çš„åº«\"><a href=\"#ä¸‹è¼‰ç¸®æ™‚éŒ„å½±çš„åº«\" class=\"headerlink\" title=\"ä¸‹è¼‰ç¸®æ™‚éŒ„å½±çš„åº«\"></a>ä¸‹è¼‰ç¸®æ™‚éŒ„å½±çš„åº«</h2><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/220625865150685015#\">https://github.com/jameszah/ESP32-CAM-Video-Recorder</a>  </p>\n<p><strong>ä¸‹è¼‰å®Œå¾Œï¼Œæ–°å¢åˆ°Arduino IDEçš„libraryè£¡</strong></p>\n<p><strong>æ‰“é–‹ç·¨è¼¯å™¨è£¡çš„ç¯„ä¾‹-&gt;TimeLapse</strong></p>\n<p>**</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/220625865150685015#\"><img src=\"https://1.bp.blogspot.com/-LjDyK9KNMpk/YGwIPQCplYI/AAAAAAAAeDY/mx4YiCbQDxIEx4VHjyYmzJwMRU_Gg9yrACNcBGAsYHQ/w438-h246/1.jpg\"></a></p>\n<hr>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/220625865150685015#\"><img src=\"https://1.bp.blogspot.com/-vym3Op0cW0s/YGwI357s-KI/AAAAAAAAeDg/KZRbfinTtQESOD8tmqD9f-5VXMC4uvX2QCNcBGAsYHQ/w441-h248/1.jpg\"></a></p>\n<hr>\n<p>å°‡ESP32-CAMæ¿å­ä¸Šçš„IO0å’ŒGNDç”¨é›™æ¯æœé‚¦é€£æ¥èµ·ä¾†ã€‚**</p>\n<h2 id=\"é‚„æœ‰ä¸€äº›é¸æ“‡çš„è¨­å®šï¼Œå¾€ä¸‹çœ‹å½±ç‰‡æ›´æ¸…æ¥š\"><a href=\"#é‚„æœ‰ä¸€äº›é¸æ“‡çš„è¨­å®šï¼Œå¾€ä¸‹çœ‹å½±ç‰‡æ›´æ¸…æ¥š\" class=\"headerlink\" title=\"é‚„æœ‰ä¸€äº›é¸æ“‡çš„è¨­å®šï¼Œå¾€ä¸‹çœ‹å½±ç‰‡æ›´æ¸…æ¥š\"></a><strong>é‚„æœ‰ä¸€äº›é¸æ“‡çš„è¨­å®šï¼Œå¾€ä¸‹çœ‹å½±ç‰‡æ›´æ¸…æ¥š</strong></h2><p>**</p>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/BJXV09NFz1U\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n<p><a href=\"https://youtu.be/BJXV09NFz1U\">https://youtu.be/BJXV09NFz1U</a></p>\n<p>æœ‰ç©ºå†ä¾†è£œå¦‚ä½•ç”¨ffmpegæŠŠç¸®æ™‚çš„ç…§ç‰‡æ•´åˆèµ·ä¾†**</p>\n","categories":["esp32","esp32 cam"],"tags":["ESP32 CAM"]},{"title":"ä½¿ç”¨platformIOç·¨è¼¯esp32æ›´æ”¹æ³¢ç‰¹ç‡","url":"/2021/08/29/%E4%BD%BF%E7%94%A8platformIO%E7%B7%A8%E8%BC%AFesp32%E6%9B%B4%E6%94%B9%E6%B3%A2%E7%89%B9%E7%8E%87/","content":"<h1 id=\"ä½¿ç”¨platformIOç·¨è¼¯esp32æ›´æ”¹æ³¢ç‰¹ç‡\"><a href=\"#ä½¿ç”¨platformIOç·¨è¼¯esp32æ›´æ”¹æ³¢ç‰¹ç‡\" class=\"headerlink\" title=\"ä½¿ç”¨platformIOç·¨è¼¯esp32æ›´æ”¹æ³¢ç‰¹ç‡\"></a>ä½¿ç”¨platformIOç·¨è¼¯esp32æ›´æ”¹æ³¢ç‰¹ç‡</h1><h6 id=\"tags-esp32\"><a href=\"#tags-esp32\" class=\"headerlink\" title=\"tags: esp32\"></a>tags: <code>esp32</code></h6><h2 id=\"åŸç”±\"><a href=\"#åŸç”±\" class=\"headerlink\" title=\"åŸç”±:\"></a>åŸç”±:</h2><p><strong>å› ç‚ºä½¿ç”¨VScodeçš„å¤–æ›platformIOç·¨ç¨‹ESP32æ™‚,é‡åˆ°ä¸€å€‹å•é¡Œæ˜¯,æ³¢ç‰¹ç‡çš„é è¨­æ˜¯9600,æ‰€ä»¥åœ¨ä¸Šå‚³ESP32åªè¦é–‹å•“ä¸²å£çª—,æœƒå‡ºç¾äº‚ç¢¼,æ­¤æ™‚åªè¦åŠ </strong></p>\n<p><strong>å…¥ä¸€è¡Œè¨­å®šä»£ç¢¼å³å¯ã€‚</strong></p>\n<h2 id=\"æ–¹æ³•\"><a href=\"#æ–¹æ³•\" class=\"headerlink\" title=\"æ–¹æ³•:\"></a>æ–¹æ³•:</h2><h3 id=\"åœ¨platformIOçš„å°ˆæ¡ˆè³‡æ–™å¤¾è£¡æœ‰ä¸€å€‹platformio-iniï¼Œæ‰“é–‹æ­¤æ–‡ä»¶ã€‚\"><a href=\"#åœ¨platformIOçš„å°ˆæ¡ˆè³‡æ–™å¤¾è£¡æœ‰ä¸€å€‹platformio-iniï¼Œæ‰“é–‹æ­¤æ–‡ä»¶ã€‚\" class=\"headerlink\" title=\"åœ¨platformIOçš„å°ˆæ¡ˆè³‡æ–™å¤¾è£¡æœ‰ä¸€å€‹platformio.iniï¼Œæ‰“é–‹æ­¤æ–‡ä»¶ã€‚\"></a>åœ¨platformIOçš„å°ˆæ¡ˆè³‡æ–™å¤¾è£¡æœ‰ä¸€å€‹platformio.iniï¼Œæ‰“é–‹æ­¤æ–‡ä»¶ã€‚</h3><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5479708402450547329#\"><img src=\"https://1.bp.blogspot.com/-vKAPXvvPExQ/YIYxS2l229I/AAAAAAAAeFQ/kfyB0nSsx1AbRjBkrwblppLarywketgVQCNcBGAsYHQ/w591-h332/but2.jpg\"></a></p>\n<h3 id=\"åŠ å…¥monitor-speed-115200ï¼ŒåŠ å…¥å¾Œå­˜æª”å³å¯ã€‚\"><a href=\"#åŠ å…¥monitor-speed-115200ï¼ŒåŠ å…¥å¾Œå­˜æª”å³å¯ã€‚\" class=\"headerlink\" title=\"åŠ å…¥monitor_speed=115200ï¼ŒåŠ å…¥å¾Œå­˜æª”å³å¯ã€‚\"></a>åŠ å…¥monitor_speed=115200ï¼ŒåŠ å…¥å¾Œå­˜æª”å³å¯ã€‚</h3><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5479708402450547329#\"><img src=\"https://1.bp.blogspot.com/-4fs9OT3YkHc/YIYxS_sPvSI/AAAAAAAAeFU/--QyhpQ7P844rjcXviYpBcSACr_9LYpdACNcBGAsYHQ/w580-h326/but.jpg\"></a></p>\n","categories":["esp32"],"tags":["æ³¢ç‰¹ç‡"]},{"title":"ESP32é»äº®å…§ç½®LED","url":"/2021/08/29/ESP32%E9%BB%9E%E4%BA%AE%E5%85%A7%E7%BD%AELED/","content":"<h1 id=\"ESP32é»äº®å…§ç½®LED\"><a href=\"#ESP32é»äº®å…§ç½®LED\" class=\"headerlink\" title=\"ESP32é»äº®å…§ç½®LED\"></a>ESP32é»äº®å…§ç½®LED</h1><h6 id=\"tags-esp32\"><a href=\"#tags-esp32\" class=\"headerlink\" title=\"tags: esp32\"></a>tags: <code>esp32</code></h6><hr>\n<h4 id=\"é€™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡çœŸæ­£å­¸ç¿’esp32ç³»åˆ—-é›–ç„¶ä¹‹å‰æœ‰ä½¿ç”¨wemos-d1-miniä½†ä¹Ÿåªæ˜¯ç…§æ›¸åš-ç”¨å®Œé‚„æ˜¯è¦ºå¾—å¾ˆæ¨¡ç³Š-ç©äº†ä¸€é™£å­çš„Arduino-ç¾åœ¨æœ‰ç©ºä¸€é‚Šç ”ç©¶espç³»åˆ—å’Œæ¨¹è“æ´¾-ä»Šå¤©ç•¶åšä¸€å€‹èµ·å§‹é»äº®æ¿ä¸Šçš„LED\"><a href=\"#é€™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡çœŸæ­£å­¸ç¿’esp32ç³»åˆ—-é›–ç„¶ä¹‹å‰æœ‰ä½¿ç”¨wemos-d1-miniä½†ä¹Ÿåªæ˜¯ç…§æ›¸åš-ç”¨å®Œé‚„æ˜¯è¦ºå¾—å¾ˆæ¨¡ç³Š-ç©äº†ä¸€é™£å­çš„Arduino-ç¾åœ¨æœ‰ç©ºä¸€é‚Šç ”ç©¶espç³»åˆ—å’Œæ¨¹è“æ´¾-ä»Šå¤©ç•¶åšä¸€å€‹èµ·å§‹é»äº®æ¿ä¸Šçš„LED\" class=\"headerlink\" title=\"é€™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡çœŸæ­£å­¸ç¿’esp32ç³»åˆ—,é›–ç„¶ä¹‹å‰æœ‰ä½¿ç”¨wemos d1 miniä½†ä¹Ÿåªæ˜¯ç…§æ›¸åš,ç”¨å®Œé‚„æ˜¯è¦ºå¾—å¾ˆæ¨¡ç³Š,ç©äº†ä¸€é™£å­çš„Arduino,ç¾åœ¨æœ‰ç©ºä¸€é‚Šç ”ç©¶espç³»åˆ—å’Œæ¨¹è“æ´¾,ä»Šå¤©ç•¶åšä¸€å€‹èµ·å§‹é»äº®æ¿ä¸Šçš„LED.\"></a>é€™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡çœŸæ­£å­¸ç¿’esp32ç³»åˆ—,é›–ç„¶ä¹‹å‰æœ‰ä½¿ç”¨wemos d1 miniä½†ä¹Ÿåªæ˜¯ç…§æ›¸åš,ç”¨å®Œé‚„æ˜¯è¦ºå¾—å¾ˆæ¨¡ç³Š,ç©äº†ä¸€é™£å­çš„Arduino,ç¾åœ¨æœ‰ç©ºä¸€é‚Šç ”ç©¶espç³»åˆ—å’Œæ¨¹è“æ´¾,ä»Šå¤©ç•¶åšä¸€å€‹èµ·å§‹é»äº®æ¿ä¸Šçš„LED.</h4><hr>\n<h4 id=\"æˆ‘æ‰€ä½¿ç”¨çš„ESP32æ˜¯æ·˜-è²·çš„-å› ç‚ºé€™æ¬¾æœ‰é™„å–®å…ƒèª²ç¨‹-æ‰€ä»¥æœ‰ä¸€å€‹é›†æˆæ¿-å¾ˆæ–¹ä¾¿ã€‚\"><a href=\"#æˆ‘æ‰€ä½¿ç”¨çš„ESP32æ˜¯æ·˜-è²·çš„-å› ç‚ºé€™æ¬¾æœ‰é™„å–®å…ƒèª²ç¨‹-æ‰€ä»¥æœ‰ä¸€å€‹é›†æˆæ¿-å¾ˆæ–¹ä¾¿ã€‚\" class=\"headerlink\" title=\"æˆ‘æ‰€ä½¿ç”¨çš„ESP32æ˜¯æ·˜*è²·çš„,å› ç‚ºé€™æ¬¾æœ‰é™„å–®å…ƒèª²ç¨‹,æ‰€ä»¥æœ‰ä¸€å€‹é›†æˆæ¿,å¾ˆæ–¹ä¾¿ã€‚\"></a>æˆ‘æ‰€ä½¿ç”¨çš„ESP32æ˜¯æ·˜*è²·çš„,å› ç‚ºé€™æ¬¾æœ‰é™„å–®å…ƒèª²ç¨‹,æ‰€ä»¥æœ‰ä¸€å€‹é›†æˆæ¿,å¾ˆæ–¹ä¾¿ã€‚</h4><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5957928262171433878#\"><img src=\"https://1.bp.blogspot.com/-EHIybPXQ1TQ/YESQWt2rOZI/AAAAAAAAd5g/dPueSjsi6HgMLS-72nLW0wTPYWWGqEHZACNcBGAsYHQ/w343-h762/20210307_162828.jpg\"></a><br><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5957928262171433878#\"><img src=\"https://1.bp.blogspot.com/-WUH-nbqYfnU/YESTI1KqdqI/AAAAAAAAd58/5OAKs359y9spbLh5KE9AuOSuGQjegmF4ACNcBGAsYHQ/w542-h361/pyWiFi-ESP32_pinout.png\"></a></p>\n<h6 id=\"lt-åœ–ç‰‡å¼•ç”¨01Studioç¶²ç«™-gt\"><a href=\"#lt-åœ–ç‰‡å¼•ç”¨01Studioç¶²ç«™-gt\" class=\"headerlink\" title=\"&lt;åœ–ç‰‡å¼•ç”¨01Studioç¶²ç«™&gt;\"></a>&lt;åœ–ç‰‡å¼•ç”¨01Studioç¶²ç«™&gt;</h6><hr>\n<h3 id=\"ä»Šå¤©å…ˆä¾†ç­†è¨˜ä¸€ä¸‹ä½¿ç”¨micropythonçš„èªæ³•\"><a href=\"#ä»Šå¤©å…ˆä¾†ç­†è¨˜ä¸€ä¸‹ä½¿ç”¨micropythonçš„èªæ³•\" class=\"headerlink\" title=\"ä»Šå¤©å…ˆä¾†ç­†è¨˜ä¸€ä¸‹ä½¿ç”¨micropythonçš„èªæ³•\"></a>ä»Šå¤©å…ˆä¾†ç­†è¨˜ä¸€ä¸‹ä½¿ç”¨micropythonçš„èªæ³•</h3><pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> machine <span class=\"token keyword\">import</span> Pin<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h3 id=\"é€™å€‹æ˜¯æ§åˆ¶æ¿ä¸Šçš„gpioçš„å¥—ä»¶\"><a href=\"#é€™å€‹æ˜¯æ§åˆ¶æ¿ä¸Šçš„gpioçš„å¥—ä»¶\" class=\"headerlink\" title=\"é€™å€‹æ˜¯æ§åˆ¶æ¿ä¸Šçš„gpioçš„å¥—ä»¶\"></a>é€™å€‹æ˜¯æ§åˆ¶æ¿ä¸Šçš„gpioçš„å¥—ä»¶</h3><pre class=\"line-numbers language-python\" data-language=\"python\"><code class=\"language-python\">led<span class=\"token punctuation\">(</span>è®Šæ•¸<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span>Pin<span class=\"token punctuation\">(</span>è…³ä½<span class=\"token punctuation\">,</span> Pin<span class=\"token punctuation\">.</span>OUT<span class=\"token punctuation\">)</span>\n\nled<span class=\"token punctuation\">.</span>on<span class=\"token punctuation\">(</span>off<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> æˆ– led<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">(</span><span class=\"token number\">0</span> <span class=\"token keyword\">or</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n\n<hr>\n<h3 id=\"å¯«ä¸€å€‹è¿´åœˆä¾†æ§åˆ¶LEDé–ƒçˆ\"><a href=\"#å¯«ä¸€å€‹è¿´åœˆä¾†æ§åˆ¶LEDé–ƒçˆ\" class=\"headerlink\" title=\"å¯«ä¸€å€‹è¿´åœˆä¾†æ§åˆ¶LEDé–ƒçˆ\"></a>å¯«ä¸€å€‹è¿´åœˆä¾†æ§åˆ¶LEDé–ƒçˆ</h3><pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\"><span class=\"token keyword\">from</span> machine <span class=\"token keyword\">import</span> Pin\n\n<span class=\"token keyword\">import</span> time\n\nled<span class=\"token operator\">=</span>Pin<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> Pin<span class=\"token punctuation\">.</span>OUT<span class=\"token punctuation\">)</span>\na<span class=\"token operator\">=</span><span class=\"token number\">0</span>\n<span class=\"token keyword\">while</span> a<span class=\"token operator\">&lt;</span><span class=\"token number\">5</span><span class=\"token punctuation\">:</span>\n\n    led<span class=\"token punctuation\">.</span>on<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n    led<span class=\"token punctuation\">.</span>off<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    time<span class=\"token punctuation\">.</span>sleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n    a<span class=\"token operator\">+=</span><span class=\"token number\">1</span>\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/X79o9kU_hh0\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n\n","categories":["esp32","micropython"],"tags":["led"]},{"title":"ESP32è®Šæˆç¶²é ä¼ºæœå™¨,ä½¿å®¢æˆ¶ç«¯é€£å…¥ç¶²é ","url":"/2021/08/29/ESP32%E8%AE%8A%E6%88%90%E7%B6%B2%E9%A0%81%E4%BC%BA%E6%9C%8D%E5%99%A8-%E4%BD%BF%E5%AE%A2%E6%88%B6%E7%AB%AF%E9%80%A3%E5%85%A5%E7%B6%B2%E9%A0%81/","content":"<h1 id=\"ESP32è®Šæˆç¶²é ä¼ºæœå™¨-ä½¿å®¢æˆ¶ç«¯é€£å…¥ç¶²é \"><a href=\"#ESP32è®Šæˆç¶²é ä¼ºæœå™¨-ä½¿å®¢æˆ¶ç«¯é€£å…¥ç¶²é \" class=\"headerlink\" title=\"ESP32è®Šæˆç¶²é ä¼ºæœå™¨,ä½¿å®¢æˆ¶ç«¯é€£å…¥ç¶²é \"></a>ESP32è®Šæˆç¶²é ä¼ºæœå™¨,ä½¿å®¢æˆ¶ç«¯é€£å…¥ç¶²é </h1><h6 id=\"tags-esp32-WiFi\"><a href=\"#tags-esp32-WiFi\" class=\"headerlink\" title=\"tags: esp32 WiFi\"></a>tags: <code>esp32</code> <code>WiFi</code></h6><hr>\n<h4 id=\"åŸºæœ¬ä¸Šå°±æ˜¯é€™ç¯‡çš„å»¶ä¼¸\"><a href=\"#åŸºæœ¬ä¸Šå°±æ˜¯é€™ç¯‡çš„å»¶ä¼¸\" class=\"headerlink\" title=\"åŸºæœ¬ä¸Šå°±æ˜¯é€™ç¯‡çš„å»¶ä¼¸-\"></a>åŸºæœ¬ä¸Šå°±æ˜¯é€™ç¯‡çš„å»¶ä¼¸-</h4><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/4116986106197766676?hl=zh-TW#\">https://esp32-blairan.blogspot.com/2021/05/esp32ap.html</a>  </p>\n<h2 id=\"æµç¨‹æ€æƒŸ\"><a href=\"#æµç¨‹æ€æƒŸ\" class=\"headerlink\" title=\"æµç¨‹æ€æƒŸ\"></a>æµç¨‹æ€æƒŸ</h2><p>è¦å…ˆæœ‰æ•´å€‹æµç¨‹çš„æ¦‚å¿µï¼Œæ¯”è¼ƒä¸æœƒåœ¨å¯«ç¨‹å¼æ™‚ææ··</p>\n<p>ç”¨æˆ‘è‡ªå·±çš„è§£é‡‹æ˜¯ï¼Œå…ˆé€£ä¸ŠESP32åŸºåœ°å°ï¼Œè¬ä¸€é€£</p>\n<p>ä¸ä¸Šï¼Œå°±æœƒä¸€ç›´å‡ºç¾é»é»é»â€¦.ï¼Œè©¦åœ–é€£ä¸Šï¼Œé€£ç·šæˆ</p>\n<p>åŠŸå¾Œæœƒé¡¯ç¤ºï¼‚å·²é€£ç·šæˆåŠŸï¼‚(åœ–1)ï¼Œä¸¦é…ç™¼IPä½å€çµ¦å®¢æˆ¶ç«¯</p>\n<p>æ­¤æ™‚ä¼ºæœå™¨å•“å‹•ç­‰å¾…å®¢æˆ¶ç«¯è«‹æ±‚æ ¹ç›®éŒ„çš„å›è¦†,è‹¥å®¢</p>\n<p>æˆ¶ç«¯é€£ä¸ŠIP,ä¼ºæœå™¨å°‡æä¾›æ ¹ç›®éŒ„é è¨­çš„å›è¦†è¨Šæ¯(åœ–2)ï¼Œ</p>\n<p>å¦‚æœåœ¨IPå¾Œé¢éš¨æ„æ‰“å­—ï¼Œå› ç‚ºæ ¹ç›®éŒ„ä¸‹æ²’æœ‰é€™å€‹é è¨­</p>\n<p>ç›®æ¨™ï¼Œå°‡æœƒé¡¯æŸ¥ç„¡é€™å€‹ç¶²é (åœ–3)ã€‚</p>\n<p>(åœ–1)</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/4116986106197766676?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-aHVdMYxdyUo/YLHndJOPIaI/AAAAAAAAeNU/-HZtR82h3JQIeA9oJ5JRNz8Phn_h1sDFgCNcBGAsYHQ/w500-h281/2.jpg\"></a></p>\n<p>(åœ–2)</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/4116986106197766676?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-LNy_a5hKhTA/YLHni6wxvNI/AAAAAAAAeNY/GL8WBynD2FocPIgJVTmzzFJW7IxpR3LTACNcBGAsYHQ/w502-h269/1.jpg\"></a></p>\n<p>(åœ–3)</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/4116986106197766676?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-F2vTjv5E6Uc/YLHoaliw3gI/AAAAAAAAeNk/JWP9Xp9d2h0-yFONJzfrqP3ZZdI-JHq1wCNcBGAsYHQ/w504-h267/3.jpg\"></a></p>\n<hr>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;WiFi.h&gt;\n\n#include &lt;WebServer.h&gt;\n\nconstÂ charÂ *ssid&#x3D;&quot;åŸºåœ°å°åç¨±&quot;;\n\nconstÂ charÂ *password&#x3D;&quot;åŸºåœ°å°å¯†ç¢¼&quot;;\n\n\nWebServerÂ server(80);\n\n\nvoidÂ handleRoot()&#123;\n\nÂ Â server.send(200,Â &quot;text&#x2F;html;Â charset&#x3D;UTF-8&quot;,Â &quot;å®¢æˆ¶ç«¯æ”¶åˆ°è¨Šæ¯!!!&quot;);\n\n&#125;\n\n\nvoidÂ handleNotFound()&#123;\n\nÂ Â server.send(400,Â &quot;text&#x2F;html;Â charset&#x3D;UTF-8&quot;,Â &quot;æ‰¾ä¸åˆ°å›å‚³çš„è¨Šæ¯&quot;);\n\n&#125;\n\n\nvoidÂ setup(void)&#123;\n\nÂ Â Serial.begin(115200);\n\nÂ Â WiFi.begin(ssid,Â password);\n\nÂ Â server.begin();\n\nÂ Â whileÂ (WiFi.status()Â !&#x3D;Â WL_CONNECTED)&#123;\n\nÂ Â Â Â Serial.print(&quot;.&quot;);\n\nÂ Â Â Â delay(500);\n\nÂ Â &#125;\n\nÂ Â Serial.print(&quot;å·²é€£ç·šè‡³åŸºåœ°å°&quot;);\n\nÂ Â Serial.println(ssid)\nÂ Â Serial.print(&quot;è«‹æ–¼ç€è¦½å™¨ä¸­é–‹å•“é€™å€‹IPä½å€:Â &quot;);\n\nÂ Â Serial.println(WiFi.localIP());\n\n  \n\nÂ Â server.on(&quot;&#x2F;&quot;,Â handleRoot);\n\nÂ Â server.onNotFound(handleNotFound);\n\nÂ Â Serial.println(&quot;HTTPä¼ºæœå™¨å·²å•“å‹•&quot;);\n\n&#125;\n\n  \nvoidÂ loop()Â &#123;\n\nÂ Â server.handleClient();\n\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","categories":["esp32"],"tags":["webserver"]},{"title":"ESP32é€£ä¸Šç„¡ç·šåŸºåœ°å°ï¼ˆï¼¡ï¼°ï¼‰","url":"/2021/08/29/ESP32%E9%80%A3%E4%B8%8A%E7%84%A1%E7%B7%9A%E5%9F%BA%E5%9C%B0%E5%8F%B0%EF%BC%88AP%EF%BC%89/","content":"<h1 id=\"ESP32é€£ä¸Šç„¡ç·šåŸºåœ°å°ï¼ˆAPï¼‰\"><a href=\"#ESP32é€£ä¸Šç„¡ç·šåŸºåœ°å°ï¼ˆAPï¼‰\" class=\"headerlink\" title=\"ESP32é€£ä¸Šç„¡ç·šåŸºåœ°å°ï¼ˆï¼¡ï¼°ï¼‰\"></a>ESP32é€£ä¸Šç„¡ç·šåŸºåœ°å°ï¼ˆï¼¡ï¼°ï¼‰</h1><h6 id=\"tags-esp32-wifi\"><a href=\"#tags-esp32-wifi\" class=\"headerlink\" title=\"tags: esp32 wifi\"></a>tags: <code>esp32</code> <code>wifi</code></h6><hr>\n<h2 id=\"å¯¦é©—èªªæ˜ï¼š\"><a href=\"#å¯¦é©—èªªæ˜ï¼š\" class=\"headerlink\" title=\"å¯¦é©—èªªæ˜ï¼š\"></a>å¯¦é©—èªªæ˜ï¼š</h2><p><strong>ç”¨ ESP32å…§å»ºWi-Fié€£åˆ°åŸºåœ°å°ï¼Œç¨‹å¼ä½¿ç”¨while()è¿´åœˆ</strong></p>\n<p><strong>ä¸¦ä»¥WiFi.staus()åˆ¤æ–·æ˜¯å¦å·²é€£ç·š,å¦‚æœæ­£åœ¨é€£ç·šï¼Œæœƒå°å‡º</strong></p>\n<p><strong>ï¼‚.ï¼‚ï¼Œå¦‚å›å‚³ç‚ºå¦,æ¯éš”0.5ç§’æœƒå†é€²å…¥å›è¿´åœˆæƒæé™„è¿‘</strong></p>\n<p><strong>é…å°çš„åŸºåœ°å°ï¼Œç›´åˆ°é€£ç·šæˆåŠŸç‚ºè·³å‡ºè¿´åœˆä¸¦å°å‡ºâ€å·²é€£ç·š</strong></p>\n<p><strong>æˆåŠŸâ€å­—æ¨£ã€‚</strong></p>\n<hr>\n<ul>\n<li><strong>é€£ç·šä¸­</strong></li>\n</ul>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/1075448515665169120#\"><img src=\"https://1.bp.blogspot.com/-pReU1rtq-8Q/YJyl1JGCz_I/AAAAAAAAeJA/qeYtYdCBIKwjeUF62PlEbad5mVj7kqmoACNcBGAsYHQ/w609-h194/1.jpg\"></a></p>\n<ul>\n<li><strong>å·²é€£ç·š</strong></li>\n</ul>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/1075448515665169120#\"><img src=\"https://1.bp.blogspot.com/--1iFhC4mnNU/YJyl98_zwgI/AAAAAAAAeJE/MNJ4WMupFAUL0d13nyJ-k-uzZTIpvhRVACNcBGAsYHQ/w645-h214/2.jpg\"></a></p>\n<hr>\n<h1 id=\"ESP32é€£ä¸Šç„¡ç·šåŸºåœ°å°ï¼ˆAPï¼‰-1\"><a href=\"#ESP32é€£ä¸Šç„¡ç·šåŸºåœ°å°ï¼ˆAPï¼‰-1\" class=\"headerlink\" title=\"ESP32é€£ä¸Šç„¡ç·šåŸºåœ°å°ï¼ˆï¼¡ï¼°ï¼‰\"></a>ESP32é€£ä¸Šç„¡ç·šåŸºåœ°å°ï¼ˆï¼¡ï¼°ï¼‰</h1><hr>\n<h2 id=\"å¯¦é©—èªªæ˜ï¼š-1\"><a href=\"#å¯¦é©—èªªæ˜ï¼š-1\" class=\"headerlink\" title=\"å¯¦é©—èªªæ˜ï¼š\"></a>å¯¦é©—èªªæ˜ï¼š</h2><p><strong>ç”¨ ESP32å…§å»ºWi-Fié€£åˆ°åŸºåœ°å°ï¼Œç¨‹å¼ä½¿ç”¨while()è¿´åœˆ</strong></p>\n<p><strong>ä¸¦ä»¥WiFi.staus()åˆ¤æ–·æ˜¯å¦å·²é€£ç·š,å¦‚æœæ­£åœ¨é€£ç·šï¼Œæœƒå°å‡º</strong></p>\n<p><strong>ï¼‚.ï¼‚ï¼Œå¦‚å›å‚³ç‚ºå¦,æ¯éš”0.5ç§’æœƒå†é€²å…¥å›è¿´åœˆæƒæé™„è¿‘</strong></p>\n<p><strong>é…å°çš„åŸºåœ°å°ï¼Œç›´åˆ°é€£ç·šæˆåŠŸç‚ºè·³å‡ºè¿´åœˆä¸¦å°å‡ºâ€å·²é€£ç·š</strong></p>\n<p><strong>æˆåŠŸâ€å­—æ¨£ã€‚</strong></p>\n<hr>\n<h3 id=\"é€£ç·šä¸­\"><a href=\"#é€£ç·šä¸­\" class=\"headerlink\" title=\"é€£ç·šä¸­\"></a>é€£ç·šä¸­</h3><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/1075448515665169120#\"><img src=\"https://1.bp.blogspot.com/-pReU1rtq-8Q/YJyl1JGCz_I/AAAAAAAAeJA/qeYtYdCBIKwjeUF62PlEbad5mVj7kqmoACNcBGAsYHQ/w609-h194/1.jpg\"></a></p>\n<h3 id=\"å·²é€£ç·š\"><a href=\"#å·²é€£ç·š\" class=\"headerlink\" title=\"å·²é€£ç·š\"></a>å·²é€£ç·š</h3><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/1075448515665169120#\"><img src=\"https://1.bp.blogspot.com/--1iFhC4mnNU/YJyl98_zwgI/AAAAAAAAeJE/MNJ4WMupFAUL0d13nyJ-k-uzZTIpvhRVACNcBGAsYHQ/w645-h214/2.jpg\"></a></p>\n<hr>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">\n#include &lt;WiFi.h&gt; â€”â€”â€”å¥—ç”¨ï¼·ï½‰ï¼¦ï½‰åº«\n\nconstÂ charÂ *ssidÂ &#x3D;Â &quot;åŸºåœ°å°åç¨±&quot;;\n\nconstÂ charÂ *passwordÂ &#x3D;Â &quot;åŸºåœ°å°å¯†ç¢¼&quot;;\n\n  \n\nvoidÂ setup()&#123;\n\nÂ Â Â Â Serial.begin(115200);\n\nÂ Â Â Â WiFi.begin(ssid,Â password);\n\nÂ Â Â Â whileÂ (WiFi.status()Â !&#x3D;Â WL_CONNECTED)&#123; â€”â€”â€”åˆ¤æ–·æ˜¯å¦å·²é€£ç·š\n\nÂ Â Â Â Â Â Â Â delay(500);\n\nÂ Â Â Â Â Â Â Â Serial.print(&quot;.&quot;);\n\nÂ Â Â Â &#125;\n\nÂ Â Â Â Serial.println(&quot;å·²é€£ç·šåˆ°Wi-FiåŸºåœ°å°&quot;);\n\n&#125;\n\nvoidÂ loop()&#123;\n\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"ç²å–APè³‡è¨Š\"><a href=\"#ç²å–APè³‡è¨Š\" class=\"headerlink\" title=\"  ç²å–APè³‡è¨Š \"></a>  ç²å–APè³‡è¨Š </h2><p><strong>ç›¸é—œå‡½å¼è«‹åƒé–±-<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/1075448515665169120#\">ESP32å‡½å¼ç­†è¨˜æœ¬</a></strong></p>\n<p><strong>åŸºæœ¬ä¸Šå’Œä¸Šé¢ç¨‹å¼ç¢¼ä¸€æ¨£ï¼Œåªæ˜¯å¤šå¥—ç”¨äº†å–å¾—ç¶²è·¯ç›¸é—œçš„è³‡è¨Š</strong></p>\n<p><strong>ï¼Œæ¯å€‹èƒ½é€£ä¸Šç¶²è·¯çš„è¨­å‚™éƒ½æœƒæœ‰é€™äº›ç›¸é—œè¨Šæ¯ï¼Œä¾‹å¦‚é›»è…¦ï¼Œåœ¨</strong></p>\n<p><strong>çµ‚è«¯æ©Ÿè¼¸å…¥ipconfigå°±æœƒå‡ºç¾ä¸‹åœ–:</strong></p>\n<p><a href=\"https://1.bp.blogspot.com/-1J2iaS1THkk/YJzRS-H6gyI/AAAAAAAAeJQ/Z8D0k_dYVtI1pmHiwtpn5cgkguvjwvubwCNcBGAsYHQ/s1456/1.jpg\"><img src=\"https://1.bp.blogspot.com/-1J2iaS1THkk/YJzRS-H6gyI/AAAAAAAAeJQ/Z8D0k_dYVtI1pmHiwtpn5cgkguvjwvubwCNcBGAsYHQ/w544-h275/1.jpg\"></a></p>\n<p><strong>é‚£éº¼ESP32åŒæ¨£å¯åšç‚ºç¶²è·¯è¨­å‚™ä¾†èªªä¹Ÿæ˜¯æœƒæœ‰é€™äº›è³‡è¨Š</strong></p>\n<p>**å°‡ç¨‹å¼ç¢¼ä¸Šå‚³å¾Œå³æœƒå–å¾—ç›¸é—œçš„è³‡è¨Š<br>**</p>\n<p><a href=\"https://1.bp.blogspot.com/-Eb5_RJ8ay48/YJzR3ZC4AII/AAAAAAAAeJY/Qi9yLfNdupghRcPWGuw7KX0AR7HOWo9ZACNcBGAsYHQ/s1541/2.jpg\"><img src=\"https://1.bp.blogspot.com/-Eb5_RJ8ay48/YJzR3ZC4AII/AAAAAAAAeJY/Qi9yLfNdupghRcPWGuw7KX0AR7HOWo9ZACNcBGAsYHQ/w469-h283/2.jpg\"></a></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;WiFi.h&gt;\n\nconstÂ charÂ *ssidÂ &#x3D;Â &quot;åŸºåœ°å°åç¨±&quot;;\n\nconstÂ charÂ *passwordÂ &#x3D;Â &quot;åŸºåœ°å°å¯†ç¢¼&quot;;\n\n  \nvoidÂ setup()&#123;\n\nÂ Â Â Â Serial.begin(115200);\n\nÂ Â Â Â WiFi.begin(ssid,Â password);\n\nÂ Â Â Â whileÂ (WiFi.status()Â !&#x3D;Â WL_CONNECTED)\n\nÂ Â Â Â &#123;\n\nÂ Â Â Â Â Â Â Â delay(500);\n\nÂ Â Â Â Â Â Â Â Serial.print(&quot;.&quot;);\n\nÂ Â Â Â &#125;\n\nÂ Â Â Â Serial.println(&quot;å·²é€£ä¸ŠWiFi&quot;);\n\nÂ Â Â Â Serial.print(&quot;æˆ‘çš„IPä½å€&quot;);\n\nÂ Â Â Â Serial.println(WiFi.localIP());\n\n  \n\nÂ Â Â Â Serial.print(&quot;å­é®ç½©ç¶²è·¯:Â &quot;);\n\nÂ Â Â Â Serial.println(WiFi.subnetMask());\n\n  \n\nÂ Â Â Â Serial.print(&quot;é–˜é“ç¶²è·¯:Â &quot;);\n\nÂ Â Â Â Serial.println(WiFi.gatewayIP());\n\n  \n\nÂ Â Â Â Serial.print(&quot;DNSä½å€:Â &quot;);\n\nÂ Â Â Â Serial.println(WiFi.dnsIP());\n\n&#125;\n\nvoidÂ loop()&#123;\n\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n","categories":["esp32"],"tags":["wifi"]},{"title":"ESP32-camå¯¦ä½œ","url":"/2021/08/29/ESP32-cam%E5%AF%A6%E4%BD%9C/","content":"<h1 id=\"ESP32-camå¯¦ä½œ\"><a href=\"#ESP32-camå¯¦ä½œ\" class=\"headerlink\" title=\"ESP32-camå¯¦ä½œ\"></a>ESP32-camå¯¦ä½œ</h1><h6 id=\"tags-esp32-cam\"><a href=\"#tags-esp32-cam\" class=\"headerlink\" title=\"tags: esp32-cam\"></a>tags: <code>esp32-cam</code></h6><hr>\n<p>-<strong>åœ¨è‡‰æ›¸ç¤¾åœ˜å¾ˆå¤šå¤§å¤§åˆ†äº«ESP32ç³»åˆ—çš„æ¿å­ï¼Œæ„Ÿè¦ºå°è€Œç¾å°è€Œçœ</strong></p>\n<p><strong>èƒ½åšçš„äº‹ä¹Ÿå¾ˆå¤šï¼Œæ‰€ä»¥å°±é›†é«”æ¡æ§‹äº†ï¼’ç‰‡esp32å’Œesp32-camï¼Œå› ç‚º</strong></p>\n<p><strong>æ—©å…ˆæˆ‘æœ‰å…¥æ‰‹é…è£½å¥½çš„esp32çš„é›†æˆæ¿ï¼Œä½†å’Œé€šç”¨çš„ä¸ä¸€æ¨£ï¼Œå¥½åƒ</strong></p>\n<p><strong>æ˜¯é‚£å®¶å…¬å¸åŸºæ–¼esp32å†å‰µç ”çš„ï¼Œä½†æˆ‘å€‹äººæ˜¯ä¸å¤ªå–œæ­¡ç”¨å¸‚é¢ä¸Šä¸</strong></p>\n<p><strong>ç›¸åŒè¦æ ¼çš„æ¿å­ï¼Œæ‰€ä»¥æ‰åˆè²·äº†esp32é€šç”¨æ¿ã€‚</strong></p>\n<p><strong>é‚£å…ˆå¾esp32-camè©¦èµ·ï¼Œè½èªªå‰è¼©å€‘è¸©å‘ï¼Œæ‰€ä»¥åˆ©ç”¨è²¨é‚„æ²’åˆ°å…ˆçˆ¬æ–‡</strong></p>\n<p><strong>ï¼Œå¥½ä¸å®¹æ˜“éäº†åäº”å¤©çµ‚æ–¼åˆ°è²¨ï¼Œæ­£å¼é–‹å§‹å¯¦ä½œäº†ã€‚</strong></p>\n<hr>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-IG2vOkjYr_g/YGmJWUMFS4I/AAAAAAAAeAg/CsYgGDLlUlYE242dPXOWPTAYuJFNwRJ0QCNcBGAsYHQ/w306-h350/20210404_155013.jpg\"></a><br><img src=\"https://i.imgur.com/I8NXL4y.png\"></p>\n<hr>\n<h2 id=\"æ¥ç·šæ–¹å¼\"><a href=\"#æ¥ç·šæ–¹å¼\" class=\"headerlink\" title=\"æ¥ç·šæ–¹å¼\"></a>æ¥ç·šæ–¹å¼</h2><hr>\n<h4 id=\"ç‡’éŒ„é ˆè¦æœ‰USB-TTLçš„è½‰æ¥é ­\"><a href=\"#ç‡’éŒ„é ˆè¦æœ‰USB-TTLçš„è½‰æ¥é ­\" class=\"headerlink\" title=\"ç‡’éŒ„é ˆè¦æœ‰USB TTLçš„è½‰æ¥é ­\"></a>ç‡’éŒ„é ˆè¦æœ‰USB TTLçš„è½‰æ¥é ­</h4><p><img src=\"https://i.imgur.com/j32bpm3.png\"><br><strong>ä½†å› ç‚ºæˆ‘æ‰‹ä¸Šä¹‹å‰æœ‰è²·éé¡ä¼¼çš„è½‰æ¥ç·šï¼Œæ‰€ä»¥å°±æ²’æœ‰å†è²·è½‰æ¥é ­</strong></p>\n<p><strong>å”¯ä¸€çš„ç¼ºé»å°±æ˜¯æˆ‘æ‰‹ä¸Šé€™æ¢USB-TTLè½‰æ¥é©…å‹•ç¨‹å¼å·²ç¶“çµ•ç‰ˆï¼Œä½†</strong></p>\n<p><strong>åœ¨ç¶²ä¸Šæ‰¾é‚„æ˜¯å¯æ‰¾çš„åˆ°ï¼Œä¸€é–‹å§‹æ’å…¥USBæ˜¯ç„¡æ³•è¾¨è­˜ã€‚</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-0CIJEIGrJIA/YGmOKrk2qpI/AAAAAAAAeA8/kDpzDpUbCSIo4wFcW6-gDzHLofZfBtWvQCNcBGAsYHQ/w273-h273/images.jpg\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-ORlRmW1ZHXc/YGmOebWesvI/AAAAAAAAeBE/wqp-XeSUeewGT8uGeW_6mdVms0DHmuqawCNcBGAsYHQ/w447-h344/1562393756-3686635058.png\"></a></p>\n<hr>\n<p><strong>æŒ‰ç…§ä¸Šåœ–æ¥ç·šå¾Œï¼Œåˆ°ï¼‚è£ç½®ç®¡ç†å“¡ï¼‚ï¼Œå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å®‰è£ï¼µï¼³ï¼¢é©…å‹•</strong></p>\n<p><strong>æœƒå¦‚ä¸‹é¡¯ç¤ºï¼‚USB-serial controlï¼‚æœ‰å€‹ä¸‰è§’é©šå˜†è™Ÿ!</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-MRS_-cK3nYg/YGmP7oNK2nI/AAAAAAAAeBM/-DDNKU9Gt8M0fB-r7YZMoOoNqZxKGF1BQCNcBGAsYHQ/w443-h249/1.jpg\"></a></p>\n<p><strong>ä¸‹è¼‰<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\">PL2303_64bit_Installer</a>ï¼Œé€²å…¥ç¶²å€å¾Œé»é¸ä¸‹åœ–ç´…æ¡†è™•ä¸‹è¼‰é©…å‹•</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-7GnCQo9ZUJg/YGmRF_ueoxI/AAAAAAAAeBU/y292EXqa5MIevfUHVO8T-3FWYCmKyjdewCNcBGAsYHQ/w427-h240/1.jpg\"></a></p>\n<p><strong>è§£å£“å¾Œå®‰è£è»Ÿé«”</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-8Gl2Tfo2FcQ/YGmRdkQoW0I/AAAAAAAAeBc/y99qiFEWepsza-tYxkol_aVOHBHeSPjxACNcBGAsYHQ/w490-h276/1.jpg\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-T2G-LewhLQ0/YGmRrAQjMDI/AAAAAAAAeBg/gp1kamt2GWMdi8tB9gCOaGUypwRHZVWhQCNcBGAsYHQ/w426-h240/1.jpg\"></a></p>\n<p><strong>æŒ‰ä¸‹â€finshï¼‚æœƒè‡ªå‹•é‡å•“é›»è…¦</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-Sf28JI3q4uc/YGmR92n-UDI/AAAAAAAAeBs/p99mswf_9i8ymjplFYWtHTf03L677Yl4QCNcBGAsYHQ/w424-h239/1.jpg\"></a></p>\n<p><strong>é‡é–‹æ©Ÿå¾Œï¼Œå†åˆ°â€è£ç½®ç®¡ç†å“¡ï¼‚ï¼Œ ä»¥æˆ‘çš„ç­†é›»æ˜¯com7å°±å‡ºç¾äº†</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-4zSMNpvu-jI/YGmUTdUf1rI/AAAAAAAAeB0/wzwo-lTSoI87nEsncW0dmdL0nqUNxa46ACNcBGAsYHQ/w452-h254/1.jpg\"></a></p>\n<hr>\n<h2 id=\"æ¥ä¸‹ä¾†åˆ°Arduino-IDE\"><a href=\"#æ¥ä¸‹ä¾†åˆ°Arduino-IDE\" class=\"headerlink\" title=\"æ¥ä¸‹ä¾†åˆ°Arduino IDE\"></a>æ¥ä¸‹ä¾†åˆ°Arduino IDE</h2><p><strong>å› ç‚ºIDEè£¡æ²’æœ‰ESP32çš„åº« ï¼Œæ‰€ä»¥è¦å…ˆæ“´å¢</strong></p>\n<p><strong>åˆ°ï¼‚æª”æ¡ˆ-&gt;åå¥½è¨­å®šï¼‚è£¡ï¼Œï¼‚é¡å¤–çš„é–‹ç™¼æ¿ç®¡ç†å“¡ç¶²å€ï¼‚è²¼ä¸Šä»¥ä¸‹ç¶²å€</strong></p>\n<p><strong><a href=\"https://dl.espressif.com/dl/package/_esp32/_index.json%EF%BC%8C%E4%B8%A6%E6%8C%89%E7%A2%BA%E5%AE%9A\">https://dl.espressif.com/dl/package\\_esp32\\_index.jsonï¼Œä¸¦æŒ‰ç¢ºå®š</a></strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-Z0BIUuFp-Sk/YGmVoELnJyI/AAAAAAAAeB8/ni-B6jxLZbAG3r4OvSIiqWTiLrWoF3TngCNcBGAsYHQ/w460-h259/1.jpg\"></a></p>\n<p><strong>ç„¶å¾Œåˆ°ï¼‚å·¥å…·ï¼‚â€”ï¼ï¼‚é–‹ç™¼æ¿ç®¡ç†å“¡ï¼‚æœå°‹â€esp32ï¼‚ï¼Œæœƒå‡ºç¾å°æ‡‰çš„</strong></p>\n<p><strong>åº«ï¼Œé¸æ“‡ï¼‚å®‰è£ï¼‚ã€‚</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-F0WNedLy2Uk/YGmZZ7xPzfI/AAAAAAAAeCE/FqUlSPxlqVkcoAA6Gx6epLibKKJsT1XbQCNcBGAsYHQ/w434-h244/2.jpg\"></a></p>\n<p><strong>å®‰è£å¥½å¾Œä¸€æ¨£åœ¨ï¼‚å·¥å…·ï¼‚åº•ä¸‹ï¼Œé¸æ“‡ï¼‚ESP32 Arduinoï¼‚-&gt;â€ESP32 Wrrover Moduleâ€</strong></p>\n<p><strong>ä¸¦é¸æ“‡å°æ‡‰çš„åºåˆ—åŸ (com)</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-rWDqD0dz2qc/YGmakbrRnGI/AAAAAAAAeCM/s3df9UK3zRIrxBhr6C5lY1v3XzpmSGkLQCNcBGAsYHQ/w479-h270/1.jpg\"></a></p>\n<p><strong>å› ç‚ºwifiå³æ™‚çš„æµé‡è¦æ¯”è¼ƒå¤§ï¼Œä¸”è€—èƒ½ï¼Œæ‰€ä»¥å†å¦æŠŠä»¥ä¸‹é€™å€‹é¸æ“‡æ”¹ä¸€ä¸‹</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-gf7kO8q5y38/YGmbLCcvtEI/AAAAAAAAeCU/z0jC6RtDGbMVCJRXdTumt6URuxFQzT08ACNcBGAsYHQ/w421-h237/2.jpg\"></a></p>\n<p><strong>å†åˆ°â€ç¯„ä¾‹ï¼‚åº•ä¸‹åŒ¯å…¥ç¯„ä¾‹</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-cnsDAyIqb_c/YGmcJ4-UPuI/AAAAAAAAeCc/rWqVlsd-ke4YfrkN13yliiMV2x21gPFywCNcBGAsYHQ/w478-h269/2.jpg\"></a></p>\n<p><strong>é€™è£¡æœ‰å¹¾å€‹åœ°æ–¹è¦æ›´æ”¹ä¸€ä¸‹è¨­ç½®</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-kaulw1wcg1w/YGmdFDhEwBI/AAAAAAAAeCk/70Ycqy_IG_0-HAHfFxRiJ4W9V3-9oN2zwCNcBGAsYHQ/w514-h289/2.jpg\"></a></p>\n<hr>\n<p><strong>éƒ½è¨­ç½®å¥½äº†ä¹‹å¾Œï¼Œå…ˆæŠŠæ¿å­ä¸Šçš„ï¼©ï¼¯ï¼å’Œï¼§ï¼®ï¼¤çŸ­æ¥èµ·ä¾†ã€‚</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-3knPVurgzB0/YGmgfPGKXfI/AAAAAAAAeCs/c9U4ihOIFXwLNHRMvAdXPbOwRdFj7jvkgCNcBGAsYHQ/w436-h413/20210404_191546.jpg\"></a></p>\n<p><strong>æ¥ä¸‹ä¾†æŒ‰ä¸‹â€ä¸Šå‚³ï¼‚</strong></p>\n<p><strong>â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦æ™‚é–“ç´„6åˆ†é˜ï¼Œå¯ä»¥å–å£æ°´</strong></p>\n<p><strong>å¯«å…¥ç¨‹å¼å¾Œæœ€å¾Œå‡ºç¾ä¸‹åœ–ï¼Œé€™æ™‚æŠŠçŸ­æ¥æ‹”æ‰ä¸¦REST</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-b_dwGskTofY/YGmiH2rDZwI/AAAAAAAAeC0/RIFbmrKvELkQLfHSEy3EZBcxpQeuwgsLgCNcBGAsYHQ/w418-h235/2.jpg\"></a></p>\n<hr>\n<p><strong>ç„¶å¾Œé–‹å•“â€ç›£æ§è¢å¹•â€ï¼Œå®ƒæœƒçµ¦ä¸€çµ„ï¼©ï¼°ï¼Œç”¨ç€è¦½å™¨ç™»å…¥</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-aIu_JpV1Vb0/YGmiv6GgpvI/AAAAAAAAeC8/qagkETKhQ0kUiqzfZLsE6TMPUO8cSiSIACNcBGAsYHQ/w441-h248/2.jpg\"></a></p>\n<p><strong>ç„¶å¾ŒæˆåŠŸäº†å°±æœƒé€²å…¥ä»¥ä¸‹ç•«é¢</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-3iwr7LwXbN8/YGmkZ7oslaI/AAAAAAAAeDE/iFIaXkzSu8Yc6r-PH-_qAtYcKleMXOM3wCNcBGAsYHQ/w463-h253/2.jpg\"></a></p>\n<p><strong>ç•«é¢å·¦ä¸‹æ–¹â€start streamâ€æŒ‰ä¸‹ï¼Œç›£æ§é »å°±æœƒå‡ºç¾</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2908832685289288450#\"><img src=\"https://1.bp.blogspot.com/-GYoCegVuku0/YGmlmlN3_dI/AAAAAAAAeDM/G8yTthhipZI8i_zpatL0m7t-dcEmDL2NgCNcBGAsYHQ/w552-h272/2.jpg\"></a></p>\n<p><strong>è½èªªé‚„æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œä¾‹å¦‚äººè‡‰è¾¨è­˜ï¼Œä¹Ÿå¯ç½®å…¥ä¸€äº›åƒæ•¸ï¼Œåšåˆ·è‡‰é–€ç¦ç­‰ç­‰â€¦.</strong></p>\n<p>**ç­‰æœ‰ç©ºå†ä¾†æ‰¾æ‰¾é€™é¡è³‡æ–™ã€‚<br>**</p>\n","categories":["esp32 cam"],"tags":["esp32 cam"]},{"title":"ESP32-Camè¦–è¨Šå°è»Š","url":"/2021/08/29/ESP32-Cam%E8%A6%96%E8%A8%8A%E5%B0%8F%E8%BB%8A/","content":"<h1 id=\"ESP32-Camè¦–è¨Šå°è»Š\"><a href=\"#ESP32-Camè¦–è¨Šå°è»Š\" class=\"headerlink\" title=\"ESP32-Camè¦–è¨Šå°è»Š\"></a>ESP32-Camè¦–è¨Šå°è»Š</h1><h6 id=\"tags-esp32-cam\"><a href=\"#tags-esp32-cam\" class=\"headerlink\" title=\"tags: esp32-cam\"></a>tags: <code>esp32-cam</code></h6><p><strong>æƒ³ä¸åˆ°ç¾åœ¨æœ‰äº†ESP32-CamçœŸæ˜¯æ–¹ä¾¿ï¼Œçµ„è£è»Šèº«ä¸Šæ•´å€‹æ¤å…¥</strong></p>\n<p><strong>ç¯„ä¾‹ç¨‹å¼ï¼Œå¤§æ¦‚ï¼‘å°æ™‚ä¸ç­‰å°±å…¨éƒ¨å®Œæˆã€‚</strong></p>\n<p><strong>æˆ‘æ˜¯åƒç…§ä¸€ä½åœ‹å¤–çš„å¤§å¤§çš„è£½ä½œ</strong>-<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/8416915322345407552#\">https://youtu.be/Wfpvj9KlEMs</a></p>\n<hr>\n<h2 id=\"ææ–™\"><a href=\"#ææ–™\" class=\"headerlink\" title=\"ææ–™\"></a>ææ–™</h2><ol>\n<li> <strong>é¦¬é”x1</strong></li>\n<li> <strong>L298N x1</strong></li>\n<li> <strong>åº•ç›¤æˆ–è»Šèº« x1</strong></li>\n<li> <strong>ESP32-Cam x1</strong></li>\n<li> <strong>18650ä¸²æ¥é›»æ± ç›’ x1</strong></li>\n<li> <strong>18650é›»æ±  x2</strong></li>\n<li> <strong>æœé‚¦ç·š</strong></li>\n</ol>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><ul>\n<li>  å…ˆåˆ°æ­¤é é¢æœ€åº•ä¸‹ï¼Œä¸‹è¼‰å°è»Šç¯„ä¾‹-<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/8416915322345407552#\">https://www.viralsciencecreativity.com/post/esp32-cam-surveillance-spy-camera-car</a></li>\n<li>  ä¸‹è¼‰å®Œå¾Œè§£å£“ç¸®ï¼Œå°‡æ•´å€‹è³‡æ–™å¤¾æ”¾å…¥Arduinoè£¡çš„libraryè³‡æ–™å¤¾è£¡.ï¼Œç„¶å¾Œå¾ç¯„ä¾‹è£¡æ‰¾åˆ°å°è»Šç¯„ä¾‹ã€‚</li>\n<li>  æ›´æ”¹è‡ªå·±çš„WIFIåç¨±å’Œå¯†ç¢¼ï¼Œé¸å–ä¸Šå‚³(å¦‚æœä¸æœƒä¸Šå‚³ESP32CAMå¯ä»¥çœ‹ä¸€ä¸‹é€™ä¸€ç¯‡-[<a href=\"https://esp32-blairan.blogspot.com/2021/04/esp32-cam.htm]\">https://esp32-blairan.blogspot.com/2021/04/esp32-cam.htm]</a></li>\n</ul>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/8416915322345407552?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-Di2phCbK_C4/YMK_QwaxbuI/AAAAAAAAeRU/c0k5do3OCBckqzA0ZeNfxX8095dSnHITQCNcBGAsYHQ/s1600/1623375629694103-0.png\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/8416915322345407552?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-FB_Pb4_d9rg/YMK-fcW9RSI/AAAAAAAAeRA/C2psKg3sXnQ1MDd-YGw7C00cUNlfVb-FgCNcBGAsYHQ/s1600/1623375426928438-1.png\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/8416915322345407552?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-A5IFpKhPTDA/YMK-QOJbRzI/AAAAAAAAeQ8/fXRsejo6DY4AItogU3cn1qZknIe-zw5KACNcBGAsYHQ/s1600/1623375369965993-2.png\"></a></p>\n<h2 id=\"æ¥ç·š\"><a href=\"#æ¥ç·š\" class=\"headerlink\" title=\"æ¥ç·š\"></a>æ¥ç·š</h2><ul>\n<li>  æ¥è‘—å°±å¯ä»¥é–‹å§‹çµ„è£è»Šèº«ä¸¦æŠŠè…³ä½å°æ‡‰L298Næ’ä¸Šã€‚</li>\n</ul>\n<p><img src=\"https://static.wixstatic.com/media/c901e7_50da7f5d492a4096b8d8ec78a96e5978~mv2.png/v1/fill/w_740,h_581,al_c,q_90/c901e7_50da7f5d492a4096b8d8ec78a96e5978~mv2.webp\"></p>\n<hr>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/QT0z2qLUymk\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n","categories":["esp32 cam"],"tags":["esp32 camè¨Šè¦–å°è»Š"]},{"title":"PWM-å‘¼å¸ç‡ˆ-mpython","url":"/2021/08/29/PWM-%E5%91%BC%E5%90%B8%E7%87%88-mpython/","content":"<h1 id=\"PWM-å‘¼å¸ç‡ˆ-mpython\"><a href=\"#PWM-å‘¼å¸ç‡ˆ-mpython\" class=\"headerlink\" title=\"PWM-å‘¼å¸ç‡ˆ-mpython\"></a>PWM-å‘¼å¸ç‡ˆ-mpython</h1><h6 id=\"tags-micropython\"><a href=\"#tags-micropython\" class=\"headerlink\" title=\"tags: micropython\"></a>tags: <code>micropython</code></h6><h2 id=\"æ‰€éœ€é›¶ä»¶\"><a href=\"#æ‰€éœ€é›¶ä»¶\" class=\"headerlink\" title=\"æ‰€éœ€é›¶ä»¶\"></a>æ‰€éœ€é›¶ä»¶</h2><ul>\n<li>  ESP32</li>\n<li>  5mm LED</li>\n<li>  330 æ­å§†é›»é˜»</li>\n<li>  éºµåŒ…æ¿</li>\n<li>  è·³ç·š</li>\n</ul>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/7086602446312056740?hl=zh-TW#\"><img src=\"https://i1.wp.com/randomnerdtutorials.com/wp-content/uploads/2019/04/PWM_esp32_bb.png?w=1065&quality=100&strip=all&ssl=1\"></a></p>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><p><strong><em>åƒç…§â€“æˆ‘çš„</em></strong><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/7086602446312056740?hl=zh-TW#\">micropythonå‡½å¼ç­†è¨˜æœ¬</a></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\"><span class=\"token keyword\">from</span> machine <span class=\"token keyword\">import</span> Pin<span class=\"token punctuation\">,</span> PWM\n\n<span class=\"token keyword\">from</span> time <span class=\"token keyword\">import</span> sleep\n\n\nled <span class=\"token operator\">=</span> PWM<span class=\"token punctuation\">(</span>Pin<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> freq<span class=\"token operator\">=</span><span class=\"token number\">5000</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">for</span> duty_cycle1 <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n        led<span class=\"token punctuation\">.</span>duty<span class=\"token punctuation\">(</span>duty_cycle1<span class=\"token punctuation\">)</span>\n\n        sleep<span class=\"token punctuation\">(</span><span class=\"token number\">0.05</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">for</span> duty_cycle2 <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n        led<span class=\"token punctuation\">.</span>duty<span class=\"token punctuation\">(</span>duty_cycle2<span class=\"token punctuation\">)</span>\n\n        sleep<span class=\"token punctuation\">(</span><span class=\"token number\">0.05</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/Hw_L3j1hgvQ\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>","categories":["micropython","esp32"],"tags":["å‘¼å¸ç‡ˆ"]},{"title":"DHT11/DHT12æº«æº¼åº¦å‚³æ„Ÿå™¨å¯¦é©—-micropython","url":"/2021/08/29/DHT11-DHT12%E6%BA%AB%E6%BA%BC%E5%BA%A6%E5%82%B3%E6%84%9F%E5%99%A8%E5%AF%A6%E9%A9%97-micropython/","content":"<h1 id=\"DHT11-DHT12æº«æº¼åº¦å‚³æ„Ÿå™¨å¯¦é©—-micropython\"><a href=\"#DHT11-DHT12æº«æº¼åº¦å‚³æ„Ÿå™¨å¯¦é©—-micropython\" class=\"headerlink\" title=\"DHT11/DHT12æº«æº¼åº¦å‚³æ„Ÿå™¨å¯¦é©—-micropython\"></a>DHT11/DHT12æº«æº¼åº¦å‚³æ„Ÿå™¨å¯¦é©—-micropython</h1><h6 id=\"tags-micropython-dht11-dht12\"><a href=\"#tags-micropython-dht11-dht12\" class=\"headerlink\" title=\"tags: micropython dht11/dht12\"></a>tags: <code>micropython</code> <code>dht11/dht12</code></h6><p><strong>åŸºæœ¬ä»‹ç´¹å’Œå¯¦é©—åƒè€ƒ-</strong><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2565290853340818706?hl=zh-TW#\">https://esp32-blairan.blogspot.com/2021/07/dht11dht12-esp32.html</a></p>\n<hr>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2565290853340818706?hl=zh-TW#\"><img src=\"http://2.bp.blogspot.com/-3syBdItbhrI/Vb6X8sJx7tI/AAAAAAAAEO8/cMmlSOV142M/s320/dht11.jpg\"></a></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\"><span class=\"token keyword\">import</span> dht\n\n<span class=\"token keyword\">from</span> machine <span class=\"token keyword\">import</span> Pin\n\n<span class=\"token keyword\">from</span> time <span class=\"token keyword\">import</span> sleep\n\n<span class=\"token keyword\">def</span> measureTemp<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    sensor<span class=\"token operator\">=</span>dht<span class=\"token punctuation\">.</span>DHT11<span class=\"token punctuation\">(</span>Pin<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n\n        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n\n            sleep<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\n            sensor<span class=\"token punctuation\">.</span>measure<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            t<span class=\"token operator\">=</span>sensor<span class=\"token punctuation\">.</span>temperature<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            t_f<span class=\"token operator\">=</span>t<span class=\"token operator\">*</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token operator\">/</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">32</span>\n\n            h<span class=\"token operator\">=</span>sensor<span class=\"token punctuation\">.</span>humidity<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Temp: &#123;:.1f&#125;.C\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Temp: &#123;:.1f&#125;.F\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>t_f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Humidity: &#123;:.1f&#125;\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">except</span> OSError <span class=\"token keyword\">as</span> o<span class=\"token punctuation\">:</span>\n\n            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Failed to read sensor.\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n\n    measureTemp<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>è¼‰å…¥dhtåº«(å…§å»º)</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\"><span class=\"token keyword\">import</span> dht\n\n<span class=\"token keyword\">from</span> machine <span class=\"token keyword\">import</span> Pin\n\n<span class=\"token keyword\">from</span> time <span class=\"token keyword\">import</span> sleep<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>æŒ‡å®šDHT11è…³ä½çµ¦sensorè®Šæ•¸</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">sensor<span class=\"token operator\">=</span>dht<span class=\"token punctuation\">.</span>DHT11<span class=\"token punctuation\">(</span>Pin<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>çµ¦äºˆwhile()æ¯2ç§’ä¸æ–·åµæ¸¬</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">sleep<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\nsensor<span class=\"token punctuation\">.</span>measure<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>æ”æ°æº«åº¦(t)/è¯æ°æº«åº¦(t_f)/æ¿•åº¦</strong></p>\n<p><strong>å…¶ä¸­æ”æ°è½‰æ›è¯æ°çš„å…¬å¼:æ”æ°x(9/5)+32</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">t<span class=\"token operator\">=</span>sensor<span class=\"token punctuation\">.</span>temperature<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nt_f<span class=\"token operator\">=</span>t<span class=\"token operator\">*</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token operator\">/</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">32</span>\n\nh<span class=\"token operator\">=</span>sensor<span class=\"token punctuation\">.</span>humidity<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Temp: &#123;:.1f&#125;.C\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Temp: &#123;:.1f&#125;.F\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>t_f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Humidity: &#123;:.1f&#125;\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"çµæœ\"><a href=\"#çµæœ\" class=\"headerlink\" title=\"çµæœ\"></a>çµæœ</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">&#x3D;&#x3D;&#x3D;Â Temp:Â 26.0.C\n\nTemp:Â 78.8.F\n\nHumidity:Â 27.0\n\nTemp:Â 26.0.C\n\nTemp:Â 78.8.F\n\nHumidity:Â 27.0\n\nTemp:Â 26.0.C\n\nTemp:Â 78.8.F\n\nHumidity:Â 27.0<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","categories":["micropython","esp32"],"tags":["dht11/dht12"]},{"title":"0.96OLEDå¯¦ä½œ-micropython","url":"/2021/08/29/0-96OLED%E5%AF%A6%E4%BD%9C-micropython/","content":"<h1 id=\"0-96OLEDå¯¦ä½œ-micropython\"><a href=\"#0-96OLEDå¯¦ä½œ-micropython\" class=\"headerlink\" title=\"0.96OLEDå¯¦ä½œ-micropython\"></a>0.96OLEDå¯¦ä½œ-micropython</h1><h6 id=\"tags-micropython-0-96oled\"><a href=\"#tags-micropython-0-96oled\" class=\"headerlink\" title=\"tags: micropython 0.96oled\"></a>tags: <code>micropython</code> <code>0.96oled</code></h6><h2 id=\"ssd1306æ¨¡çµ„\"><a href=\"#ssd1306æ¨¡çµ„\" class=\"headerlink\" title=\"ssd1306æ¨¡çµ„\"></a>ssd1306æ¨¡çµ„</h2><p><strong>å…ˆå°‡<a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2255135354625309493?hl=zh-TW#\">ssd1306.py</a>æª”å’Œmain.pyæ”¾åœ¨ä¸€èµ·æ‰èƒ½å‘¼å«åˆ°ssd1306æ¨¡çµ„</strong></p>\n<h2 id=\"æ¥ç·š\"><a href=\"#æ¥ç·š\" class=\"headerlink\" title=\"æ¥ç·š\"></a>æ¥ç·š</h2><p><strong>21Â  SCL</strong></p>\n<p><strong>22Â  SDA</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2255135354625309493?hl=zh-TW#\"><img src=\"https://i2.wp.com/randomnerdtutorials.com/wp-content/uploads/2019/05/ESP32_OLED.png?w=873&quality=100&strip=all&ssl=1\"></a></p>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\"><span class=\"token keyword\">import</span> ssd1306 <span class=\"token comment\">#åŒ¯å…¥oledæ¨¡çµ„</span>\n\n<span class=\"token keyword\">from</span> machine <span class=\"token keyword\">import</span> Pin<span class=\"token punctuation\">,</span> SoftI2C <span class=\"token comment\">#åŒ¯å…¥i2cç›¸é—œæ¨¡çµ„å’Œè…³ä½æ¨¡çµ„</span>\n\n  \n\ni2c<span class=\"token operator\">=</span>SoftI2C<span class=\"token punctuation\">(</span>scl<span class=\"token operator\">=</span>Pin<span class=\"token punctuation\">(</span><span class=\"token number\">22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> sda<span class=\"token operator\">=</span>Pin<span class=\"token punctuation\">(</span><span class=\"token number\">21</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#è¨­å®ši2cè…³ä½</span>\n\nwidth<span class=\"token operator\">=</span><span class=\"token number\">128</span> <span class=\"token comment\">#oledé«˜</span>\n\nheight<span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token comment\">#oledå¯›</span>\n\noled<span class=\"token operator\">=</span>ssd1306<span class=\"token punctuation\">.</span>SSD1306_I2C<span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">,</span> i2c<span class=\"token punctuation\">)</span> <span class=\"token comment\">#è³¦äºˆè®Šæ•¸çµ¦è¨­åˆ¶å¥½çš„ssd1306æ¨¡çµ„,ä¸¦çµ¦äºˆæ‰€é ˆåƒæ•¸</span>\n\n  \n\n<span class=\"token comment\">#oled.text(\"æ–‡å­—\", x, y, col=0/1)</span>\n\n<span class=\"token comment\">#xæ˜¯ç¸±è»¸ä½ç½®</span>\n\n<span class=\"token comment\">#yæ˜¯æ©«è»¸ä½ç½®</span>\n\n<span class=\"token comment\">#col=æ˜¯é¡è‰²,0-BLACK,1-WHITE</span>\n\noled<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello world!\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> col<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\noled<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">(</span><span class=\"token string\">\"ESP32 NICE!\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> col<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\noled<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">(</span><span class=\"token string\">\"i am CTK\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> col<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">#oled.invert(True) #èƒŒæ™¯å…¨é¡¯</span>\n\noled<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#é¡¯ç¤ºæ–¼oledä¸Š</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2255135354625309493?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-k9n260VQuDA/YOexfePzh5I/AAAAAAAAeag/Fu7ZGxbHb9s63zR5_q-D06nDEPyzIWOHgCNcBGAsYHQ/s1600/1625796956591112-0.png\"></a></p>\n","categories":["micropython","esp32"],"tags":["oled"]},{"title":"è¶…éŸ³æ³¢æ¸¬è·(HC-SR04)&ç¶²é é¡¯ç¤º(wifi_server)","url":"/2021/08/29/%E8%B6%85%E9%9F%B3%E6%B3%A2%E6%B8%AC%E8%B7%9D-HC-SR04-%E7%B6%B2%E9%A0%81%E9%A1%AF%E7%A4%BA-wifi-server/","content":"<h1 id=\"è¶…éŸ³æ³¢æ¸¬è·-HC-SR04-amp-ç¶²é é¡¯ç¤º-wifi-server\"><a href=\"#è¶…éŸ³æ³¢æ¸¬è·-HC-SR04-amp-ç¶²é é¡¯ç¤º-wifi-server\" class=\"headerlink\" title=\"è¶…éŸ³æ³¢æ¸¬è·(HC-SR04)&amp;ç¶²é é¡¯ç¤º(wifi_server)\"></a>è¶…éŸ³æ³¢æ¸¬è·(HC-SR04)&amp;ç¶²é é¡¯ç¤º(wifi_server)</h1><h6 id=\"tags-micropython-HC-SR04-amp-wifi\"><a href=\"#tags-micropython-HC-SR04-amp-wifi\" class=\"headerlink\" title=\"tags: micropython HC-SR04&amp;wifi\"></a>tags: <code>micropython</code> <code>HC-SR04&amp;wifi</code></h6><p>Â <strong>è¶…éŸ³æ³¢æ¸¬è·åƒè€ƒ-</strong><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7733761810113940833?hl=zh-TW#\">https://esp32-blairan.blogspot.com/2021/07/blog-post.html</a></p>\n<h2 id=\"æ¥ç·š\"><a href=\"#æ¥ç·š\" class=\"headerlink\" title=\"æ¥ç·š\"></a>æ¥ç·š</h2><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7733761810113940833?hl=zh-TW#\"><img src=\"https://lemariva.com/storage/temp/public/295/644/a2e/esp32_bb__750.png\"></a></p>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;Arduino.h&gt;\n\n#include &lt;WiFi.h&gt;\n\n#include &lt;ESPAsyncWebServer.h&gt;\n\n#include &lt;Ultrasonic.h&gt;\n\n  \n\n&#x2F;&#x2F;Â ---------------------Â Â Â Â Â ---------------------Â Â Â Â Â -------------------\n\n&#x2F;&#x2F;Â Â *Â |Â HC-SC04Â |Â ArduinoÂ |Â Â Â Â Â |Â PING)))Â |Â ArduinoÂ |Â Â Â Â Â |Â SeeedÂ |Â ArduinoÂ |\n\n&#x2F;&#x2F;Â Â *Â ---------------------Â Â Â Â Â ---------------------Â Â Â Â Â -------------------\n\n&#x2F;&#x2F;Â Â *Â |Â Â Â VccÂ Â Â |Â Â Â 5VÂ Â Â Â |Â Â Â Â Â |Â Â Â VccÂ Â Â |Â Â Â 5VÂ Â Â Â |Â Â Â Â Â |Â Â VccÂ Â |Â Â Â 5VÂ Â Â Â |\n\n&#x2F;&#x2F;Â Â *Â |Â Â Â TrigÂ Â |Â Â Â 12Â Â Â Â |Â ANDÂ |Â Â Â SIGÂ Â Â |Â Â Â 10Â Â Â Â |Â ANDÂ |Â Â SIGÂ Â |Â Â Â Â 8Â Â Â Â |\n\n&#x2F;&#x2F;Â Â *Â |Â Â Â EchoÂ Â |Â Â Â 13Â Â Â Â |Â Â Â Â Â |Â Â Â GndÂ Â Â |Â Â Â GNDÂ Â Â |Â Â Â Â Â |Â Â GndÂ Â |Â Â Â GNDÂ Â Â |\n\n&#x2F;&#x2F;Â Â *Â |Â Â Â GndÂ Â Â |Â Â Â GNDÂ Â Â |Â Â Â Â Â ---------------------Â Â Â Â Â -------------------\n\n&#x2F;&#x2F;Â Â *Â ---------------------\n\n  \n\nconstÂ char*Â ssid&#x3D;&quot;åŸºåœ°å°åç¨±&quot;;\n\nconstÂ char*Â password&#x3D;&quot;åŸºåœ°å°å¯†ç¢¼&quot;;\n\nAsyncWebServerÂ server(80);\n\nUltrasonicÂ ultrasonic1(32,Â 33);Â &#x2F;&#x2F;ultrasonic(trig,Â echo)\n\n  \n\nconstÂ charÂ indexHtml\\[\\]Â PROGMEMÂ &#x3D;Â R&quot;&#x3D;&#x3D;&#x3D;(\n\nÂ Â Â Â &lt;html&gt;\n\n&lt;head&gt;\n\nÂ Â Â Â &lt;metaÂ charset&#x3D;&quot;utf-8&quot;Â &#x2F;&gt;\n\nÂ Â Â Â &lt;metaÂ http-equiv&#x3D;&quot;refresh&quot;Â content&#x3D;&quot;0.5&quot;Â &#x2F;&gt;\n\nÂ Â Â Â &lt;metaÂ name&#x3D;&quot;viewport&quot;Â content&#x3D;&quot;width&#x3D;device-width,Â initial-scale&#x3D;1.0&quot;Â &#x2F;&gt;\n\nÂ Â Â Â &lt;style&gt;\n\nÂ Â Â Â Â Â Â Â h1Â &#123;text-align:Â center;Â background-color:Â rgb(226,Â 155,Â 23);Â color:Â rgb(47,Â 49,Â 42);Â margin-right:Â 5px;&#125;\n\nÂ Â Â Â Â Â Â Â dlÂ &#123;width:Â 320px;Â margin:Â auto;&#125;\n\nÂ Â Â Â Â Â Â Â dtÂ &#123;font-size:Â 20pt;Â color:Â rgb(36,Â 45,Â 168);Â background-color:Â rgb(197,Â 194,Â 11);\n\nÂ Â Â Â Â Â Â Â Â Â Â Â margin:Â 6ptÂ 0;Â padding:Â 6ptÂ 12pt;&#125;\n\nÂ Â Â Â Â Â Â Â ddÂ &#123;text-align:Â left;Â padding-right:Â 6pt;&#125;\n\nÂ Â Â Â Â Â Â Â .valÂ &#123;Â font-size:Â 30pt;Â color:Â rgb(255,Â 120,Â 30);Â &#125;\n\nÂ Â Â Â &lt;&#x2F;style&gt;\n\n&lt;&#x2F;head&gt;\n\n&lt;body&gt;\n\nÂ Â Â Â &lt;p&gt;&lt;h1&gt;HC-SR04è¶…éŸ³æ³¢æ¸¬è·å¯¦é©—&lt;&#x2F;h1&gt;&lt;&#x2F;p&gt;\n\nÂ Â Â Â &lt;dl&gt;\n\nÂ Â Â Â Â Â Â Â &lt;dt&gt;åµæ¸¬ç‰©é«”è·é›¢&lt;&#x2F;dt&gt;\n\nÂ Â Â Â Â Â Â Â &lt;ddÂ class&#x3D;val&gt;%distance%Â å…¬åˆ†&lt;&#x2F;dd&gt;\n\nÂ Â Â Â &lt;&#x2F;dl&gt;\n\n&lt;&#x2F;body&gt;\n\n&lt;&#x2F;html&gt;\n\n)&#x3D;&#x3D;&#x3D;&quot;;\n\n  \n\nStringÂ readDist()&#123;\n\nÂ Â Â Â unsignedÂ intÂ distance&#x3D;ultrasonic1.read(CM);\n\nÂ Â Â Â Serial.print(distance);Â Serial.println(&quot;Â CM&quot;);\n\nÂ Â Â Â returnÂ String(distance);\n\n&#125;\n\nStringÂ hcsr04Processors(String(value))&#123;\n\nÂ Â Â Â ifÂ (value&#x3D;&#x3D;&quot;distance&quot;)&#123;\n\nÂ Â Â Â Â Â Â Â returnÂ readDist();\n\nÂ Â Â Â &#125;\n\n&#125;\n\n  \n\nvoidÂ setup()&#123;\n\nÂ Â Â Â Serial.begin(115200);\n\nÂ Â Â Â WiFi.begin(ssid,Â password);\n\nÂ Â Â Â whileÂ (WiFi.status()Â !&#x3D;Â WL_CONNECTED)&#123;\n\nÂ Â Â Â Â Â Â Â Serial.print(&quot;.&quot;);\n\nÂ Â Â Â Â Â Â Â delay(500);\n\nÂ Â Â Â &#125;\n\nÂ Â Â Â Serial.println(&quot;ConnectedÂ successful!&quot;);\n\nÂ Â Â Â Serial.print(&quot;IP:Â &quot;);Â Serial.println(WiFi.localIP());\n\nÂ Â Â Â server.on(&quot;&#x2F;&quot;,Â HTTP_GET,Â \\[\\](AsyncWebServerRequestÂ *request)&#123;\n\nÂ Â Â Â Â Â Â Â request-&gt;send_P(200,Â &quot;text&#x2F;html&quot;,Â indexHtml,Â hcsr04Processors);\n\nÂ Â Â Â &#125;);\n\nÂ Â Â Â server.on(&quot;&#x2F;distance&quot;,Â HTTP_GET,Â \\[\\](AsyncWebServerRequestÂ *request)&#123;\n\nÂ Â Â Â Â Â Â Â request-&gt;send_P(200,Â &quot;text&#x2F;plain&quot;,Â readDist().c_str());\n\nÂ Â Â Â &#125;);\n\nÂ Â Â Â server.begin();\n\n&#125;\n\n  \n\nvoidÂ loop()&#123;\n\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"è§£èªª\"><a href=\"#è§£èªª\" class=\"headerlink\" title=\"è§£èªª\"></a>è§£èªª</h2><p><em><strong>åŒ¯å…¥WiFiå’Œè¶…éŸ³æ³¢åŠç¶²è·¯ä¼ºæœå™¨æ¨¡çµ„</strong></em></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">#include &lt;WiFi.h&gt;\n\n#include &lt;ESPAsyncWebServer.h&gt;\n\n#include &lt;Ultrasonic.h&gt;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong><em>å®šç¾©åŸºåœ°å°åç¨±å’Œå¯†ç¢¼,ä¸¦æŒ‡å®šç«¯å£è™Ÿ80åŸ </em></strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">const char* ssidÂ &#x3D;Â &quot;åŸºåœ°å°åç¨±&quot;;\n\nconst char* passwordÂ &#x3D; &quot;åŸºåœ°å°å¯†ç¢¼&quot;;\n\n\nAsyncWebServer server(80);\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong><em>é€™å€‹æ¨¡çµ„æ˜¯å‘¼å¸è¶…éŸ³æ³¢ç”¨çš„</em></strong></p>\n<pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;Ultrasonic.h></span></span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><strong><em>è¨­åˆ¶è¶…éŸ³æ³¢è…³ä½</em></strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">Ultrasonic ultrasonic1(32,Â 33);Â &#x2F;&#x2F;ultrasonic(trig,Â echo)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong><em>å‰ç«¯ç¶²é </em></strong></p>\n<p>é€™ä¸€è¡Œæ˜¯æ¯éš”0.5ç§’è‡ªå‹•æ›´æ–°ä¸€æ¬¡ç¶²é Â <metaÂ http-equiv=\"refresh\"Â content=\"0.5\"Â /></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">constÂ charÂ indexHtml[]Â PROGMEMÂ &#x3D;Â R&quot;&#x3D;&#x3D;&#x3D;(\n\nÂ Â Â Â &lt;html&gt;\n\n&lt;head&gt;\n\nÂ Â Â Â &lt;metaÂ charset&#x3D;&quot;utf-8&quot;Â &#x2F;&gt;\n\nÂ Â Â Â &lt;metaÂ http-equiv&#x3D;&quot;refresh&quot;Â content&#x3D;&quot;0.5&quot;Â &#x2F;&gt;\n\nÂ Â Â Â &lt;metaÂ name&#x3D;&quot;viewport&quot;Â content&#x3D;&quot;width&#x3D;device-width,Â initial-scale&#x3D;1.0&quot;Â &#x2F;&gt;\n\nÂ Â Â Â &lt;style&gt;\n\nÂ Â Â Â Â Â Â Â h1Â &#123;text-align:Â center;Â background-color:Â rgb(226,Â 155,Â 23);Â color:Â rgb(47,Â 49,Â 42);Â margin-right:Â 5px;&#125;\n\nÂ Â Â Â Â Â Â Â dlÂ &#123;width:Â 320px;Â margin:Â auto;&#125;\n\nÂ Â Â Â Â Â Â Â dtÂ &#123;font-size:Â 20pt;Â color:Â rgb(36,Â 45,Â 168);Â background-color:Â rgb(197,Â 194,Â 11);\n\nÂ Â Â Â Â Â Â Â Â Â Â Â margin:Â 6ptÂ 0;Â padding:Â 6ptÂ 12pt;&#125;\n\nÂ Â Â Â Â Â Â Â ddÂ &#123;text-align:Â left;Â padding-right:Â 6pt;&#125;\n\nÂ Â Â Â Â Â Â Â .valÂ &#123;Â font-size:Â 30pt;Â color:Â rgb(255,Â 120,Â 30);Â &#125;\n\nÂ Â Â Â &lt;&#x2F;style&gt;\n\n&lt;&#x2F;head&gt;\n\n&lt;body&gt;\n\nÂ Â Â Â &lt;p&gt;&lt;h1&gt;HC-SR04è¶…éŸ³æ³¢æ¸¬è·å¯¦é©—&lt;&#x2F;h1&gt;&lt;&#x2F;p&gt;\n\nÂ Â Â Â &lt;dl&gt;\n\nÂ Â Â Â Â Â Â Â &lt;dt&gt;åµæ¸¬ç‰©é«”è·é›¢&lt;&#x2F;dt&gt;\n\nÂ Â Â Â Â Â Â Â &lt;ddÂ class&#x3D;val&gt;%distance%Â å…¬åˆ†&lt;&#x2F;dd&gt;\n\nÂ Â Â Â &lt;&#x2F;dl&gt;\n\n&lt;&#x2F;body&gt;\n\n&lt;&#x2F;html&gt;\n\n)&#x3D;&#x3D;&#x3D;&quot;;\n\n  \n\n_**è®€å–æ•¸å€¼å’Œå‰ç«¯åŒæ­¥æ•¸å€¼çš„å‡½å¼**_\n\nString readDist()&#123;\n\n unsignedÂ int distance&#x3D;ultrasonic1.read(CM);\n\n Serial.print(distance); Serial.println(&quot;Â CM&quot;);\n\n return String(distance);\n\n&#125;\n\nString hcsr04Processors(String(value))&#123;\n\n ifÂ (value&#x3D;&#x3D;&quot;distance&quot;)&#123;\n\n return readDist();\n\nÂ Â Â Â &#125;\n\n&#125;\n\n  <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong><em>ç¶²è·¯é€£ç·š</em></strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">voidÂ setup()&#123;\n\nÂ Â Â Â Serial.begin(115200);\n\nÂ Â Â Â WiFi.begin(ssid,Â password);\n\nÂ Â Â Â whileÂ (WiFi.status()Â !&#x3D;Â WL_CONNECTED)&#123;\n\nÂ Â Â Â Â Â Â Â Serial.print(&quot;.&quot;);\n\nÂ Â Â Â Â Â Â Â delay(500);\n\nÂ Â Â Â &#125;\n\nÂ Â Â Â Serial.println(&quot;ConnectedÂ successful!&quot;);\n\nÂ Â Â Â Serial.print(&quot;IP:Â &quot;);Â Serial.println(WiFi.localIP());\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>ç¶²è·¯ä¼ºæœå™¨çš„è«‹æ±‚å’Œå›æ‡‰</p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\"> server.on(&quot;&#x2F;&quot;,Â HTTP_GET,Â [](AsyncWebServerRequestÂ *request)&#123;\n\nÂ Â Â Â Â Â Â Â request-&gt;send_P(200,Â &quot;text&#x2F;html&quot;,Â indexHtml,Â hcsr04Processors);\n\nÂ Â Â Â &#125;);\n\nÂ Â Â Â server.on(&quot;&#x2F;distance&quot;,Â HTTP_GET,Â [](AsyncWebServerRequestÂ *request)&#123;\n\nÂ Â Â Â Â Â Â Â request-&gt;send_P(200,Â &quot;text&#x2F;plain&quot;,Â readDist().c_str());\n\nÂ Â Â Â &#125;);\n\nÂ Â Â Â server.begin();\n\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/ammBs4Z-DTs\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>","categories":["esp32"],"tags":["hc-sr04","web server"]},{"title":"è¶…éŸ³æ³¢æ¨¡çµ„&0.96OLED-micropython","url":"/2021/08/29/%E8%B6%85%E9%9F%B3%E6%B3%A2%E6%A8%A1%E7%B5%84-0-96OLED-micropython/","content":"<h1 id=\"è¶…éŸ³æ³¢æ¨¡çµ„-amp-0-96OLED-micropython\"><a href=\"#è¶…éŸ³æ³¢æ¨¡çµ„-amp-0-96OLED-micropython\" class=\"headerlink\" title=\"è¶…éŸ³æ³¢æ¨¡çµ„&amp;0.96OLED-micropython\"></a>è¶…éŸ³æ³¢æ¨¡çµ„&amp;0.96OLED-micropython</h1><h6 id=\"tags-micropython-hcsr04-amp-0-96oled-esp32\"><a href=\"#tags-micropython-hcsr04-amp-0-96oled-esp32\" class=\"headerlink\" title=\"tags: micropython hcsr04&amp;0.96oled esp32\"></a>tags: <code>micropython</code> <code>hcsr04&amp;0.96oled</code> <code>esp32</code></h6><h2 id=\"æ¥ç·š\"><a href=\"#æ¥ç·š\" class=\"headerlink\" title=\"æ¥ç·š\"></a>æ¥ç·š</h2><p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/3844235121108768211#\"><img src=\"https://1.bp.blogspot.com/-vUSt95-nd5I/YOqB-78G3uI/AAAAAAAAebY/SOiwses8e8QZD-XSYQsYuJA3B0DTTVAMQCNcBGAsYHQ/w703-h340/MicroPython-Ultrasonic-Sensor-ESP32.jpg\"></a></p>\n<p>â€”â€”â€”â€”â€”â€”â€”â€”â€“Â Â Â Â Â  â€”â€”â€”â€”â€”â€”â€”Â Â Â Â Â </p>\n<p>//Â Â *Â |Â HC-SC04Â |Â ESP32 Â |Â Â Â Â Â |  OLED | ESP32 |</p>\n<p>//Â Â *Â â€”â€”â€”â€”â€”â€”â€”Â Â Â Â Â â€”â€”â€”â€”â€”â€”â€”Â Â Â Â Â </p>\n<p>//Â Â *Â |Â Â Â VccÂ Â Â |Â Â Â 3.3VÂ Â |Â Â Â Â Â | Vcc | 3.3V |</p>\n<p>//Â Â *Â |Â Â Â TrigÂ Â |Â Â Â 32Â Â Â Â |Â Â Â  Â | Gnd | GND |</p>\n<p>//Â Â *Â |Â Â Â EchoÂ Â |Â Â Â 33Â Â Â Â |Â Â Â Â Â | SCL | 21 |</p>\n<p>//Â Â *Â |Â Â Â GndÂ Â Â |Â Â Â GNDÂ Â Â |Â Â Â  Â | SDA | 22 |</p>\n<p>//Â Â *Â --------------------- â€”â€”â€”â€”â€”â€”â€”-</p>\n<hr>\n<h2 id=\"å°‡ssd1306-py-HC-SR04-pyä¸Šå‚³è‡³æ¿å­è£¡\"><a href=\"#å°‡ssd1306-py-HC-SR04-pyä¸Šå‚³è‡³æ¿å­è£¡\" class=\"headerlink\" title=\"å°‡ssd1306.py HC_SR04.pyä¸Šå‚³è‡³æ¿å­è£¡\"></a>å°‡ssd1306.py HC_SR04.pyä¸Šå‚³è‡³æ¿å­è£¡</h2><p>**è€ƒé‹‡ä»¥ä¸‹äºŒæª”ä¸¦å­˜æˆpyæª”Â **</p>\n<p><strong>ssd1306.py</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\"><span class=\"token comment\"># MicroPython SSD1306 OLED driver, I2C and SPI interfaces</span>\n<span class=\"token keyword\">from</span> micropython <span class=\"token keyword\">import</span> const\n<span class=\"token keyword\">import</span> time\n<span class=\"token keyword\">import</span> framebuf\n<span class=\"token keyword\">import</span> sys\n \ncurrentBoard<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span>\n<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>platform<span class=\"token operator\">==</span><span class=\"token string\">\"esp8266\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  currentBoard<span class=\"token operator\">=</span><span class=\"token string\">\"esp8266\"</span>\n<span class=\"token keyword\">elif</span><span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>platform<span class=\"token operator\">==</span><span class=\"token string\">\"esp32\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  currentBoard<span class=\"token operator\">=</span><span class=\"token string\">\"esp32\"</span>\n<span class=\"token keyword\">elif</span><span class=\"token punctuation\">(</span>sys<span class=\"token punctuation\">.</span>platform<span class=\"token operator\">==</span><span class=\"token string\">\"pyboard\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  currentBoard<span class=\"token operator\">=</span><span class=\"token string\">\"pyboard\"</span>\n  <span class=\"token keyword\">import</span> pyb\n<span class=\"token comment\"># register definitions</span>\nSET_CONTRAST        <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0x81</span><span class=\"token punctuation\">)</span>\nSET_ENTIRE_ON       <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0xa4</span><span class=\"token punctuation\">)</span>\nSET_NORM_INV        <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0xa6</span><span class=\"token punctuation\">)</span>\nSET_DISP            <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0xae</span><span class=\"token punctuation\">)</span>\nSET_MEM_ADDR        <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0x20</span><span class=\"token punctuation\">)</span>\nSET_COL_ADDR        <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0x21</span><span class=\"token punctuation\">)</span>\nSET_PAGE_ADDR       <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0x22</span><span class=\"token punctuation\">)</span>\nSET_DISP_START_LINE <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0x40</span><span class=\"token punctuation\">)</span>\nSET_SEG_REMAP       <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0xa0</span><span class=\"token punctuation\">)</span>\nSET_MUX_RATIO       <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0xa8</span><span class=\"token punctuation\">)</span>\nSET_COM_OUT_DIR     <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0xc0</span><span class=\"token punctuation\">)</span>\nSET_DISP_OFFSET     <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0xd3</span><span class=\"token punctuation\">)</span>\nSET_COM_PIN_CFG     <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0xda</span><span class=\"token punctuation\">)</span>\nSET_DISP_CLK_DIV    <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0xd5</span><span class=\"token punctuation\">)</span>\nSET_PRECHARGE       <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0xd9</span><span class=\"token punctuation\">)</span>\nSET_VCOM_DESEL      <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0xdb</span><span class=\"token punctuation\">)</span>\nSET_CHARGE_PUMP     <span class=\"token operator\">=</span> const<span class=\"token punctuation\">(</span><span class=\"token number\">0x8d</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SSD1306</span><span class=\"token punctuation\">:</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">,</span> external_vcc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>width <span class=\"token operator\">=</span> width\n    self<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> height\n    self<span class=\"token punctuation\">.</span>external_vcc <span class=\"token operator\">=</span> external_vcc\n    self<span class=\"token punctuation\">.</span>pages <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>height <span class=\"token operator\">//</span> <span class=\"token number\">8</span>\n    self<span class=\"token punctuation\">.</span><span class=\"token builtin\">buffer</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">bytearray</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>pages <span class=\"token operator\">*</span> self<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>framebuf <span class=\"token operator\">=</span> framebuf<span class=\"token punctuation\">.</span>FrameBuffer<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span><span class=\"token builtin\">buffer</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">,</span> framebuf<span class=\"token punctuation\">.</span>MVLSB<span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>poweron<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>init_display<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">init_display</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">for</span> cmd <span class=\"token keyword\">in</span> <span class=\"token punctuation\">(</span>\n      SET_DISP <span class=\"token operator\">|</span> <span class=\"token number\">0x00</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># off</span>\n      <span class=\"token comment\"># address setting</span>\n      SET_MEM_ADDR<span class=\"token punctuation\">,</span> <span class=\"token number\">0x00</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># horizontal</span>\n      <span class=\"token comment\"># resolution and layout</span>\n      SET_DISP_START_LINE <span class=\"token operator\">|</span> <span class=\"token number\">0x00</span><span class=\"token punctuation\">,</span>\n      SET_SEG_REMAP <span class=\"token operator\">|</span> <span class=\"token number\">0x01</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># column addr 127 mapped to SEG0</span>\n      SET_MUX_RATIO<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>height <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      SET_COM_OUT_DIR <span class=\"token operator\">|</span> <span class=\"token number\">0x08</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># scan from COM[N] to COM0</span>\n      SET_DISP_OFFSET<span class=\"token punctuation\">,</span> <span class=\"token number\">0x00</span><span class=\"token punctuation\">,</span>\n      SET_COM_PIN_CFG<span class=\"token punctuation\">,</span> <span class=\"token number\">0x02</span> <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>height <span class=\"token operator\">==</span> <span class=\"token number\">32</span> <span class=\"token keyword\">else</span> <span class=\"token number\">0x12</span><span class=\"token punctuation\">,</span>\n      <span class=\"token comment\"># timing and driving scheme</span>\n      SET_DISP_CLK_DIV<span class=\"token punctuation\">,</span> <span class=\"token number\">0x80</span><span class=\"token punctuation\">,</span>\n      SET_PRECHARGE<span class=\"token punctuation\">,</span> <span class=\"token number\">0x22</span> <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>external_vcc <span class=\"token keyword\">else</span> <span class=\"token number\">0xf1</span><span class=\"token punctuation\">,</span>\n      SET_VCOM_DESEL<span class=\"token punctuation\">,</span> <span class=\"token number\">0x30</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># 0.83*Vcc</span>\n      <span class=\"token comment\"># display</span>\n      SET_CONTRAST<span class=\"token punctuation\">,</span> <span class=\"token number\">0xff</span><span class=\"token punctuation\">,</span> <span class=\"token comment\"># maximum</span>\n      SET_ENTIRE_ON<span class=\"token punctuation\">,</span> <span class=\"token comment\"># output follows RAM contents</span>\n      SET_NORM_INV<span class=\"token punctuation\">,</span> <span class=\"token comment\"># not inverted</span>\n      <span class=\"token comment\"># charge pump</span>\n      SET_CHARGE_PUMP<span class=\"token punctuation\">,</span> <span class=\"token number\">0x10</span> <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>external_vcc <span class=\"token keyword\">else</span> <span class=\"token number\">0x14</span><span class=\"token punctuation\">,</span>\n      SET_DISP <span class=\"token operator\">|</span> <span class=\"token number\">0x01</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># on</span>\n      self<span class=\"token punctuation\">.</span>write_cmd<span class=\"token punctuation\">(</span>cmd<span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>fill<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">poweroff</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>write_cmd<span class=\"token punctuation\">(</span>SET_DISP <span class=\"token operator\">|</span> <span class=\"token number\">0x00</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">contrast</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> contrast<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>write_cmd<span class=\"token punctuation\">(</span>SET_CONTRAST<span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>write_cmd<span class=\"token punctuation\">(</span>contrast<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">invert</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> invert<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>write_cmd<span class=\"token punctuation\">(</span>SET_NORM_INV <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span>invert <span class=\"token operator\">&amp;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">show</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    x0 <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n    x1 <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>width <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">if</span> self<span class=\"token punctuation\">.</span>width <span class=\"token operator\">==</span> <span class=\"token number\">64</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\"># displays with width of 64 pixels are shifted by 32</span>\n      x0 <span class=\"token operator\">+=</span> <span class=\"token number\">32</span>\n      x1 <span class=\"token operator\">+=</span> <span class=\"token number\">32</span>\n    self<span class=\"token punctuation\">.</span>write_cmd<span class=\"token punctuation\">(</span>SET_COL_ADDR<span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>write_cmd<span class=\"token punctuation\">(</span>x0<span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>write_cmd<span class=\"token punctuation\">(</span>x1<span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>write_cmd<span class=\"token punctuation\">(</span>SET_PAGE_ADDR<span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>write_cmd<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>write_cmd<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>pages <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>write_data<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span><span class=\"token builtin\">buffer</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">fill</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> col<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>framebuf<span class=\"token punctuation\">.</span>fill<span class=\"token punctuation\">(</span>col<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">pixel</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> col<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>framebuf<span class=\"token punctuation\">.</span>pixel<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> col<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">scroll</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> dx<span class=\"token punctuation\">,</span> dy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>framebuf<span class=\"token punctuation\">.</span>scroll<span class=\"token punctuation\">(</span>dx<span class=\"token punctuation\">,</span> dy<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">text</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> string<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> col<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>framebuf<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">(</span>string<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> col<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">hline</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> w<span class=\"token punctuation\">,</span> col<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>framebuf<span class=\"token punctuation\">.</span>hline<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> w<span class=\"token punctuation\">,</span> col<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">vline</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">,</span> col<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>framebuf<span class=\"token punctuation\">.</span>vline<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">,</span> col<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">line</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x1<span class=\"token punctuation\">,</span> y1<span class=\"token punctuation\">,</span> x2<span class=\"token punctuation\">,</span> y2<span class=\"token punctuation\">,</span> col<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>framebuf<span class=\"token punctuation\">.</span>line<span class=\"token punctuation\">(</span>x1<span class=\"token punctuation\">,</span> y1<span class=\"token punctuation\">,</span> x2<span class=\"token punctuation\">,</span> y2<span class=\"token punctuation\">,</span> col<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">rect</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> w<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">,</span> col<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>framebuf<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> w<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">,</span> col<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">fill_rect</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> w<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">,</span> col<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>framebuf<span class=\"token punctuation\">.</span>fill_rect<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> w<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">,</span> col<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">blit</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> fbuf<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>framebuf<span class=\"token punctuation\">.</span>blit<span class=\"token punctuation\">(</span>fbuf<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span>\n \n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SSD1306_I2C</span><span class=\"token punctuation\">(</span>SSD1306<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">,</span> i2c<span class=\"token punctuation\">,</span> addr<span class=\"token operator\">=</span><span class=\"token number\">0x3c</span><span class=\"token punctuation\">,</span> external_vcc<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>i2c <span class=\"token operator\">=</span> i2c\n    self<span class=\"token punctuation\">.</span>addr <span class=\"token operator\">=</span> addr\n    self<span class=\"token punctuation\">.</span>temp <span class=\"token operator\">=</span> <span class=\"token builtin\">bytearray</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n    <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">,</span> external_vcc<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">write_cmd</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> cmd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>temp<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0x80</span> <span class=\"token comment\"># Co=1, D/C#=0</span>\n    self<span class=\"token punctuation\">.</span>temp<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> cmd\n    <span class=\"token comment\">#IF SYS  :</span>\n    <span class=\"token keyword\">global</span> currentBoard\n    <span class=\"token keyword\">if</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"esp8266\"</span> <span class=\"token keyword\">or</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"esp32\"</span><span class=\"token punctuation\">:</span>\n      self<span class=\"token punctuation\">.</span>i2c<span class=\"token punctuation\">.</span>writeto<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>addr<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>temp<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">elif</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"pyboard\"</span><span class=\"token punctuation\">:</span>\n      self<span class=\"token punctuation\">.</span>i2c<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>temp<span class=\"token punctuation\">,</span>self<span class=\"token punctuation\">.</span>addr<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">#ELSE:</span>\n          \n  <span class=\"token keyword\">def</span> <span class=\"token function\">write_data</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> buf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>temp<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>addr <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">1</span>\n    self<span class=\"token punctuation\">.</span>temp<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0x40</span> <span class=\"token comment\"># Co=0, D/C#=1</span>\n    <span class=\"token keyword\">global</span> currentBoard\n    <span class=\"token keyword\">if</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"esp8266\"</span> <span class=\"token keyword\">or</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"esp32\"</span><span class=\"token punctuation\">:</span>\n      self<span class=\"token punctuation\">.</span>i2c<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      self<span class=\"token punctuation\">.</span>i2c<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>temp<span class=\"token punctuation\">)</span>\n      self<span class=\"token punctuation\">.</span>i2c<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">)</span>\n      self<span class=\"token punctuation\">.</span>i2c<span class=\"token punctuation\">.</span>stop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">elif</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"pyboard\"</span><span class=\"token punctuation\">:</span>\n      <span class=\"token comment\">#self.i2c.send(self.temp,self.addr)</span>\n      <span class=\"token comment\">#self.i2c.send(buf,self.addr)</span>\n      self<span class=\"token punctuation\">.</span>i2c<span class=\"token punctuation\">.</span>mem_write<span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">,</span>self<span class=\"token punctuation\">.</span>addr<span class=\"token punctuation\">,</span><span class=\"token number\">0x40</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">poweron</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">pass</span>\n \n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SSD1306_SPI</span><span class=\"token punctuation\">(</span>SSD1306<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">,</span> spi<span class=\"token punctuation\">,</span> dc<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> cs<span class=\"token punctuation\">,</span> external_vcc<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>rate <span class=\"token operator\">=</span> <span class=\"token number\">10</span> <span class=\"token operator\">*</span> <span class=\"token number\">1024</span> <span class=\"token operator\">*</span> <span class=\"token number\">1024</span>\n    dc<span class=\"token punctuation\">.</span>init<span class=\"token punctuation\">(</span>dc<span class=\"token punctuation\">.</span>OUT<span class=\"token punctuation\">,</span> value<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    res<span class=\"token punctuation\">.</span>init<span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>OUT<span class=\"token punctuation\">,</span> value<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    cs<span class=\"token punctuation\">.</span>init<span class=\"token punctuation\">(</span>cs<span class=\"token punctuation\">.</span>OUT<span class=\"token punctuation\">,</span> value<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>spi <span class=\"token operator\">=</span> spi\n    self<span class=\"token punctuation\">.</span>dc <span class=\"token operator\">=</span> dc\n    self<span class=\"token punctuation\">.</span>res <span class=\"token operator\">=</span> res\n    self<span class=\"token punctuation\">.</span>cs <span class=\"token operator\">=</span> cs\n    <span class=\"token builtin\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>__init__<span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">,</span> external_vcc<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">write_cmd</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> cmd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">global</span> currentBoard\n    <span class=\"token keyword\">if</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"esp8266\"</span> <span class=\"token keyword\">or</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"esp32\"</span><span class=\"token punctuation\">:</span>\n      self<span class=\"token punctuation\">.</span>spi<span class=\"token punctuation\">.</span>init<span class=\"token punctuation\">(</span>baudrate<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>rate<span class=\"token punctuation\">,</span> polarity<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> phase<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">elif</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"pyboard\"</span><span class=\"token punctuation\">:</span>\n      self<span class=\"token punctuation\">.</span>spi<span class=\"token punctuation\">.</span>init<span class=\"token punctuation\">(</span>mode <span class=\"token operator\">=</span> pyb<span class=\"token punctuation\">.</span>SPI<span class=\"token punctuation\">.</span>MASTER<span class=\"token punctuation\">,</span>baudrate<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>rate<span class=\"token punctuation\">,</span> polarity<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> phase<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>cs<span class=\"token punctuation\">.</span>high<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>dc<span class=\"token punctuation\">.</span>low<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>cs<span class=\"token punctuation\">.</span>low<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">global</span> currentBoard\n    <span class=\"token keyword\">if</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"esp8266\"</span> <span class=\"token keyword\">or</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"esp32\"</span><span class=\"token punctuation\">:</span>\n      self<span class=\"token punctuation\">.</span>spi<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span><span class=\"token builtin\">bytearray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>cmd<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">elif</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"pyboard\"</span><span class=\"token punctuation\">:</span>\n      self<span class=\"token punctuation\">.</span>spi<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token builtin\">bytearray</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>cmd<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>cs<span class=\"token punctuation\">.</span>high<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">write_data</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> buf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">global</span> currentBoard\n    <span class=\"token keyword\">if</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"esp8266\"</span> <span class=\"token keyword\">or</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"esp32\"</span><span class=\"token punctuation\">:</span>\n      self<span class=\"token punctuation\">.</span>spi<span class=\"token punctuation\">.</span>init<span class=\"token punctuation\">(</span>baudrate<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>rate<span class=\"token punctuation\">,</span> polarity<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> phase<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">elif</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"pyboard\"</span><span class=\"token punctuation\">:</span>\n      self<span class=\"token punctuation\">.</span>spi<span class=\"token punctuation\">.</span>init<span class=\"token punctuation\">(</span>mode <span class=\"token operator\">=</span> pyb<span class=\"token punctuation\">.</span>SPI<span class=\"token punctuation\">.</span>MASTER<span class=\"token punctuation\">,</span>baudrate<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>rate<span class=\"token punctuation\">,</span> polarity<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> phase<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>cs<span class=\"token punctuation\">.</span>high<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>dc<span class=\"token punctuation\">.</span>high<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>cs<span class=\"token punctuation\">.</span>low<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">global</span> currentBoard\n    <span class=\"token keyword\">if</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"esp8266\"</span> <span class=\"token keyword\">or</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"esp32\"</span><span class=\"token punctuation\">:</span>\n      self<span class=\"token punctuation\">.</span>spi<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">elif</span> currentBoard<span class=\"token operator\">==</span><span class=\"token string\">\"pyboard\"</span><span class=\"token punctuation\">:</span>\n      self<span class=\"token punctuation\">.</span>spi<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>cs<span class=\"token punctuation\">.</span>high<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">def</span> <span class=\"token function\">poweron</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    self<span class=\"token punctuation\">.</span>res<span class=\"token punctuation\">.</span>high<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    time<span class=\"token punctuation\">.</span>sleep_ms<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>res<span class=\"token punctuation\">.</span>low<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    time<span class=\"token punctuation\">.</span>sleep_ms<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>res<span class=\"token punctuation\">.</span>high<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"HC-SR04-py\"><a href=\"#HC-SR04-py\" class=\"headerlink\" title=\"HC_SR04.py\"></a>HC_SR04.py</h2><pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\"><span class=\"token keyword\">import</span> machine<span class=\"token punctuation\">,</span> time\n<span class=\"token keyword\">from</span> machine <span class=\"token keyword\">import</span> Pin\n \n<span class=\"token keyword\">class</span> <span class=\"token class-name\">HCSR04</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Driver to use the untrasonic sensor HC-SR04.\n    The sensor range is between 2cm and 4m.\n    The timeouts received listening to echo pin are converted to OSError('Out of range')\n    \"\"\"</span>\n    <span class=\"token comment\"># echo_timeout_us is based in chip range limit (400cm)</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> trigger_pin<span class=\"token punctuation\">,</span> echo_pin<span class=\"token punctuation\">,</span> echo_timeout_us<span class=\"token operator\">=</span><span class=\"token number\">500</span><span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token operator\">*</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        trigger_pin: Output pin to send pulses\n        echo_pin: Readonly pin to measure the distance. The pin should be protected with 1k resistor\n        echo_timeout_us: Timeout in microseconds to listen to echo pin. \n        By default is based in sensor limit range (4m)\n        \"\"\"</span>\n        self<span class=\"token punctuation\">.</span>echo_timeout_us <span class=\"token operator\">=</span> echo_timeout_us\n        <span class=\"token comment\"># Init trigger pin (out)</span>\n        self<span class=\"token punctuation\">.</span>trigger <span class=\"token operator\">=</span> Pin<span class=\"token punctuation\">(</span>trigger_pin<span class=\"token punctuation\">,</span> mode<span class=\"token operator\">=</span>Pin<span class=\"token punctuation\">.</span>OUT<span class=\"token punctuation\">,</span> pull<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>trigger<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n \n        <span class=\"token comment\"># Init echo pin (in)</span>\n        self<span class=\"token punctuation\">.</span>echo <span class=\"token operator\">=</span> Pin<span class=\"token punctuation\">(</span>echo_pin<span class=\"token punctuation\">,</span> mode<span class=\"token operator\">=</span>Pin<span class=\"token punctuation\">.</span>IN<span class=\"token punctuation\">,</span> pull<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n \n    <span class=\"token keyword\">def</span> <span class=\"token function\">_send_pulse_and_wait</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        Send the pulse to trigger and listen on echo pin.\n        We use the method `machine.time_pulse_us()` to get the microseconds until the echo is received.\n        \"\"\"</span>\n        self<span class=\"token punctuation\">.</span>trigger<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Stabilize the sensor</span>\n        time<span class=\"token punctuation\">.</span>sleep_us<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>trigger<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># Send a 10us pulse.</span>\n        time<span class=\"token punctuation\">.</span>sleep_us<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>trigger<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n            pulse_time <span class=\"token operator\">=</span> machine<span class=\"token punctuation\">.</span>time_pulse_us<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>echo<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>echo_timeout_us<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> pulse_time\n        <span class=\"token keyword\">except</span> OSError <span class=\"token keyword\">as</span> ex<span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">if</span> ex<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">110</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 110 = ETIMEDOUT</span>\n                <span class=\"token keyword\">raise</span> OSError<span class=\"token punctuation\">(</span><span class=\"token string\">'Out of range'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">raise</span> ex\n \n    <span class=\"token keyword\">def</span> <span class=\"token function\">distance_mm</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        Get the distance in milimeters without floating point operations.\n        \"\"\"</span>\n        pulse_time <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>_send_pulse_and_wait<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n \n        <span class=\"token comment\"># To calculate the distance we get the pulse_time and divide it by 2 </span>\n        <span class=\"token comment\"># (the pulse walk the distance twice) and by 29.1 becasue</span>\n        <span class=\"token comment\"># the sound speed on air (343.2 m/s), that It's equivalent to</span>\n        <span class=\"token comment\"># 0.34320 mm/us that is 1mm each 2.91us</span>\n        <span class=\"token comment\"># pulse_time // 2 // 2.91 -> pulse_time // 5.82 -> pulse_time * 100 // 582 </span>\n        mm <span class=\"token operator\">=</span> pulse_time <span class=\"token operator\">*</span> <span class=\"token number\">100</span> <span class=\"token operator\">//</span> <span class=\"token number\">582</span>\n        <span class=\"token keyword\">return</span> mm\n \n    <span class=\"token keyword\">def</span> <span class=\"token function\">distance_cm</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        Get the distance in centimeters with floating point operations.\n        It returns a float\n        \"\"\"</span>\n        pulse_time <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>_send_pulse_and_wait<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n \n        <span class=\"token comment\"># To calculate the distance we get the pulse_time and divide it by 2 </span>\n        <span class=\"token comment\"># (the pulse walk the distance twice) and by 29.1 becasue</span>\n        <span class=\"token comment\"># the sound speed on air (343.2 m/s), that It's equivalent to</span>\n        <span class=\"token comment\"># 0.034320 cm/us that is 1cm each 29.1us</span>\n        cms <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>pulse_time <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">29.1</span>\n        <span class=\"token keyword\">return</span> cms<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><p><strong>main.py</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\"><span class=\"token keyword\">import</span> ssd1306 <span class=\"token comment\">#åŒ¯å…¥oledæ¨¡çµ„</span>\n\n<span class=\"token keyword\">from</span> machine <span class=\"token keyword\">import</span> I2C<span class=\"token punctuation\">,</span> Pin <span class=\"token comment\">#åŒ¯å…¥i2cç›¸é—œæ¨¡çµ„å’Œè…³ä½æ¨¡çµ„</span>\n\n<span class=\"token keyword\">from</span> HC_SR04 <span class=\"token keyword\">import</span> HCSR04\n\n\ni2c<span class=\"token operator\">=</span>I2C<span class=\"token punctuation\">(</span>scl<span class=\"token operator\">=</span>Pin<span class=\"token punctuation\">(</span><span class=\"token number\">22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> sda<span class=\"token operator\">=</span>Pin<span class=\"token punctuation\">(</span><span class=\"token number\">21</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> freq<span class=\"token operator\">=</span><span class=\"token number\">5000</span><span class=\"token punctuation\">)</span>\n\noled<span class=\"token operator\">=</span>ssd1306<span class=\"token punctuation\">.</span>SSD1306_I2C<span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">,</span> <span class=\"token number\">64</span><span class=\"token punctuation\">,</span> i2c<span class=\"token punctuation\">)</span>\n\nsensor<span class=\"token operator\">=</span>HCSR04<span class=\"token punctuation\">(</span>trigger_pin<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span> echo_pin<span class=\"token operator\">=</span><span class=\"token number\">33</span><span class=\"token punctuation\">,</span>echo_timeout_us<span class=\"token operator\">=</span><span class=\"token number\">100000</span><span class=\"token punctuation\">)</span>\n\n  \n\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n\n    dist<span class=\"token operator\">=</span>sensor<span class=\"token punctuation\">.</span>distance_cm<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The distance is &#123;:.1f&#125; cm\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>dist<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    oled<span class=\"token punctuation\">.</span>fill<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n    oled<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">(</span><span class=\"token string\">\"Distance: \"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n    oled<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>dist<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n\n    oled<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">(</span><span class=\"token string\">\"cm\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n\n    oled<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"è§£æ\"><a href=\"#è§£æ\" class=\"headerlink\" title=\"è§£æ\"></a>è§£æ</h2><p><strong>åŒ¯å…¥OLED, I2C, HC_SR04æ¨¡çµ„</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\"><span class=\"token keyword\">import</span> ssd1306 <span class=\"token comment\">#åŒ¯å…¥oledæ¨¡çµ„</span>\n\n<span class=\"token keyword\">from</span> machine <span class=\"token keyword\">import</span> I2C<span class=\"token punctuation\">,</span> Pin <span class=\"token comment\">#åŒ¯å…¥i2cç›¸é—œæ¨¡çµ„å’Œè…³ä½æ¨¡çµ„</span>\n\n<span class=\"token keyword\">from</span> HC_SR04 <span class=\"token keyword\">import</span> HCSR04<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>i2cé€šè¨­å®š</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">i2c<span class=\"token operator\">=</span>I2C<span class=\"token punctuation\">(</span>scl<span class=\"token operator\">=</span>Pin<span class=\"token punctuation\">(</span><span class=\"token number\">22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> sda<span class=\"token operator\">=</span>Pin<span class=\"token punctuation\">(</span><span class=\"token number\">21</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> freq<span class=\"token operator\">=</span><span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>OLEDé¡¯ç¤º</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">oled<span class=\"token operator\">=</span>ssd1306<span class=\"token punctuation\">.</span>SSD1306_I2C<span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">,</span> <span class=\"token number\">64</span><span class=\"token punctuation\">,</span> i2c<span class=\"token punctuation\">)</span>\n\noled<span class=\"token punctuation\">.</span>fill<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\noled<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">(</span><span class=\"token string\">\"Distance: \"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\noled<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>dist<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n\noled<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">(</span><span class=\"token string\">\"cm\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n\noled<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>è¶…éŸ³æ³¢æ¸¬è·</strong></p>\n<p><strong>ä½¿ç”¨while True: å½¢æˆè¿´åœˆ</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">sensor<span class=\"token operator\">=</span>HCSR04<span class=\"token punctuation\">(</span>trigger_pin<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span> echo_pin<span class=\"token operator\">=</span><span class=\"token number\">33</span><span class=\"token punctuation\">,</span>echo_timeout_us<span class=\"token operator\">=</span><span class=\"token number\">100000</span><span class=\"token punctuation\">)</span>\n\ndist<span class=\"token operator\">=</span>sensor<span class=\"token punctuation\">.</span>distance_cm<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<hr>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/IkzFiOHADV0\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>","categories":["micropython","esp32"],"tags":["è¶…éŸ³æ³¢æ¨¡çµ„","hc-sr04"]},{"title":"HC-SR04è¶…éŸ³æ³¢æ¨¡çµ„&ç¶²é é¡¯ç¤º","url":"/2021/08/29/HC-SR04%E8%B6%85%E9%9F%B3%E6%B3%A2%E6%A8%A1%E7%B5%84-%E7%B6%B2%E9%A0%81%E9%A1%AF%E7%A4%BA/","content":"<h1 id=\"HC-SR04è¶…éŸ³æ³¢æ¨¡çµ„-amp-ç¶²é é¡¯ç¤º\"><a href=\"#HC-SR04è¶…éŸ³æ³¢æ¨¡çµ„-amp-ç¶²é é¡¯ç¤º\" class=\"headerlink\" title=\"HC-SR04è¶…éŸ³æ³¢æ¨¡çµ„&amp;ç¶²é é¡¯ç¤º\"></a>HC-SR04è¶…éŸ³æ³¢æ¨¡çµ„&amp;ç¶²é é¡¯ç¤º</h1><h6 id=\"tags-micropython-â€˜hc-sr04â€™\"><a href=\"#tags-micropython-â€˜hc-sr04â€™\" class=\"headerlink\" title=\"tags: micropython, â€˜hc-sr04â€™\"></a>tags: <code>micropython</code>, â€˜hc-sr04â€™</h6><p><strong>è¶…éŸ³æ³¢æ¨¡çµ„æ¸¬è©¦åƒè€ƒ-</strong><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/956822760667011320#\">https://blairan-esp32-micropython.blogspot.com/2021/07/blog-post.html</a></p>\n<p><strong><em>åŸºæ–¼ä»¥ä¸Šçš„åŸºæœ¬æ¸¬è©¦,åŠ å…¥WiFiç¶²é ä¼ºæœå™¨å³å¯é¡¯ç¤ºæ–¼ç¶²é </em></strong></p>\n<h2 id=\"æ¥ç·š\"><a href=\"#æ¥ç·š\" class=\"headerlink\" title=\"æ¥ç·š\"></a>æ¥ç·š</h2><p>â€”â€”â€”â€”â€”â€”â€”â€”â€“Â Â Â Â </p>\n<p>//Â Â *Â |Â HC-SC04Â |Â ESP32 Â |Â Â Â Â </p>\n<p>//Â Â *Â â€”â€”â€”â€”â€”â€”â€”Â Â Â Â </p>\n<p>//Â Â *Â |Â Â Â VccÂ Â Â |Â Â Â 3.3VÂ Â |Â Â Â Â </p>\n<p>//Â Â *Â |Â Â Â TrigÂ Â |Â Â Â 32Â Â Â Â |Â  </p>\n<p>//Â Â *Â |Â Â Â EchoÂ Â |Â Â Â 33Â Â Â Â |Â Â Â Â Â </p>\n<p>//Â Â *Â |Â Â Â GndÂ Â Â |Â Â Â GNDÂ Â Â |Â  </p>\n<p>//Â Â *Â â€”â€”â€”â€”â€”â€”â€”</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/956822760667011320#\"><img src=\"https://lemariva.com/storage/temp/public/295/644/a2e/esp32_bb__750.png\"></a></p>\n<hr>\n<h2 id=\"ä¸Šå‚³HC-SR04-pyæª”è‡³æ¿ä¸Š\"><a href=\"#ä¸Šå‚³HC-SR04-pyæª”è‡³æ¿ä¸Š\" class=\"headerlink\" title=\"ä¸Šå‚³HC-SR04.pyæª”è‡³æ¿ä¸Š\"></a>ä¸Šå‚³HC-SR04.pyæª”è‡³æ¿ä¸Š</h2><h2 id=\"HC-SR04-py\"><a href=\"#HC-SR04-py\" class=\"headerlink\" title=\"HC_SR04.py\"></a>HC_SR04.py</h2><pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\"><span class=\"token keyword\">import</span> machine<span class=\"token punctuation\">,</span> time\n<span class=\"token keyword\">from</span> machine <span class=\"token keyword\">import</span> Pin\n \n<span class=\"token keyword\">class</span> <span class=\"token class-name\">HCSR04</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Driver to use the untrasonic sensor HC-SR04.\n    The sensor range is between 2cm and 4m.\n    The timeouts received listening to echo pin are converted to OSError('Out of range')\n    \"\"\"</span>\n    <span class=\"token comment\"># echo_timeout_us is based in chip range limit (400cm)</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> trigger_pin<span class=\"token punctuation\">,</span> echo_pin<span class=\"token punctuation\">,</span> echo_timeout_us<span class=\"token operator\">=</span><span class=\"token number\">500</span><span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token operator\">*</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        trigger_pin: Output pin to send pulses\n        echo_pin: Readonly pin to measure the distance. The pin should be protected with 1k resistor\n        echo_timeout_us: Timeout in microseconds to listen to echo pin. \n        By default is based in sensor limit range (4m)\n        \"\"\"</span>\n        self<span class=\"token punctuation\">.</span>echo_timeout_us <span class=\"token operator\">=</span> echo_timeout_us\n        <span class=\"token comment\"># Init trigger pin (out)</span>\n        self<span class=\"token punctuation\">.</span>trigger <span class=\"token operator\">=</span> Pin<span class=\"token punctuation\">(</span>trigger_pin<span class=\"token punctuation\">,</span> mode<span class=\"token operator\">=</span>Pin<span class=\"token punctuation\">.</span>OUT<span class=\"token punctuation\">,</span> pull<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>trigger<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n \n        <span class=\"token comment\"># Init echo pin (in)</span>\n        self<span class=\"token punctuation\">.</span>echo <span class=\"token operator\">=</span> Pin<span class=\"token punctuation\">(</span>echo_pin<span class=\"token punctuation\">,</span> mode<span class=\"token operator\">=</span>Pin<span class=\"token punctuation\">.</span>IN<span class=\"token punctuation\">,</span> pull<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n \n    <span class=\"token keyword\">def</span> <span class=\"token function\">_send_pulse_and_wait</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        Send the pulse to trigger and listen on echo pin.\n        We use the method `machine.time_pulse_us()` to get the microseconds until the echo is received.\n        \"\"\"</span>\n        self<span class=\"token punctuation\">.</span>trigger<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Stabilize the sensor</span>\n        time<span class=\"token punctuation\">.</span>sleep_us<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>trigger<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># Send a 10us pulse.</span>\n        time<span class=\"token punctuation\">.</span>sleep_us<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>trigger<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n            pulse_time <span class=\"token operator\">=</span> machine<span class=\"token punctuation\">.</span>time_pulse_us<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>echo<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>echo_timeout_us<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">return</span> pulse_time\n        <span class=\"token keyword\">except</span> OSError <span class=\"token keyword\">as</span> ex<span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">if</span> ex<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">110</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 110 = ETIMEDOUT</span>\n                <span class=\"token keyword\">raise</span> OSError<span class=\"token punctuation\">(</span><span class=\"token string\">'Out of range'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">raise</span> ex\n \n    <span class=\"token keyword\">def</span> <span class=\"token function\">distance_mm</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        Get the distance in milimeters without floating point operations.\n        \"\"\"</span>\n        pulse_time <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>_send_pulse_and_wait<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n \n        <span class=\"token comment\"># To calculate the distance we get the pulse_time and divide it by 2 </span>\n        <span class=\"token comment\"># (the pulse walk the distance twice) and by 29.1 becasue</span>\n        <span class=\"token comment\"># the sound speed on air (343.2 m/s), that It's equivalent to</span>\n        <span class=\"token comment\"># 0.34320 mm/us that is 1mm each 2.91us</span>\n        <span class=\"token comment\"># pulse_time // 2 // 2.91 -> pulse_time // 5.82 -> pulse_time * 100 // 582 </span>\n        mm <span class=\"token operator\">=</span> pulse_time <span class=\"token operator\">*</span> <span class=\"token number\">100</span> <span class=\"token operator\">//</span> <span class=\"token number\">582</span>\n        <span class=\"token keyword\">return</span> mm\n \n    <span class=\"token keyword\">def</span> <span class=\"token function\">distance_cm</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token triple-quoted-string string\">\"\"\"\n        Get the distance in centimeters with floating point operations.\n        It returns a float\n        \"\"\"</span>\n        pulse_time <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>_send_pulse_and_wait<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n \n        <span class=\"token comment\"># To calculate the distance we get the pulse_time and divide it by 2 </span>\n        <span class=\"token comment\"># (the pulse walk the distance twice) and by 29.1 becasue</span>\n        <span class=\"token comment\"># the sound speed on air (343.2 m/s), that It's equivalent to</span>\n        <span class=\"token comment\"># 0.034320 cm/us that is 1cm each 29.1us</span>\n        cms <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>pulse_time <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">29.1</span>\n        <span class=\"token keyword\">return</span> cms<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"ä¸»ç¨‹å¼ç¢¼\"><a href=\"#ä¸»ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ä¸»ç¨‹å¼ç¢¼\"></a>ä¸»ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\"><span class=\"token operator\">**</span>main<span class=\"token punctuation\">.</span>py<span class=\"token operator\">**</span>\n\n<span class=\"token keyword\">from</span> machine <span class=\"token keyword\">import</span> Pin <span class=\"token comment\">#åŒ¯å…¥i2cç›¸é—œæ¨¡çµ„å’Œè…³ä½æ¨¡çµ„</span>\n\n<span class=\"token keyword\">from</span> HC_SR04 <span class=\"token keyword\">import</span> HCSR04\n\n<span class=\"token keyword\">import</span> socket<span class=\"token punctuation\">,</span> network\n\n  \n\nssid<span class=\"token operator\">=</span><span class=\"token string\">\"åŸºåœ°å°åç¨±\"</span>\n\npassword<span class=\"token operator\">=</span><span class=\"token string\">\"åŸºåœ°å°å¯†ç¢¼\"</span>\n\nwifi <span class=\"token operator\">=</span> network<span class=\"token punctuation\">.</span>WLAN<span class=\"token punctuation\">(</span>network<span class=\"token punctuation\">.</span>STA_IF<span class=\"token punctuation\">)</span>\n\nwifi<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n\nwifi<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span>ssid<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">)</span>\n\n  \n\nsensor<span class=\"token operator\">=</span>HCSR04<span class=\"token punctuation\">(</span>trigger_pin<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span> echo_pin<span class=\"token operator\">=</span><span class=\"token number\">33</span><span class=\"token punctuation\">,</span> echo\\_timeout\\_us<span class=\"token operator\">=</span><span class=\"token number\">100000</span><span class=\"token punctuation\">)</span>\n\n  \n\n<span class=\"token keyword\">while</span> wifi<span class=\"token punctuation\">.</span>isconnected<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">==</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">pass</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connected Successful!\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"IP: &#123;&#125;\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>wifi<span class=\"token punctuation\">.</span>ifconfig<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n  \n\n<span class=\"token keyword\">def</span> readDist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">global</span> dist\n\n    dist<span class=\"token operator\">=</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>sensor<span class=\"token punctuation\">.</span>distance_cm<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The distance is &#123;:.1f&#125; cm\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>dist<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> dist\n\n  \n\n<span class=\"token keyword\">def</span> htmlPage<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    html<span class=\"token operator\">=</span><span class=\"token triple-quoted-string string\">\"\"\"\n\n        &lt;html>\n\n    &lt;head>\n\n      &lt;meta charset=\"utf-8\" />\n\n      &lt;meta http-equiv=\"refresh\" content=\"1\" />\n\n      &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n\n      &lt;style>\n\n        h1  &#123;text-align: center; background-color: orange; margin-right:5px;&#125;\n\n        dl &#123; width: 320px; margin: 12px auto; &#125;\n\n        dt &#123; \n\n          font-size: 20pt; color: #444; background-color: #ddd;\n\n          margin: 6pt 0; padding: 6pt 12pt;\n\n        &#125;\n\n        dd &#123;\n\n          text-align: right; padding-right: 6pt;\n\n        &#125;\n\n        .num &#123; font-size: 36pt; color: dodgerblue; &#125;\n\n      &lt;/style>\n\n      &lt;/head>\n\n    &lt;body>\n\n      &lt;p>&lt;h1>ESP32 HC-SR04 Distance Test&lt;/h1>&lt;/p>\n\n      &lt;dl>\n\n        &lt;dt>Distance:&lt;/dt>\n\n        &lt;dd class=num>\"\"\"</span><span class=\"token operator\">+</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>dist<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token triple-quoted-string string\">\"\"\"cm&lt;/dd>\n\n      &lt;/dl>\n\n    &lt;/body>\n\n    &lt;/html>\n\n    \"\"\"</span>\n\n    <span class=\"token keyword\">return</span> html\n\ns<span class=\"token operator\">=</span>socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\n\ns<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\ns<span class=\"token punctuation\">.</span>listen<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n\n  \n\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n\n    conn<span class=\"token punctuation\">,</span> addr <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>accept<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Got a connection from %s'</span> <span class=\"token operator\">%</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    req <span class=\"token operator\">=</span> conn<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content = %s'</span> <span class=\"token operator\">%</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    DRead <span class=\"token operator\">=</span> readDist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    response <span class=\"token operator\">=</span> htmlPage<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    conn<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">\"http/1.1 200 OK\\\\n\"</span><span class=\"token punctuation\">)</span>\n\n    conn<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-Type: text/html\\\\n\"</span><span class=\"token punctuation\">)</span>\n\n    conn<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">\"Connection: close\\\\n\\\\n\"</span><span class=\"token punctuation\">)</span>\n\n    conn<span class=\"token punctuation\">.</span>sendall<span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span>\n\n    conn<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"è§£æ\"><a href=\"#è§£æ\" class=\"headerlink\" title=\"è§£æ\"></a>è§£æ</h2><p><strong>åŒ¯å…¥machine, sockt, network, HC_SR04æ¨¡çµ„</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">\n<span class=\"token keyword\">from</span> machine <span class=\"token keyword\">import</span> Pin \n\n<span class=\"token keyword\">from</span> HC_SR04 <span class=\"token keyword\">import</span> HCSR04\n\n<span class=\"token keyword\">import</span> socket<span class=\"token punctuation\">,</span> network<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>è¨­å®šwifié€£ç·š</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">ssid<span class=\"token operator\">=</span><span class=\"token string\">\"åŸºåœ°å°åç¨±\"</span>\n\npassword<span class=\"token operator\">=</span><span class=\"token string\">\"åŸºåœ°å°å¯†ç¢¼\"</span>\n\nwifi <span class=\"token operator\">=</span> network<span class=\"token punctuation\">.</span>WLAN<span class=\"token punctuation\">(</span>network<span class=\"token punctuation\">.</span>STA_IF<span class=\"token punctuation\">)</span>\n\nwifi<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n\nwifi<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span>ssid<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">while</span> wifi<span class=\"token punctuation\">.</span>isconnected<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">==</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">pass</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connected Successful!\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"IP: &#123;&#125;\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>wifi<span class=\"token punctuation\">.</span>ifconfig<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>è¶…éŸ³æ³¢æ¸¬è·</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">sensor<span class=\"token operator\">=</span>HCSR04<span class=\"token punctuation\">(</span>trigger_pin<span class=\"token operator\">=</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span> echo_pin<span class=\"token operator\">=</span><span class=\"token number\">33</span><span class=\"token punctuation\">,</span>echo_timeout_us<span class=\"token operator\">=</span><span class=\"token number\">100000</span><span class=\"token punctuation\">)</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><strong>è®€å–è·é›¢çš„å‡½å¼</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\"><span class=\"token keyword\">def</span> readDist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">global</span> dist\n\n    dist<span class=\"token operator\">=</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>sensor<span class=\"token punctuation\">.</span>distance_cm<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The distance is &#123;:.1f&#125; cm\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>dist<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> dist<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>å‰ç«¯ç¶²é </strong></p>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\">def htmlPage():\n\n    html=\"\"\"\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>refresh<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n\n        <span class=\"token selector\">h1</span>  <span class=\"token punctuation\">&#123;</span><span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span> background-color<span class=\"token punctuation\">:</span> orange<span class=\"token punctuation\">;</span> margin-right<span class=\"token punctuation\">:</span>5px<span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token selector\">dl</span> <span class=\"token punctuation\">&#123;</span> width<span class=\"token punctuation\">:</span> 320px<span class=\"token punctuation\">;</span> margin<span class=\"token punctuation\">:</span> 12px auto<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token selector\">dt</span> <span class=\"token punctuation\">&#123;</span> \n\n          font-size<span class=\"token punctuation\">:</span> 20pt<span class=\"token punctuation\">;</span> color<span class=\"token punctuation\">:</span> #444<span class=\"token punctuation\">;</span> background-color<span class=\"token punctuation\">:</span> #ddd<span class=\"token punctuation\">;</span>\n\n          margin<span class=\"token punctuation\">:</span> 6pt 0<span class=\"token punctuation\">;</span> padding<span class=\"token punctuation\">:</span> 6pt 12pt<span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token selector\">dd</span> <span class=\"token punctuation\">&#123;</span>\n\n          text-align<span class=\"token punctuation\">:</span> right<span class=\"token punctuation\">;</span> padding-right<span class=\"token punctuation\">:</span> 6pt<span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token selector\">.num</span> <span class=\"token punctuation\">&#123;</span> font-size<span class=\"token punctuation\">:</span> 36pt<span class=\"token punctuation\">;</span> color<span class=\"token punctuation\">:</span> dodgerblue<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span>\n\n      </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>ESP32 HC-SR04 Distance Test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dl</span><span class=\"token punctuation\">></span></span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dt</span><span class=\"token punctuation\">></span></span>Distance:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dt</span><span class=\"token punctuation\">></span></span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dd</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>num</span><span class=\"token punctuation\">></span></span>\"\"\"+str(dist)+\"\"\"cm<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dd</span><span class=\"token punctuation\">></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dl</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span>\n\n    \"\"\"\n\n    return html\n\n  <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>socketå¥—æ¥</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">s<span class=\"token operator\">=</span>socket<span class=\"token punctuation\">.</span>socket<span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">.</span>AF_INET<span class=\"token punctuation\">,</span> socket<span class=\"token punctuation\">.</span>SOCK_STREAM<span class=\"token punctuation\">)</span>\n\ns<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\ns<span class=\"token punctuation\">.</span>listen<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n\n  \n\n<span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n\n    conn<span class=\"token punctuation\">,</span> addr <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span>accept<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Got a connection from %s'</span> <span class=\"token operator\">%</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>addr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    req <span class=\"token operator\">=</span> conn<span class=\"token punctuation\">.</span>recv<span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content = %s'</span> <span class=\"token operator\">%</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    DRead <span class=\"token operator\">=</span> readDist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    response <span class=\"token operator\">=</span> htmlPage<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    conn<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">\"http/1.1 200 OK\\n\"</span><span class=\"token punctuation\">)</span>\n\n    conn<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-Type: text/html\\n\"</span><span class=\"token punctuation\">)</span>\n\n    conn<span class=\"token punctuation\">.</span>send<span class=\"token punctuation\">(</span><span class=\"token string\">\"Connection: close\\n\\n\"</span><span class=\"token punctuation\">)</span>\n\n    conn<span class=\"token punctuation\">.</span>sendall<span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span>\n\n    conn<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/10foDr8unxo\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>","categories":["micropython","esp32"],"tags":["hc-sr04","web server"]},{"title":"ç¶²é æ§åˆ¶LED-micropython","url":"/2021/08/29/%E7%B6%B2%E9%A0%81%E6%8E%A7%E5%88%B6LED-micropython/","content":"<h1 id=\"ç¶²é æ§åˆ¶LED-micropython\"><a href=\"#ç¶²é æ§åˆ¶LED-micropython\" class=\"headerlink\" title=\"ç¶²é æ§åˆ¶LED-micropython\"></a>ç¶²é æ§åˆ¶LED-micropython</h1><h6 id=\"tags-micropython-wifi-amp-led\"><a href=\"#tags-micropython-wifi-amp-led\" class=\"headerlink\" title=\"tags: micropython wifi&amp;led\"></a>tags: <code>micropython</code> <code>wifi&amp;led</code></h6><hr>\n<p><strong>å› ç‚ºæ˜¯ç”¨å…§å»ºçš„LEDæ‰€ä»¥ä¸ç”¨æ¥ä»»ä½•æœé‚¦ç·š</strong></p>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">fromÂ machineÂ importÂ Pin\n\nimportÂ network,Â socket\n\n  \n\nssid&#x3D;&quot;---&quot;\n\npassword&#x3D;&quot;------&quot;\n\nled&#x3D;Pin(2,Â Pin.OUT)\n\nledState&#x3D;&quot;OFF&quot;\n\ndefÂ sw_page():\n\nÂ Â Â Â ifÂ led.value()Â &#x3D;&#x3D;Â 1:\n\nÂ Â Â Â Â Â Â Â ledState&#x3D;&quot;ON&quot;\n\nÂ Â Â Â else:\n\nÂ Â Â Â Â Â Â Â ledState&#x3D;&quot;OFF&quot;\n\nÂ Â Â Â html&#x3D;&quot;&quot;&quot;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;html&gt;\n\nÂ Â Â Â Â Â Â Â &lt;head&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;title&gt;ESP32Â ç¶²é ä¼ºæœå™¨æ§åˆ¶ç·´ç¿’&lt;&#x2F;title&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;metaÂ name&#x3D;&quot;viewport&quot;Â content&#x3D;&quot;width&#x3D;device-width,Â initialï¿¾\n\nÂ Â Â Â Â Â Â Â Â Â Â Â scale&#x3D;1&quot;&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;linkÂ rel&#x3D;&quot;icon&quot;Â href&#x3D;&quot;data:,&quot;&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;style&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â htmlÂ &#123;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â text-align:Â center;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â font-family:Â Arial;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â display:Â inline-block;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â margin:Â auto;&#125;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .buttonÂ &#123;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â background-color:Â #e0e252;Â &#x2F;*Â GreenÂ *&#x2F;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â border:Â none;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â color:Â white;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â padding:Â 15pxÂ 35px;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â text-align:Â center;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â text-decoration:Â none;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â display:Â inline-block;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â font-size:Â 16px;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &#125;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .button2Â &#123;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â background-color:Â #b0b1a2;Â &#x2F;*Â GreenÂ *&#x2F;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â padding:Â 15pxÂ 32px;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &#125;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;&#x2F;style&gt;\n\nÂ Â Â Â Â Â Â Â &lt;&#x2F;head&gt;\n\n  \n\nÂ Â Â Â Â Â Â Â &lt;body&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;h1&gt;ESP32Â ç¶²é ä¼ºæœå™¨æ§åˆ¶ç·´ç¿’&lt;&#x2F;h1&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;p&gt;GPIO-2Â ç‹€æ…‹:Â &lt;strong&gt;&quot;&quot;&quot;Â +Â ledStateÂ +Â &quot;&quot;&quot;&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;p&gt;&lt;aÂ href&#x3D;&quot;&#x2F;on&quot;&gt;&lt;buttonÂ class&#x3D;&quot;button&quot;&gt;ON&lt;&#x2F;button&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;p&gt;&lt;aÂ href&#x3D;&quot;&#x2F;off&quot;&gt;&lt;buttonÂ class&#x3D;&quot;buttonÂ button2&quot;&gt;OFF&lt;&#x2F;button&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;\n\nÂ Â Â Â Â Â Â Â &lt;&#x2F;body&gt;\n\n  \n\nÂ Â Â Â Â Â Â Â &lt;&#x2F;html&gt;\n\nÂ Â Â Â &quot;&quot;&quot;\n\nÂ Â Â Â returnÂ html\n\nwifi&#x3D;network.WLAN(network.STA_IF)\n\nwifi.active(True)\n\nwifi.connect(ssid,Â password)\n\nwhileÂ wifi.isconnected()&#x3D;&#x3D;False:\n\nÂ Â Â Â pass\n\nprint(&quot;connectedÂ sccessful!&quot;)\n\nprint(&quot;IP:Â &#123;&#125;&quot;.format(wifi.ifconfig()))\n\n  \n\ns&#x3D;socket.socket(socket.AF_INET,Â socket.SOCK_STREAM)\n\ns.bind((&#39;&#39;,Â 80))\n\ns.listen(5)\n\n  \n\nwhileÂ True:\n\nÂ Â Â Â conn,Â addrÂ &#x3D;Â s.accept()\n\nÂ Â Â Â print(&quot;gotÂ aÂ connectÂ fromÂ %s&quot;%str(addr))\n\nÂ Â Â Â requestÂ &#x3D;Â conn.recv(1024)\n\nÂ Â Â Â requestÂ &#x3D;Â str(request)\n\nÂ Â Â Â print(&quot;contextÂ &#x3D;Â %s&quot;%request)\n\nÂ Â Â Â led_onÂ &#x3D;Â request.find(&quot;&#x2F;on&quot;)\n\nÂ Â Â Â led_offÂ &#x3D;Â request.find(&quot;&#x2F;off&quot;)\n\nÂ Â Â Â ifÂ led_onÂ &#x3D;&#x3D;Â 6:\n\nÂ Â Â Â Â Â Â Â led.value(1)\n\nÂ Â Â Â Â Â Â Â print(&quot;ON&quot;)\n\nÂ Â Â Â ifÂ led_offÂ &#x3D;&#x3D;Â 6:\n\nÂ Â Â Â Â Â Â Â led.value(0)\n\nÂ Â Â Â Â Â Â Â print(&quot;OFF&quot;)\n\nÂ Â Â Â responesÂ &#x3D;Â sw_page()\n\nÂ Â Â Â conn.send(&quot;HTTP&#x2F;1.1Â 200Â OK\\n&quot;)\n\nÂ Â Â Â conn.send(&quot;Context-Type:Â text&#x2F;html\\n&quot;)\n\nÂ Â Â Â conn.send(&quot;Connection:Â close\\n\\n&quot;)\n\nÂ Â Â Â conn.sendall(respones)\n\nÂ Â Â Â conn.close()\n\n  <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<hr>\n<h2 id=\"è§£æ\"><a href=\"#è§£æ\" class=\"headerlink\" title=\"è§£æ\"></a>è§£æ</h2><p><strong>åŒ¯å…¥è…³ä½å’Œwifiå’Œå¥—æ¥çš„æ¨¡çµ„</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">fromÂ machineÂ importÂ Pin\n\nimportÂ network,Â socket<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p><strong>wifié€£ç·šè¨­å®š</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">ssid&#x3D;&quot;åŸºåœ°å°åç¨±&quot;\n\npassword&#x3D;&quot;åŸºåœ°å°å¯†ç¢¼&quot;\n\nwifi&#x3D;network.WLAN(network.STA_IF)\n\nwifi.active(True)\n\nwifi.connect(ssid,Â password)\n\nwhileÂ wifi.isconnected()&#x3D;&#x3D;False:\n\nÂ Â Â Â pass\n\nprint(&quot;connectedÂ sccessful!&quot;)\n\nprint(&quot;IP:Â &#123;&#125;&quot;.format(wifi.ifconfig()))\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>ä¸»è¦é€™è£¡æ˜¯å‰ç«¯ç¶²é ,ifå’Œelseæ˜¯åœ¨æ§åˆ¶ç¶²é çš„é–‹å•“å°±é¡¯ç¤ºON,å¦å‰‡é¡¯ç¤ºOFF</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">defÂ sw_page():\n\nÂ Â Â Â ifÂ led.value()Â &#x3D;&#x3D;Â 1:\n\nÂ Â Â Â Â Â Â Â ledState&#x3D;&quot;ON&quot;\n\nÂ Â Â Â else:\n\nÂ Â Â Â Â Â Â Â ledState&#x3D;&quot;OFF&quot;\n\nÂ Â Â Â html&#x3D;&quot;&quot;&quot;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;html&gt;\n\nÂ Â Â Â Â Â Â Â &lt;head&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;title&gt;ESP32Â ç¶²é ä¼ºæœå™¨æ§åˆ¶ç·´ç¿’&lt;&#x2F;title&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;metaÂ name&#x3D;&quot;viewport&quot;Â content&#x3D;&quot;width&#x3D;device-width,Â initialï¿¾\n\nÂ Â Â Â Â Â Â Â Â Â Â Â scale&#x3D;1&quot;&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;linkÂ rel&#x3D;&quot;icon&quot;Â href&#x3D;&quot;data:,&quot;&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;style&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â htmlÂ &#123;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â text-align:Â center;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â font-family:Â Arial;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â display:Â inline-block;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â margin:Â auto;&#125;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .buttonÂ &#123;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â background-color:Â #e0e252;Â &#x2F;*Â GreenÂ *&#x2F;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â border:Â none;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â color:Â white;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â padding:Â 15pxÂ 35px;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â text-align:Â center;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â text-decoration:Â none;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â display:Â inline-block;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â font-size:Â 16px;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &#125;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .button2Â &#123;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â background-color:Â #b0b1a2;Â &#x2F;*Â GreenÂ *&#x2F;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â padding:Â 15pxÂ 32px;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &#125;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;&#x2F;style&gt;\n\nÂ Â Â Â Â Â Â Â &lt;&#x2F;head&gt;\n\n  \n\nÂ Â Â Â Â Â Â Â &lt;body&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;h1&gt;ESP32Â ç¶²é ä¼ºæœå™¨æ§åˆ¶ç·´ç¿’&lt;&#x2F;h1&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;p&gt;GPIO-2Â ç‹€æ…‹:Â &lt;strong&gt;&quot;&quot;&quot;Â +Â ledStateÂ +Â &quot;&quot;&quot;&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;p&gt;&lt;aÂ href&#x3D;&quot;&#x2F;on&quot;&gt;&lt;buttonÂ class&#x3D;&quot;button&quot;&gt;ON&lt;&#x2F;button&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â &lt;p&gt;&lt;aÂ href&#x3D;&quot;&#x2F;off&quot;&gt;&lt;buttonÂ class&#x3D;&quot;buttonÂ button2&quot;&gt;OFF&lt;&#x2F;button&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;\n\nÂ Â Â Â Â Â Â Â &lt;&#x2F;body&gt;\n\n  \n\nÂ Â Â Â Â Â Â Â &lt;&#x2F;html&gt;\n\nÂ Â Â Â &quot;&quot;&quot;\n\nÂ Â Â Â returnÂ html<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<hr>\n<p><strong>ä»¥ä¸‹æ˜¯å¥—æ¥</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">s&#x3D;socket.socket(socket.AF_INET,Â socket.SOCK_STREAM)\n\ns.bind((&#39;&#39;,Â 80))\n\ns.listen(5)\n\n  \n\nwhileÂ True:\n\nÂ Â Â Â conn,Â addrÂ &#x3D;Â s.accept()\n\nÂ Â Â Â print(&quot;gotÂ aÂ connectÂ fromÂ %s&quot;%str(addr))\n\nÂ Â Â Â requestÂ &#x3D;Â conn.recv(1024)\n\nÂ Â Â Â requestÂ &#x3D;Â str(request)\n\nÂ Â Â Â print(&quot;contextÂ &#x3D;Â %s&quot;%request)\n\nÂ Â Â Â led_onÂ &#x3D;Â request.find(&quot;&#x2F;on&quot;)\n\nÂ Â Â Â led_offÂ &#x3D;Â request.find(&quot;&#x2F;off&quot;)\n\nÂ Â Â Â ifÂ led_onÂ &#x3D;&#x3D;Â 6:\n\nÂ Â Â Â Â Â Â Â led.value(1)\n\nÂ Â Â Â Â Â Â Â print(&quot;ON&quot;)\n\nÂ Â Â Â ifÂ led_offÂ &#x3D;&#x3D;Â 6:\n\nÂ Â Â Â Â Â Â Â led.value(0)\n\nÂ Â Â Â Â Â Â Â print(&quot;OFF&quot;)\n\nÂ Â Â Â responesÂ &#x3D;Â sw_page()\n\nÂ Â Â Â conn.send(&quot;HTTP&#x2F;1.1Â 200Â OK\\n&quot;)\n\nÂ Â Â Â conn.send(&quot;Context-Type:Â text&#x2F;html\\n&quot;)\n\nÂ Â Â Â conn.send(&quot;Connection:Â close\\n\\n&quot;)\n\nÂ Â Â Â conn.sendall(respones)\n\nÂ Â Â Â conn.close()<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/OmbY4UQ8Kcc\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>","categories":["micropython","esp32"],"tags":["web server"]},{"title":"BMP280æ°£å£“,æº«åº¦æ¨¡çµ„-micropython","url":"/2021/08/29/BMP280%E6%B0%A3%E5%A3%93-%E6%BA%AB%E5%BA%A6%E6%A8%A1%E7%B5%84-micropython/","content":"<h1 id=\"BMP280æ°£å£“-æº«åº¦æ¨¡çµ„-micropython\"><a href=\"#BMP280æ°£å£“-æº«åº¦æ¨¡çµ„-micropython\" class=\"headerlink\" title=\"BMP280æ°£å£“,æº«åº¦æ¨¡çµ„-micropython\"></a>BMP280æ°£å£“,æº«åº¦æ¨¡çµ„-micropython</h1><h6 id=\"tags-micropython-bmp280\"><a href=\"#tags-micropython-bmp280\" class=\"headerlink\" title=\"tags: micropython bmp280\"></a>tags: <code>micropython</code> <code>bmp280</code></h6><p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2288121610458811026?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-4LdM2J8lnOY/YPV1dYnda-I/AAAAAAAAecQ/OXHYgyYLfkgCzpZzyPV9wC_xhR4CiLv2ACNcBGAsYHQ/s320/21805656779815_796.jpg\"></a></p>\n<p>**_BMP280,è©²å‚³æ„Ÿå™¨å¯ä»¥éå¸¸æº–ç¢ºåœ°æ¸¬é‡æ°£å£“å’Œæº«åº¦ã€‚  </p>\n<p>æ‚¨å¯ä»¥ä½¿ç”¨ I2C æˆ– SPI é€£æ¥å”è­°å°‡å…¶èˆ‡æ‚¨çš„ Arduino æ¿é€£æ¥ã€‚å®ƒæœ‰ä¸€å€‹ 3.3V ç©©å£“å™¨å’Œé›»å¹³è½‰æ›ï¼Œå› æ­¤æ‚¨å¯ä»¥æ¯«ç„¡å•é¡Œåœ°å°‡å®ƒèˆ‡ 3V æˆ– 5V é‚è¼¯å¾®æ§åˆ¶å™¨ä¸€èµ·ä½¿ç”¨ã€‚_**</p>\n<hr>\n<h2 id=\"æ¥ç·š\"><a href=\"#æ¥ç·š\" class=\"headerlink\" title=\"æ¥ç·š\"></a>æ¥ç·š</h2><p>| BME280 | ESP32 |<br>| Vin | 3.3V |<br>| GND | GND |<br>| SCL | GPIO 22 |<br>| SDA | GPIO 21 |</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2288121610458811026?hl=zh-TW#\"><img src=\"https://i0.wp.com/randomnerdtutorials.com/wp-content/uploads/2018/08/ESP32-bme280_bb_f-768x669.png?resize=768,669&quality=100&strip=all&ssl=1\"></a></p>\n<hr>\n<p><strong>å°‡<a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2288121610458811026?hl=zh-TW#\">bmp280.py</a>ä¸Šå‚³åˆ°æ¿å­è£¡,ä»¥ä¾¿å¯è¼‰å…¥å‡½å¼åº«</strong></p>\n<p>**</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2288121610458811026?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-1m3Ca316Awg/YPYqYTi4jhI/AAAAAAAAeco/IfQy-3mEXxslGaYpVXR_pTnkesOTuea5wCNcBGAsYHQ/w711-h400/b.jpg\"></a></p>\n<p>**</p>\n<hr>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">fromÂ machineÂ importÂ SoftI2C,Â Pin,Â sleep\n\nfromÂ bmp280Â importÂ BMP280\n\nwhileÂ True:\n\nÂ Â Â Â i2c&#x3D;SoftI2C(sda&#x3D;Pin(21),Â scl&#x3D;Pin(22))\n\nÂ Â Â Â bmp&#x3D;BMP280(i2c)\n\nÂ Â Â Â temp&#x3D;bmp.temperature\n\nÂ Â Â Â pressure&#x3D;bmp.pressure\n\nÂ Â Â Â print(&quot;TemptureÂ &#x3D;Â &#123;&#125;Â *C&quot;.format(temp))\n\nÂ Â Â Â print(&quot;PressureÂ &#x3D;Â &#123;&#125;Â hPa&quot;.format(pressure))\n\nÂ Â Â Â print(&quot;&#x3D;&quot;*20)\n\nÂ Â Â Â sleep(1000)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<hr>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;Â Â Â \n\nTemptureÂ &#x3D;Â 24.67Â *CÂ Â Â Â \n\nPressureÂ &#x3D;Â 77892.58Â hPa\n\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","categories":["micropython","esp32"],"tags":["bmp280"]},{"title":"æº«æ¿•åº¦å‚³æ„Ÿå™¨(DHT11/12)+ThingSpeak","url":"/2021/08/29/%E6%BA%AB%E6%BF%95%E5%BA%A6%E5%82%B3%E6%84%9F%E5%99%A8-DHT11-12-ThingSpeak/","content":"<h1 id=\"æº«æ¿•åº¦å‚³æ„Ÿå™¨-DHT11-12-ThingSpeak\"><a href=\"#æº«æ¿•åº¦å‚³æ„Ÿå™¨-DHT11-12-ThingSpeak\" class=\"headerlink\" title=\"æº«æ¿•åº¦å‚³æ„Ÿå™¨(DHT11/12)+ThingSpeak\"></a>æº«æ¿•åº¦å‚³æ„Ÿå™¨(DHT11/12)+ThingSpeak</h1><h6 id=\"tags-micropython-thingspeak-dht11-dht12\"><a href=\"#tags-micropython-thingspeak-dht11-dht12\" class=\"headerlink\" title=\"tags: micropython thingspeak dht11/dht12\"></a>tags: <code>micropython</code> <code>thingspeak</code> <code>dht11/dht12</code></h6><p><a href=\"https://1.bp.blogspot.com/-wKr7F1FYVIg/YPjC09ruT-I/AAAAAAAAegA/lJ2_JcIB1eUkbiPNuHqpejBJzidrbNYEwCNcBGAsYHQ/s1920/1.jpg\"><img src=\"https://1.bp.blogspot.com/-wKr7F1FYVIg/YPjC09ruT-I/AAAAAAAAegA/lJ2_JcIB1eUkbiPNuHqpejBJzidrbNYEwCNcBGAsYHQ/w633-h269/1.jpg\"></a></p>\n<hr>\n<p><strong>å›é¡§DHT11/12å¯¦ä½œç´€éŒ„</strong></p>\n<p><strong>åŸºæœ¬ä»‹ç´¹å’Œå¯¦é©—åƒè€ƒ-</strong><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2584628173386400659?hl=zh-TW#\">https://esp32-blairan.blogspot.com/2021/07/dht11dht12-esp32.html</a></p>\n<hr>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2584628173386400659?hl=zh-TW#\"><img src=\"http://2.bp.blogspot.com/-3syBdItbhrI/Vb6X8sJx7tI/AAAAAAAAEO8/cMmlSOV142M/s320/dht11.jpg\"></a></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">importÂ dht\n\nfromÂ machineÂ importÂ Pin\n\nfromÂ timeÂ importÂ sleep\n\n\ndefÂ measureTemp():\n\nÂ Â Â Â sensor&#x3D;dht.DHT11(Pin(4))\n\nÂ Â Â Â whileÂ True:\n\nÂ Â Â Â Â Â Â Â try:\n\nÂ Â Â Â Â Â Â Â Â Â Â Â sleep(2)\n\nÂ Â Â Â Â Â Â Â Â Â Â Â sensor.measure()\n\nÂ Â Â Â Â Â Â Â Â Â Â Â t&#x3D;sensor.temperature()\n\nÂ Â Â Â Â Â Â Â Â Â Â Â t_f&#x3D;t*(9&#x2F;5)+32\n\nÂ Â Â Â Â Â Â Â Â Â Â Â h&#x3D;sensor.humidity()\n\nÂ Â Â Â Â Â Â Â Â Â Â Â print(&quot;Temp:Â &#123;:.1f&#125;.C&quot;.format(t))\n\nÂ Â Â Â Â Â Â Â Â Â Â Â print(&quot;Temp:Â &#123;:.1f&#125;.F&quot;.format(t_f))\n\nÂ Â Â Â Â Â Â Â Â Â Â Â print(&quot;Humidity:Â &#123;:.1f&#125;&quot;.format(h))\n\nÂ Â Â Â Â Â Â Â exceptÂ OSErrorÂ asÂ o:\n\nÂ Â Â Â Â Â Â Â Â Â Â Â print(&quot;FailedÂ toÂ readÂ sensor.&quot;)\n\nifÂ __name__Â &#x3D;&#x3D;Â &#39;__main__&#39;:\n\nÂ Â Â Â measureTemp()<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>è¼‰å…¥dhtåº«(å…§å»º)</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">importÂ dht\n\nfromÂ machineÂ importÂ Pin\n\nfromÂ timeÂ importÂ sleep<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>æŒ‡å®šDHT11è…³ä½çµ¦sensorè®Šæ•¸</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">sensor&#x3D;dht.DHT11(Pin(4))<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>çµ¦äºˆwhile()æ¯2ç§’ä¸æ–·åµæ¸¬</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">sleep(2)\n\nsensor.measure()\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>æ”æ°æº«åº¦(t)/è¯æ°æº«åº¦(t_f)/æ¿•åº¦</strong></p>\n<p><strong>å…¶ä¸­æ”æ°è½‰æ›è¯æ°çš„å…¬å¼:æ”æ°x(9/5)+32</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">t&#x3D;sensor.temperature()\n\nt_f&#x3D;t*(9&#x2F;5)+32\n\nh&#x3D;sensor.humidity()\n\nprint(&quot;Temp:Â &#123;:.1f&#125;.C&quot;.format(t))\n\nprint(&quot;Temp:Â &#123;:.1f&#125;.F&quot;.format(t_f))\n\nprint(&quot;Humidity:Â &#123;:.1f&#125;&quot;.format(h))<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"çµæœ\"><a href=\"#çµæœ\" class=\"headerlink\" title=\"çµæœ\"></a>çµæœ</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">&gt;&gt;&gt;Â Temp:Â 26.0.C\n\nTemp:Â 78.8.F\n\nHumidity:Â 27.0\n\nTemp:Â 26.0.C\n\nTemp:Â 78.8.F\n\nHumidity:Â 27.0\n\nTemp:Â 26.0.C\n\nTemp:Â 78.8.F\n\nHumidity:Â 27.0<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<hr>\n<h2 id=\"å¦‚ä½•ä¸Šå‚³æ•¸æ“šåˆ°ThingSpeak\"><a href=\"#å¦‚ä½•ä¸Šå‚³æ•¸æ“šåˆ°ThingSpeak\" class=\"headerlink\" title=\"å¦‚ä½•ä¸Šå‚³æ•¸æ“šåˆ°ThingSpeak\"></a>å¦‚ä½•ä¸Šå‚³æ•¸æ“šåˆ°ThingSpeak</h2><p><strong>å…ˆåˆ°æ­¤<a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2584628173386400659?hl=zh-TW#\">ThingSpeak</a>ç¶²ç«™è¨»å†Šä¸€å¸³è™Ÿ</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2584628173386400659?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-4RxhjYmlh_w/YPi8P5fsN8I/AAAAAAAAeeM/yzV1oiE05VgEVVeNwhVCtsFwQ1cfASN-gCNcBGAsYHQ/w934-h353/4.jpg\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2584628173386400659?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-M_V8HTIXrOE/YPi8nmVCETI/AAAAAAAAee0/1F322PD3xF8K2cShI60AYjD5SWHSU1H8gCNcBGAsYHQ/w862-h326/3.jpg\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2584628173386400659?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-g2Npin1ea78/YPi9X5a3scI/AAAAAAAAefY/NIGB1rmS9EktBe1uC1izXbW9rrMA0VrEgCNcBGAsYHQ/w659-h286/5.jpg\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2584628173386400659?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-mDsWT2vL9uI/YPi9gFDE3tI/AAAAAAAAefc/TtXCW9i2P949XybIa09n606lHwmW-PnwACNcBGAsYHQ/w654-h284/6.jpg\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2584628173386400659?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-mrzm6S71djU/YPi9lqFmdLI/AAAAAAAAefg/Xr5UMJs2m9wzKy6hHJvW-_NDyP5wFljYwCNcBGAsYHQ/w651-h283/7.jpg\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2584628173386400659?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-Dk5fmn8xP0Q/YPi9ro_CJvI/AAAAAAAAefk/8bRay8G7aVYqN5E4szIINBNhkAm0aAYcwCNcBGAsYHQ/w692-h368/8.jpg\"></a></p>\n<hr>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2584628173386400659?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-FcMZGCGvGjI/YPi-kOFx8II/AAAAAAAAefw/8lNcoOipruwT3wRTrRYwn36ZL8Eldl8QQCNcBGAsYHQ/w758-h329/%25E6%2593%25B7%25E5%258F%2596_2021_07_22_08_13_19_130.jpg\"></a></p>\n<hr>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">importÂ network,Â urequests\n\nfromÂ machineÂ importÂ Pin\n\nimportÂ dht\n\nfromÂ timeÂ importÂ sleep\n\n  \n\nssid&#x3D;&quot;åŸºåœ°å°åç¨±&quot;\n\npassword&#x3D;&quot;åŸºåœ°å°å¯†ç¢¼&quot;\n\napi_key&#x3D;&quot;VCJQHQFVSMB-----&quot;\n\ndht11&#x3D;dht.DHT11(Pin(27))\n\nsleep(1)\n\ndefÂ wifiContent():\n\nÂ Â Â Â globalÂ ssid,Â password\n\nÂ Â Â Â wifi&#x3D;network.WLAN(network.STA_IF)\n\nÂ Â Â Â wifi.active(True)\n\nÂ Â Â Â wifi.connect(ssid,Â password)\n\nÂ Â Â Â whileÂ wifi.isconnected()Â &#x3D;&#x3D;Â False:\n\nÂ Â Â Â Â Â Â Â pass\n\nÂ Â Â Â print(&quot;connectedÂ successful!&quot;)\n\nÂ Â Â Â print(&quot;IP:Â &#123;&#125;&quot;.format(wifi.ifconfig()))\n\ndefÂ getDHT():\n\nÂ Â Â Â whileÂ (1):\n\nÂ Â Â Â Â Â Â Â dht11.measure()\n\nÂ Â Â Â Â Â Â Â d&#x3D;dht11.temperature()\n\nÂ Â Â Â Â Â Â Â rh&#x3D;dht11.humidity()\n\nÂ Â Â Â Â Â Â Â print(&quot;Temp:Â &#123;:.1f&#125;*C,Â Â Humi:Â &#123;:.1f&#125;%RH&quot;.format(d,Â rh))\n\nÂ Â Â Â Â Â Â Â uloadUrl&#x3D;&quot;https:&#x2F;&#x2F;api.thingspeak.com&#x2F;update?api_key&#x3D;&#123;&#125;&amp;field1&#x3D;&#123;&#125;&amp;field2&#x3D;&#123;&#125;&quot;.format(api,Â d,Â rh)\n\nÂ Â Â Â Â Â Â Â try:\n\nÂ Â Â Â Â Â Â Â Â Â Â Â res&#x3D;urequests.get(uloadUrl)\n\nÂ Â Â Â Â Â Â Â Â Â Â Â print(res.text)\n\nÂ Â Â Â Â Â Â Â exceptÂ OSErrorÂ asÂ e:\n\nÂ Â Â Â Â Â Â Â Â Â Â Â print(e)\n\nÂ Â Â Â Â Â Â Â sleep(16)\n\nifÂ __name__&#x3D;&#x3D;&quot;__main__&quot;:\n\nÂ Â Â Â wifiContent()\n\nÂ Â Â Â getDHT()\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"è§£æ\"><a href=\"#è§£æ\" class=\"headerlink\" title=\"è§£æ\"></a>è§£æ</h2><p><strong><em>åŒ¯å…¥å°æ‡‰çš„æ¨¡çµ„,å…¶urequestæ˜¯å°å‹çˆ¬èŸ²,å¯ç”¨æ–¼æŠ“å–å’Œä¸Šå‚³</em></strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">importÂ network,Â urequests\n\nfromÂ machineÂ importÂ Pin\n\nimportÂ dht\n\nfromÂ timeÂ importÂ sleep<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong><em>åŸºåœ°å°åç¨±å’Œå¯†ç¢¼å…ˆçµ¦äºˆè®Šæ•¸,é‚„æœ‰å‰›åœ¨ThingSpeakçµ¦çš„api_key</em></strong></p>\n<p><strong><em>dhtè…³ä½è¨­å®š,åœæ­¢ä¸€ç§’ä½¿å…¶åˆå§‹åŒ–å®Œå…¨</em></strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">ssid&#x3D;&quot;åŸºåœ°å°åç¨±&quot;\n\npassword&#x3D;&quot;åŸºåœ°å°å¯†ç¢¼&quot;\n\napi&#x3D;&quot;VCJQHQFVSMB-----&quot;\n\ndht11&#x3D;dht.DHT11(Pin(27))\n\nsleep(1)\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><em><strong>é€™å€‹å°åŒ…è£¡æ˜¯é€£æ¥wifiçš„æµç¨‹</strong></em></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">defÂ wifiContent():\n\nÂ Â Â Â globalÂ ssid,Â password\n\nÂ Â Â Â wifi&#x3D;network.WLAN(network.STA_IF)\n\nÂ Â Â Â wifi.active(True)\n\nÂ Â Â Â wifi.connect(ssid,Â password)\n\nÂ Â Â Â whileÂ wifi.isconnected()Â &#x3D;&#x3D;Â False:\n\nÂ Â Â Â Â Â Â Â pass\n\nÂ Â Â Â print(&quot;connectedÂ successful!&quot;)\n\nÂ Â Â Â print(&quot;IP:Â &#123;&#125;&quot;.format(wifi.ifconfig()))\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong><em>é€™å€‹å°åŒ…è£¡æ˜¯è®€å–dht11/12æ•¸æ“š,å’Œä¸Šå‚³åˆ°ThingSpeakåŒæ­¥</em></strong></p>\n<p>*<strong>å¦‚æœæœ‰ä¸€å€‹ä»¥ä¸Šçš„æ•¸æ“š,é™¤äº†ThingSpeakç¶²ç«™ä¸Šè¦è¨­å®šä¸€å€‹ä»¥ä¸Šçš„å°æ‡‰æ¬„ä½,å†ä¾†å°±æ˜¯ç¨‹å¼çš„ç¶²å€æ ¼å¼,ä¾‹å¦‚:</strong></p>\n<p><strong>api_key</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">api_key&#x3D;&#123;&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>2å€‹æ•¸æ“šä¸Šå‚³åˆ°ç¶²ç«™çš„2å€‹æ¬„ä½,field1ä»£è¡¨ç¬¬ä¸€å€‹æ¬„ä½,field2ä»£è¡¨ç¬¬äºŒå€‹æ¬„ä½</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">&amp;field1&#x3D;&#123;&#125;&amp;field2&#x3D;&#123;&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">defÂ getDHT():\n\nÂ Â Â Â whileÂ (1):\n\nÂ Â Â Â Â Â Â Â dht11.measure()\n\nÂ Â Â Â Â Â Â Â d&#x3D;dht11.temperature()\n\nÂ Â Â Â Â Â Â Â rh&#x3D;dht11.humidity()\n\nÂ Â Â Â Â Â Â Â print(&quot;Temp:Â &#123;:.1f&#125;*C,Â Â Humi:Â &#123;:.1f&#125;%RH&quot;.format(d,Â rh))\n\nÂ Â Â Â Â Â Â Â uloadUrl&#x3D;&quot;https:&#x2F;&#x2F;api.thingspeak.com&#x2F;update?api_key&#x3D;&#123;&#125;&amp;field1&#x3D;&#123;&#125;&amp;field2&#x3D;&#123;&#125;&quot;.format(api,Â d,Â rh)\n\nÂ Â Â Â Â Â Â Â try:\n\nÂ Â Â Â Â Â Â Â Â Â Â Â res&#x3D;urequests.get(uloadUrl)\n\nÂ Â Â Â Â Â Â Â Â Â Â Â print(res.text)\n\nÂ Â Â Â Â Â Â Â exceptÂ OSErrorÂ asÂ e:\n\nÂ Â Â Â Â Â Â Â Â Â Â Â print(e)\n\nÂ Â Â Â Â Â Â Â sleep(16)\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<hr>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/2584628173386400659?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-lggjIDGj9VA/YPjA-2exaYI/AAAAAAAAef4/QN52OngWLS4MVqiFHVu2lF5D_EC-BE89wCNcBGAsYHQ/w730-h410/2.jpg\"></a></p>\n","categories":["micropython","esp32"],"tags":["dht11/dht12","thingSpeak"]},{"title":"DS18B20æº«åº¦æ„Ÿæ‡‰æ¨¡çµ„+é¡¯ç¤ºç¶²é -micropython","url":"/2021/08/29/DS18B20%E6%BA%AB%E5%BA%A6%E6%84%9F%E6%87%89%E6%A8%A1%E7%B5%84-%E9%A1%AF%E7%A4%BA%E7%B6%B2%E9%A0%81-micropython/","content":"<h1 id=\"DS18B20æº«åº¦æ„Ÿæ‡‰æ¨¡çµ„-é¡¯ç¤ºç¶²é -micropython\"><a href=\"#DS18B20æº«åº¦æ„Ÿæ‡‰æ¨¡çµ„-é¡¯ç¤ºç¶²é -micropython\" class=\"headerlink\" title=\"DS18B20æº«åº¦æ„Ÿæ‡‰æ¨¡çµ„+é¡¯ç¤ºç¶²é -micropython\"></a>DS18B20æº«åº¦æ„Ÿæ‡‰æ¨¡çµ„+é¡¯ç¤ºç¶²é -micropython</h1><h6 id=\"tags-micropython-ds18b20\"><a href=\"#tags-micropython-ds18b20\" class=\"headerlink\" title=\"tags: micropython ds18b20\"></a>tags: <code>micropython</code> ds18b20</h6><hr>\n<p>DS18B20 æº«åº¦å‚³æ„Ÿå™¨æ˜¯ä¸€ç¨®å–®ç·šæ•¸å­—æº«åº¦å‚³æ„Ÿå™¨ã€‚é€™æ„å‘³è‘—å®ƒåªéœ€è¦ä¸€æ ¹æ•¸æ“šç·šï¼ˆå’Œ GNDï¼‰å³å¯èˆ‡æ‚¨çš„ ESP32 æˆ– ESP8266 é€šä¿¡ã€‚ </p>\n<p>å®ƒå¯ä»¥ç”±å¤–éƒ¨é›»æºä¾›é›»ï¼Œä¹Ÿå¯ä»¥å¾æ•¸æ“šç·šç²å–é›»æºï¼ˆç¨±ç‚ºâ€œå¯„ç”Ÿæ¨¡å¼â€ï¼‰ï¼Œå¾è€Œç„¡éœ€å¤–éƒ¨é›»æºã€‚</p>\n<p>ä»¥ä¸‹æ˜¯ DS18B20 æº«åº¦å‚³æ„Ÿå™¨æœ€ç›¸é—œè¦æ ¼çš„æ‘˜è¦ï¼š </p>\n<p>é€šéå–®ç·šç¸½ç·šé€šä¿¡<br>é›»æºç¯„åœï¼š3.0V è‡³ 5.5V<br>å·¥ä½œæº«åº¦ç¯„åœï¼š-55ÂºC è‡³ +125ÂºC<br>ç²¾åº¦ +/-0.5 ÂºCï¼ˆä»‹æ–¼ -10ÂºC è‡³ 85ÂºC ä¹‹é–“ï¼‰**</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/5051662257603737866?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-M5Mg46TDQM0/YPjn5-wneYI/AAAAAAAAegI/oEFR5CjjUgAsSSWao7HOggVsgpzjWt-QQCNcBGAsYHQ/w407-h266/image.png\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/5051662257603737866?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-vLA_oPaKP3s/YPjoBdCR_iI/AAAAAAAAegM/JtHMyZzu1Fs78AdoOhlIBrBnbn_PR0geACNcBGAsYHQ/w457-h257/image.png\"></a></p>\n<hr>\n<h2 id=\"æ¥ç·š\"><a href=\"#æ¥ç·š\" class=\"headerlink\" title=\"æ¥ç·š\"></a>æ¥ç·š</h2><p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/5051662257603737866?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-PalBcnYvW7s/YPjoVWAna1I/AAAAAAAAegY/K9YqBp7hLB8BoFo-disKoJwNDmm65hd6gCNcBGAsYHQ/w457-h496/image.png\"></a></p>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">fromÂ machineÂ importÂ Pin\n\nfromÂ timeÂ importÂ sleep\n\nimportÂ time\n\nimportÂ onewire,Â ds18x20\n\n  \ndsSensor&#x3D;ds18x20.DS18X20(onewire.OneWire(Pin(4)))\n\nscan&#x3D;dsSensor.scan()\n\nprint(&quot;Devices:Â &quot;,scan)\n\nwhileÂ True:\n\nÂ Â Â Â rows&#x3D;ds_sensor.scan()\n\nÂ Â Â Â print(&quot;TheÂ devices:Â &quot;,Â rows)\n\nÂ Â Â Â sleep(1)\n\nÂ Â Â Â forÂ rowÂ inÂ rows:\n\nÂ Â Â Â Â Â ds_sensor.convert_temp()\n\nÂ Â Â Â Â Â print(row)\n\nÂ Â Â Â Â Â temp&#x3D;ds_sensor.read_temp(row)\n\n print(temp)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>è§£æ</strong></p>\n<p><strong>åŒ¯å…¥Pin,sleep,å–®ç¸½ç·š,æº«åº¦æ¨¡çµ„</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">fromÂ machineÂ importÂ Pin\n\nfromÂ timeÂ importÂ sleep\n\nimportÂ time\n\nimportÂ onewire,Â ds18x20<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong><em>æ§‹é€ å‡½æ•¸</em></strong></p>\n<p><strong><em>ow=onewire.OneWire(machine.Pin(id))</em></strong></p>\n<p><strong><em>æ§‹å»ºå–®ç¸½ç·šå°è±¡ã€‚ id:å¼•è…³ç·¨è™Ÿï¼›</em></strong></p>\n<p><strong><em>ä½¿ç”¨æ–¹æ³•</em></strong></p>\n<p><strong><em>ow.scan()</em></strong></p>\n<p><strong><em>æ§‹é€ å‡½æ•¸</em></strong></p>\n<p><strong><em>ds=ds18x20.DS18X20(ow)</em></strong></p>\n<p><strong><em>æ§‹å»º DS18B20 å‚³æ„Ÿå™¨å°è±¡ã€‚ ow:å®šç¾©å¥½çš„å–®ç¸½ç·šå°è±¡ï¼›</em></strong></p>\n<p><strong><em>ä½¿ç”¨æ–¹æ³•</em></strong></p>\n<p><strong><em>ds.scan()</em></strong></p>\n<p><strong><em>æƒæç¸½ç·šä¸Šçš„è¨­å‚™ã€‚è¿”å›è¨­å‚™åœ°å€ï¼Œæ”¯æŒå¤šè¨­å‚™åŒæ™‚æ›è¼‰ã€‚</em></strong></p>\n<p><strong><em>ds.convert_temp()</em></strong></p>\n<p><strong><em>æº«åº¦è½‰æ›ã€‚</em></strong></p>\n<p><strong><em>ds.read_temp(rom)</em></strong></p>\n<p><strong><em>ç²å–æº«åº¦å€¼ã€‚ romï¼šè¡¨ç¤ºå°æ‡‰çš„è¨­å‚™è™Ÿã€‚</em></strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">dsSensor&#x3D;ds18x20.DS18X20(onewire.OneWire(Pin(4)))\n\nscan&#x3D;dsSensor.scan()\n\nprint(&quot;Devices:Â &quot;,scan)\n\nwhileÂ True:\n\nÂ Â Â Â rows&#x3D;ds_sensor.scan()\n\nÂ Â Â Â print(&quot;TheÂ devices:Â &quot;,Â rows)\n\nÂ Â Â Â sleep(1)\n\nÂ Â Â Â forÂ rowÂ inÂ rows:\n\nÂ Â Â Â Â Â ds_sensor.convert_temp()\n\nÂ Â Â Â Â Â print(row)\n\nÂ Â Â Â Â Â temp&#x3D;ds_sensor.read_temp(row)\n\n print(temp)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>é¡¯ç¤ºçµæœ</strong></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">Devices:Â Â \\[bytearray(b&#39;(t~\\\\x19\\\\r\\\\x00\\\\x00.&#39;)\\]\n\nbytearray(b&#39;(t~\\\\x19\\\\r\\\\x00\\\\x00.&#39;)\n\n26.4375\n\nbytearray(b&#39;(t~\\\\x19\\\\r\\\\x00\\\\x00.&#39;)\n\n26.375\n\nbytearray(b&#39;(t~\\\\x19\\\\r\\\\x00\\\\x00.&#39;)\n\n26.375\n\nbytearray(b&#39;(t~\\\\x19\\\\r\\\\x00\\\\x00.&#39;)\n\n26.5625Â Â Â Â <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<hr>\n<h2 id=\"åŠ ä¸Šç¶²é é¡¯ç¤ºæ•¸æ“š\"><a href=\"#åŠ ä¸Šç¶²é é¡¯ç¤ºæ•¸æ“š\" class=\"headerlink\" title=\"åŠ ä¸Šç¶²é é¡¯ç¤ºæ•¸æ“š\"></a>åŠ ä¸Šç¶²é é¡¯ç¤ºæ•¸æ“š</h2><p><strong>é¦–å…ˆå‹•æ‰‹å¯«ä¸€å€‹html,ä¸¦æŠŠå®ƒå°åŒ…èµ·ä¾†æ–¹ä¾¿å‘¼å«</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">defÂ web_html():\n\nÂ Â html&#x3D;&quot;&quot;&quot;&lt;!DOCTYPEÂ html&gt;\n\nÂ Â Â Â Â Â &lt;html&gt;\n\nÂ Â Â Â Â Â &lt;head&gt;\n\nÂ Â Â Â Â Â Â Â &lt;metaÂ charset&#x3D;&quot;utf-8&quot;Â &#x2F;&gt;\n\nÂ Â Â Â Â Â Â Â &lt;metaÂ http-equiv&#x3D;&quot;refresh&quot;Â content&#x3D;&quot;1&quot;Â &#x2F;&gt;\n\nÂ Â Â Â Â Â Â Â &lt;metaÂ name&#x3D;&quot;viewport&quot;Â content&#x3D;&quot;width&#x3D;device-width,Â initial-scale&#x3D;1.0&quot;Â &#x2F;&gt;\n\nÂ Â Â Â Â Â Â Â &lt;title&gt;ESP32Â TOÂ DS18B20&lt;&#x2F;title&gt;\n\nÂ Â Â Â Â Â Â Â &lt;styleÂ type&#x3D;&quot;text&#x2F;css&quot;&gt;\n\nÂ Â Â Â Â Â Â Â Â Â bodyÂ &#123;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â color:Â rgb(9,Â 39,Â 95);\n\nÂ Â Â Â Â Â Â Â Â Â Â Â background-color:Â rgb(214,Â 205,Â 231);\n\nÂ Â Â Â Â Â Â Â Â Â Â Â font-family:Â &#39;LucidaÂ Sans&#39;,Â &#39;LucidaÂ SansÂ Regular&#39;,Â &#39;LucidaÂ Grande&#39;,Â &#39;LucidaÂ SansÂ Unicode&#39;,Â Geneva,Â Verdana,Â sans-serif;\n\nÂ Â Â Â Â Â Â Â Â Â &#125;\n\nÂ Â Â Â Â Â Â Â Â Â h1Â &#123;text-align:Â center;&#125;\n\nÂ Â Â Â Â Â Â Â Â Â h2Â &#123;text-align:Â center;Â color:Â rgb(60,Â 12,Â 114);&#125;\n\nÂ Â Â Â Â Â Â Â Â Â h3Â &#123;text-align:Â center;Â color:Â deeppink;&#125;\n\nÂ Â Â Â Â Â Â Â Â Â ddÂ &#123;text-align:Â center;&#125;\n\nÂ Â Â Â Â Â Â Â &lt;&#x2F;style&gt;\n\nÂ Â Â Â Â Â &lt;&#x2F;head&gt;\n\nÂ Â Â Â Â Â &lt;body&gt;\n\nÂ Â Â Â Â Â Â Â &lt;h1&gt;ESP32Â TOÂ DS18D20&lt;&#x2F;h1&gt;\n\nÂ Â Â Â Â Â Â Â &lt;pÂ Align&#x3D;center&gt;&lt;imgÂ src&#x3D;&quot;https:&#x2F;&#x2F;media.istockphoto.com&#x2F;photos&#x2F;fahrenheit-and-celsius-scale-meteorology-thermometer-for-measuring-picture-id1138308244&quot;Â height&#x3D;&quot;150&quot;Â width&#x3D;&quot;100&quot;Â &gt;&lt;&#x2F;p&gt;\n\nÂ Â Â Â Â Â Â Â &lt;dl&gt;\n\nÂ Â Â Â Â Â Â Â Â Â &lt;dt&gt;&lt;h2&gt;Temperature&lt;&#x2F;h2&gt;&lt;&#x2F;dt&gt;\n\nÂ Â Â Â Â Â Â Â Â Â &lt;h3&gt;&lt;ddÂ class&#x3D;&quot;val&quot;&gt;&quot;&quot;&quot;+str(round(temp,Â 2))+&quot;&quot;&quot;Â *C&lt;&#x2F;dd&gt;&lt;h3&gt;\n\nÂ Â Â Â Â Â Â Â &lt;&#x2F;dl&gt;\n\nÂ Â Â Â Â Â Â Â &lt;br&gt;&lt;&#x2F;br&gt;\n\nÂ Â Â Â Â Â Â Â &lt;dl&gt;\n\nÂ Â Â Â Â Â Â Â Â Â &lt;p&gt;&lt;iÂ class&#x3D;&quot;fasÂ fa-temperature-high&quot;&gt;&lt;&#x2F;i&gt;&lt;&#x2F;p&gt;\n\nÂ Â Â Â Â Â Â Â Â Â &lt;dt&gt;&lt;h2&gt;Temperature&lt;&#x2F;h2&gt;&lt;&#x2F;dt&gt;\n\nÂ Â Â Â Â Â Â Â Â Â &lt;h3&gt;&lt;ddÂ class&#x3D;&quot;val&quot;&gt;&quot;&quot;&quot;+str(round(tempÂ *Â (9&#x2F;5)Â +Â 32.0,Â 2))+&quot;&quot;&quot;Â *F&lt;&#x2F;dd&gt;&lt;&#x2F;h3&gt;\n\nÂ Â Â Â Â Â Â Â &lt;&#x2F;dl&gt;\n\nÂ Â Â Â Â Â &lt;&#x2F;body&gt;\n\nÂ Â Â Â Â Â &lt;&#x2F;html&gt;&quot;&quot;&quot;\n\nÂ Â returnÂ html<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<hr>\n<p><strong>ä¹‹å¾ŒåŠ å…¥wifiå’Œsocketå¥—æ¥å®¢æˆ¶ç«¯çš„ç›¸é—œçš„æ¥æ”¶å’Œè«‹æ±‚</strong></p>\n<p><strong>æ•´å€‹ç¨‹å¼ç¢¼å¦‚ä¸‹:</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">importÂ socket\n\nfromÂ timeÂ importÂ sleep\n\nimportÂ time\n\nfromÂ machineÂ importÂ Pin\n\nimportÂ onewire,Â ds18x20\n\nimportÂ network\n\n  \n\nssid&#x3D;&quot;åŸºåœ°å°åç¨±&quot;\n\npassword&#x3D;&quot;åŸºåœ°å°å¯†ç¢¼&quot;\n\n\ndefÂ connected_wifi():\n\nÂ Â globalÂ ssid,Â password\n\nÂ Â wifi&#x3D;network.WLAN(network.STA_IF)\n\nÂ Â wifi.active(True)\n\nÂ Â wifi.connect(ssid,Â password)\n\nÂ Â whileÂ wifi.isconnected()&#x3D;&#x3D;False:\n\nÂ Â Â Â pass\n\nÂ Â print(&quot;connectedÂ successful!&quot;)\n\nÂ Â print(&quot;IP:Â &#123;&#125;&quot;.format(wifi.ifconfig()))\n\n\ndefÂ read_sensor():\n\nÂ Â globalÂ temp\n\nÂ Â ds_sensor&#x3D;ds18x20.DS18X20(onewire.OneWire(Pin(4)))\n\nÂ Â whileÂ True:\n\nÂ Â Â Â rows&#x3D;ds_sensor.scan()\n\nÂ Â Â Â print(&quot;TheÂ devices:Â &quot;,Â rows)\n\nÂ Â Â Â sleep(1)\n\nÂ Â Â Â forÂ rowÂ inÂ rows:\n\nÂ Â Â Â Â Â ds_sensor.convert_temp()\n\nÂ Â Â Â Â Â print(row)\n\nÂ Â Â Â Â Â temp&#x3D;ds_sensor.read_temp(row)\n\nÂ Â Â Â Â Â returnÂ temp\n\n\ndefÂ web_html():\n\nÂ Â html&#x3D;&quot;&quot;&quot;&lt;!DOCTYPEÂ html&gt;\n\nÂ Â Â Â Â Â &lt;html&gt;\n\nÂ Â Â Â Â Â &lt;head&gt;\n\nÂ Â Â Â Â Â Â Â &lt;metaÂ charset&#x3D;&quot;utf-8&quot;Â &#x2F;&gt;\n\nÂ Â Â Â Â Â Â Â &lt;metaÂ http-equiv&#x3D;&quot;refresh&quot;Â content&#x3D;&quot;1&quot;Â &#x2F;&gt;\n\nÂ Â Â Â Â Â Â Â &lt;metaÂ name&#x3D;&quot;viewport&quot;Â content&#x3D;&quot;width&#x3D;device-width,Â initial-scale&#x3D;1.0&quot;Â &#x2F;&gt;\n\nÂ Â Â Â Â Â Â Â &lt;title&gt;ESP32Â TOÂ DS18B20&lt;&#x2F;title&gt;\n\nÂ Â Â Â Â Â Â Â &lt;styleÂ type&#x3D;&quot;text&#x2F;css&quot;&gt;\n\nÂ Â Â Â Â Â Â Â Â Â bodyÂ &#123;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â color:Â rgb(9,Â 39,Â 95);\n\nÂ Â Â Â Â Â Â Â Â Â Â Â background-color:Â rgb(214,Â 205,Â 231);\n\nÂ Â Â Â Â Â Â Â Â Â Â Â font-family:Â &#39;LucidaÂ Sans&#39;,Â &#39;LucidaÂ SansÂ Regular&#39;,Â &#39;LucidaÂ Grande&#39;,Â &#39;LucidaÂ SansÂ Unicode&#39;,Â Geneva,Â Verdana,Â sans-serif;\n\nÂ Â Â Â Â Â Â Â Â Â &#125;\n\nÂ Â Â Â Â Â Â Â Â Â h1Â &#123;text-align:Â center;&#125;\n\nÂ Â Â Â Â Â Â Â Â Â h2Â &#123;text-align:Â center;Â color:Â rgb(60,Â 12,Â 114);&#125;\n\nÂ Â Â Â Â Â Â Â Â Â h3Â &#123;text-align:Â center;Â color:Â deeppink;&#125;\n\nÂ Â Â Â Â Â Â Â Â Â ddÂ &#123;text-align:Â center;&#125;\n\nÂ Â Â Â Â Â Â Â &lt;&#x2F;style&gt;\n\nÂ Â Â Â Â Â &lt;&#x2F;head&gt;\n\nÂ Â Â Â Â Â &lt;body&gt;\n\nÂ Â Â Â Â Â Â Â &lt;h1&gt;ESP32Â TOÂ DS18D20&lt;&#x2F;h1&gt;\n\nÂ Â Â Â Â Â Â Â &lt;pÂ Align&#x3D;center&gt;&lt;imgÂ src&#x3D;&quot;https:&#x2F;&#x2F;media.istockphoto.com&#x2F;photos&#x2F;fahrenheit-and-celsius-scale-meteorology-thermometer-for-measuring-picture-id1138308244&quot;Â height&#x3D;&quot;150&quot;Â width&#x3D;&quot;100&quot;Â &gt;&lt;&#x2F;p&gt;\n\nÂ Â Â Â Â Â Â Â &lt;dl&gt;\n\nÂ Â Â Â Â Â Â Â Â Â &lt;dt&gt;&lt;h2&gt;Temperature&lt;&#x2F;h2&gt;&lt;&#x2F;dt&gt;\n\nÂ Â Â Â Â Â Â Â Â Â &lt;h3&gt;&lt;ddÂ class&#x3D;&quot;val&quot;&gt;&quot;&quot;&quot;+str(round(temp,Â 2))+&quot;&quot;&quot;Â *C&lt;&#x2F;dd&gt;&lt;h3&gt;\n\nÂ Â Â Â Â Â Â Â &lt;&#x2F;dl&gt;\n\nÂ Â Â Â Â Â Â Â &lt;br&gt;&lt;&#x2F;br&gt;\n\nÂ Â Â Â Â Â Â Â &lt;dl&gt;\n\nÂ Â Â Â Â Â Â Â Â Â &lt;p&gt;&lt;iÂ class&#x3D;&quot;fasÂ fa-temperature-high&quot;&gt;&lt;&#x2F;i&gt;&lt;&#x2F;p&gt;\n\nÂ Â Â Â Â Â Â Â Â Â &lt;dt&gt;&lt;h2&gt;Temperature&lt;&#x2F;h2&gt;&lt;&#x2F;dt&gt;\n\nÂ Â Â Â Â Â Â Â Â Â &lt;h3&gt;&lt;ddÂ class&#x3D;&quot;val&quot;&gt;&quot;&quot;&quot;+str(round(tempÂ *Â (9&#x2F;5)Â +Â 32.0,Â 2))+&quot;&quot;&quot;Â *F&lt;&#x2F;dd&gt;&lt;&#x2F;h3&gt;\n\nÂ Â Â Â Â Â Â Â &lt;&#x2F;dl&gt;\n\nÂ Â Â Â Â Â &lt;&#x2F;body&gt;\n\nÂ Â Â Â Â Â &lt;&#x2F;html&gt;&quot;&quot;&quot;\n\nÂ Â returnÂ html\n\n  \nconnected_wifi()\n\ns&#x3D;socket.socket(socket.AF_INET,Â socket.SOCK_STREAM)\n\ns.bind((&#39;&#39;,Â 80))\n\ns.listen(5)\n\n  \n\nwhileÂ True:\n\nÂ Â conn,Â addrÂ &#x3D;Â s.accept()\n\nÂ Â print(&#39;GotÂ aÂ connectionÂ fromÂ %s&#39;%str(addr))\n\nÂ Â requestÂ &#x3D;Â conn.recv(1024)\n\nÂ Â print(&quot;content:Â %s&quot;%str(request))\n\nÂ Â read_temp&#x3D;read_sensor()\n\nÂ Â print(read_temp)\n\nÂ Â res&#x3D;web_html()\n\nÂ Â conn.send(&quot;http&#x2F;1.1Â 200Â OK\\n&quot;)\n\nÂ Â conn.send(&quot;Content-Type:Â text&#x2F;html\\n&quot;)\n\nÂ Â conn.send(&quot;Connection:Â close\\n\\n&quot;)\n\nÂ Â conn.sendall(res)\n\nÂ Â conn.close()<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"è§£æ\"><a href=\"#è§£æ\" class=\"headerlink\" title=\"è§£æ\"></a>è§£æ</h2><p><strong>åŒ¯å…¥machine, sockt, network, HC_SR04æ¨¡çµ„</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">fromÂ machineÂ importÂ PinÂ \n\nfromÂ HC_SR04Â importÂ HCSR04\n\nimportÂ socket,Â network<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>è¨­å®šwifié€£ç·š</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">defÂ connected_wifi():\n\nÂ Â globalÂ ssid,Â password\n\nÂ Â wifi&#x3D;network.WLAN(network.STA_IF)\n\nÂ Â wifi.active(True)\n\nÂ Â wifi.connect(ssid,Â password)\n\nÂ Â whileÂ wifi.isconnected()&#x3D;&#x3D;False:\n\nÂ Â Â Â pass\n\nÂ Â print(&quot;connectedÂ successful!&quot;)\n\n print(&quot;IP:Â &#123;&#125;&quot;.format(wifi.ifconfig()))<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>è®€å–DS18B20æ•¸æ“š</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">defÂ read_sensor():\n\nÂ Â globalÂ temp\n\nÂ Â ds_sensor&#x3D;ds18x20.DS18X20(onewire.OneWire(Pin(4)))\n\nÂ Â whileÂ True:\n\nÂ Â Â Â rows&#x3D;ds_sensor.scan()\n\nÂ Â Â Â print(&quot;TheÂ devices:Â &quot;,Â rows)\n\nÂ Â Â Â sleep(1)\n\nÂ Â Â Â forÂ rowÂ inÂ rows:\n\nÂ Â Â Â Â Â ds_sensor.convert_temp()\n\nÂ Â Â Â Â Â print(row)\n\nÂ Â Â Â Â Â temp&#x3D;ds_sensor.read_temp(row)\n\nÂ Â Â Â Â Â returnÂ temp<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>socketå¥—æ¥</strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">s&#x3D;socket.socket(socket.AF_INET,Â socket.SOCK_STREAM)\n\ns.bind((&#39;&#39;,Â 80))\n\ns.listen(5)\n\nwhileÂ True:\n\nÂ Â conn,Â addrÂ &#x3D;Â s.accept()\n\nÂ Â print(&#39;GotÂ aÂ connectionÂ fromÂ %s&#39;%str(addr))\n\nÂ Â requestÂ &#x3D;Â conn.recv(1024)\n\nÂ Â print(&quot;content:Â %s&quot;%str(request))\n\nÂ Â read_temp&#x3D;read_sensor()\n\nÂ Â print(read_temp)\n\nÂ Â res&#x3D;web_html()\n\nÂ Â conn.send(&quot;http&#x2F;1.1Â 200Â OK\\\\n&quot;)\n\nÂ Â conn.send(&quot;Content-Type:Â text&#x2F;html\\n&quot;)\n\nÂ Â conn.send(&quot;Connection:Â close\\n\\n&quot;)\n\nÂ Â conn.sendall(res)\n\nÂ Â conn.close()<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<hr>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/5051662257603737866?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-2BVcuDPUyWo/YPpATv8mUUI/AAAAAAAAegs/M-2s_MNuCJ88coTfrj8QqGimPFFIcZ7RQCNcBGAsYHQ/w644-h324/2.jpg\"></a></p>\n","categories":["micropython","esp32"],"tags":["DS18B20"]},{"title":"DS1306å¯¦æ™‚æ™‚é˜æ¨¡çµ„-micropython","url":"/2021/08/29/DS1306%E5%AF%A6%E6%99%82%E6%99%82%E9%90%98%E6%A8%A1%E7%B5%84-micropython/","content":"<h1 id=\"DS1306å¯¦æ™‚æ™‚é˜æ¨¡çµ„-micropython\"><a href=\"#DS1306å¯¦æ™‚æ™‚é˜æ¨¡çµ„-micropython\" class=\"headerlink\" title=\"DS1306å¯¦æ™‚æ™‚é˜æ¨¡çµ„-micropython\"></a>DS1306å¯¦æ™‚æ™‚é˜æ¨¡çµ„-micropython</h1><h6 id=\"tags-micropython-ds1302\"><a href=\"#tags-micropython-ds1302\" class=\"headerlink\" title=\"tags: micropython ds1302\"></a>tags: <code>micropython</code> <code>ds1302</code></h6><p>é€™æ˜¯å»£è¯é›»å­ä¸Šçš„ä»‹ç´¹<br>â— æ™‚é˜å…·æœ‰èƒ½è¨ˆç®—2100 å¹´ä¹‹å‰çš„ç§’ã€åˆ†ã€æ™‚ã€æ—¥ã€æ˜ŸæœŸã€æœˆã€å¹´çš„èƒ½åŠ›ï¼Œé‚„æœ‰é–å¹´èª¿æ•´çš„èƒ½åŠ›<br>â— 31 8 ä½æš«å­˜æ•¸æ“šå­˜å„²RAM<br>â— ä¸²è¡Œ I/O å£æ–¹å¼ä½¿å¾—ç®¡è…³æ•¸é‡æœ€å°‘<br>â— å¯¬ç¯„åœå·¥ä½œé›»å£“2.0 5.5V<br>â— å·¥ä½œé›»æµ 2.0V æ™‚,å°æ–¼300nA<br>â— è®€ / å¯«æ™‚é˜æˆ–RAM æ•¸æ“šæ™‚æœ‰å…©ç¨®å‚³é€æ–¹å¼å–®å­—ç¯€å‚³é€å’Œå¤šå­—ç¯€å‚³é€å­—ç¬¦çµ„æ–¹å¼<br>â— 8 è…³DIP å°è£æˆ–å¯é¸çš„8 è…³SOIC å°è£æ ¹æ“šè¡¨é¢è£é…<br>â— ç°¡å–® 3 ç·šæ¥å£<br>â— èˆ‡ TTL ç›¸å®¹Vcc=5V<br>â— é›™é›»æºç®¡ç”¨æ–¼ä¸»é›»æºå’Œå‚™ä»½é›»æºä¾›æ‡‰<br>â— é›»æ± ï¼šCR2032 é›»å£“3Vï¼Œé›»æµ260mAh<br>â— æ™¶æŒ¯32.768KHzï¼ŒåŒ¹é…é›»å®¹ç‚º6pF<br>â— DS1302ç‚º8è…³ç›´æ’å¤§æ™¶ç‰‡ï¼Œæ™¶ç‰‡ä¸‹é¢æœ‰ICåº§ï¼Œæ–¹ä¾¿æ›´æ›åŠæ’æ‹”ç‰‡<br>6.æ¨¡å¡Šå·¥ä½œé›»å£“å…¼å®¹3.3V/5Vï¼Œå¯èˆ‡5VåŠ3.3Vå–®ç‰‡æ©Ÿé€£æ¥<br>â—å¸¶4å€‹å®šä½å­”ï¼Œç›´å¾‘3.1mm<br>â—å·¥ä½œæº«åº¦ï¼š0Â°ï½70Â°</p>\n<p>â— å®‰è£æ³¨æ„!<br>1.VCCèˆ‡GNDåƒè¬ä¸è¦æ¥åï¼Œä»¥å…ç‡’å£æ™¶ç‰‡<br>2.51ç³»åˆ—å–®æ™¶ç‰‡P0æ¥è…³éœ€è¦é€£æ¥ä¸Šæ‹‰é›»é˜»ï¼Œå¦‚æœå–®æ™¶ç‰‡æ²’æœ‰é€£æ¥ä¸Šæ‹‰é›»é˜»ï¼Œå¯ä»¥å°‡æ•¸æ“šç·šæ¥åˆ°å…¶ä»–æ¥è…³</p>\n<h2 id=\"æ­¥é©Ÿ1\"><a href=\"#æ­¥é©Ÿ1\" class=\"headerlink\" title=\"æ­¥é©Ÿ1:\"></a>æ­¥é©Ÿ1:</h2><p>ä¸‹è¼‰sd1306.pyä¸¦ä¸Šå‚³åˆ°å¾®æ§æ¿ä¸Š<br><a href=\"https://github.com/omarbenhamid/micropython-ds1302-rtc\">https://github.com/omarbenhamid/micropython-ds1302-rtc</a></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">from machine import Pin\n\nDS1302_REG_SECOND &#x3D; (0x80)\nDS1302_REG_MINUTE &#x3D; (0x82)\nDS1302_REG_HOUR   &#x3D; (0x84)\nDS1302_REG_DAY    &#x3D; (0x86)\nDS1302_REG_MONTH  &#x3D; (0x88)\nDS1302_REG_WEEKDAY&#x3D; (0x8A)\nDS1302_REG_YEAR   &#x3D; (0x8C)\nDS1302_REG_WP     &#x3D; (0x8E)\nDS1302_REG_CTRL   &#x3D; (0x90)\nDS1302_REG_RAM    &#x3D; (0xC0)\n\nclass DS1302:\n    def __init__(self, clk, dio, cs):\n        self.clk &#x3D; clk\n        self.dio &#x3D; dio\n        self.cs &#x3D; cs\n        self.clk.init(Pin.OUT)\n        self.cs.init(Pin.OUT)\n\n    def _dec2hex(self, dat):\n        return (dat&#x2F;&#x2F;10) * 16 + (dat % 10)\n\n    def _hex2dec(self, dat):\n        return (dat&#x2F;&#x2F;16) * 10 + (dat % 16)\n\n    def _write_byte(self, dat):\n        self.dio.init(Pin.OUT)\n        for i in range(8):\n            self.dio.value((dat &gt;&gt; i) &amp; 1)\n            self.clk.value(1)\n            self.clk.value(0)\n\n    def _read_byte(self):\n        d &#x3D; 0\n        self.dio.init(Pin.IN)\n        for i in range(8):\n            d &#x3D; d | (self.dio.value() &lt;&lt; i)\n            self.clk.value(1)\n            self.clk.value(0)\n        return d\n\n    def _get_reg(self, reg):\n        self.cs.value(1)\n        self._write_byte(reg)\n        t &#x3D; self._read_byte()\n        self.cs.value(0)\n        return t\n\n    def _set_reg(self, reg, dat):\n        self.cs.value(1)\n        self._write_byte(reg)\n        self._write_byte(dat)\n        self.cs.value(0)\n\n    def _wr(self, reg, dat):\n        self._set_reg(DS1302_REG_WP, 0)\n        self._set_reg(reg, dat)\n        self._set_reg(DS1302_REG_WP, 0x80)\n\n    def start(self):\n        t &#x3D; self._get_reg(DS1302_REG_SECOND + 1)\n        self._wr(DS1302_REG_SECOND, t &amp; 0x7f)\n\n    def stop(self):\n        t &#x3D; self._get_reg(DS1302_REG_SECOND + 1)\n        self._wr(DS1302_REG_SECOND, t | 0x80)\n\n    def second(self, second&#x3D;None):\n        if second &#x3D;&#x3D; None:\n            return self._hex2dec(self._get_reg(DS1302_REG_SECOND+1)) % 60\n        else:\n            self._wr(DS1302_REG_SECOND, self._dec2hex(second % 60))\n\n    def minute(self, minute&#x3D;None):\n        if minute &#x3D;&#x3D; None:\n            return self._hex2dec(self._get_reg(DS1302_REG_MINUTE+1))\n        else:\n            self._wr(DS1302_REG_MINUTE, self._dec2hex(minute % 60))\n\n    def hour(self, hour&#x3D;None):\n        if hour &#x3D;&#x3D; None:\n            return self._hex2dec(self._get_reg(DS1302_REG_HOUR+1))\n        else:\n            self._wr(DS1302_REG_HOUR, self._dec2hex(hour % 24))\n\n    def weekday(self, weekday&#x3D;None):\n        if weekday &#x3D;&#x3D; None:\n            return self._hex2dec(self._get_reg(DS1302_REG_WEEKDAY+1))\n        else:\n            self._wr(DS1302_REG_WEEKDAY, self._dec2hex(weekday % 8))\n\n    def day(self, day&#x3D;None):\n        if day &#x3D;&#x3D; None:\n            return self._hex2dec(self._get_reg(DS1302_REG_DAY+1))\n        else:\n            self._wr(DS1302_REG_DAY, self._dec2hex(day % 32))\n\n    def month(self, month&#x3D;None):\n        if month &#x3D;&#x3D; None:\n            return self._hex2dec(self._get_reg(DS1302_REG_MONTH+1))\n        else:\n            self._wr(DS1302_REG_MONTH, self._dec2hex(month % 13))\n\n    def year(self, year&#x3D;None):\n        if year &#x3D;&#x3D; None:\n            return self._hex2dec(self._get_reg(DS1302_REG_YEAR+1)) + 2000\n        else:\n            self._wr(DS1302_REG_YEAR, self._dec2hex(year % 100))\n\n    def date_time(self, dat&#x3D;None):\n        if dat &#x3D;&#x3D; None:\n            return [self.year(), self.month(), self.day(), self.weekday(), self.hour(), self.minute(), self.second()]\n        else:\n            self.year(dat[0])\n            self.month(dat[1])\n            self.day(dat[2])\n            self.weekday(dat[3])\n            self.hour(dat[4])\n            self.minute(dat[5])\n            self.second(dat[6])\n\n    def ram(self, reg, dat&#x3D;None):\n        if dat &#x3D;&#x3D; None:\n            return self._get_reg(DS1302_REG_RAM + 1 + (reg % 31)*2)\n        else:\n            self._wr(DS1302_REG_RAM + (reg % 31)*2, dat)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"æ­¥é©Ÿ2\"><a href=\"#æ­¥é©Ÿ2\" class=\"headerlink\" title=\"æ­¥é©Ÿ2:\"></a>æ­¥é©Ÿ2:</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">&#x2F;&#x2F; DS1302 CLK&#x2F;SCLK --&gt;  5\n&#x2F;&#x2F; DS1302 DAT&#x2F;IO --&gt;  4\n&#x2F;&#x2F; DS1302 RST&#x2F;CE --&gt;  2\n&#x2F;&#x2F; DS1302 VCC --&gt;  3.3v - 5v\n&#x2F;&#x2F; DS1302 GND --&gt;  GND<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"æ­¥é©Ÿ3\"><a href=\"#æ­¥é©Ÿ3\" class=\"headerlink\" title=\"æ­¥é©Ÿ3:\"></a>æ­¥é©Ÿ3:</h2><p>ä¸Šå‚³ç¨‹å¼ç¢¼</p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">import ds1302\nfrom machine import PIN_WAKE, Pin\nimport time\n\nds &#x3D; ds1302.DS1302(Pin(5), Pin(4), Pin(2))\n\nwhile True:\n    print(&quot;Today is &#123;&#125;&#x2F;&#123;&#125;&#x2F;&#123;&#125;&quot;.format(ds.year(), ds.month(), ds.day()))\n    print(&quot;Time: &#123;&#125;:&#123;&#125;:&#123;&#125;&quot;.format(ds.hour(), ds.minute(), ds.second()))\n    print(&quot;&#x3D;&quot;*10)\n    time.sleep(1)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">Today is 2021&#x2F;7&#x2F;28\nTime: 12:19:18\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\nToday is 2021&#x2F;7&#x2F;28\nTime: 12:19:19\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\nToday is 2021&#x2F;7&#x2F;28\nTime: 12:19:20\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;\nToday is 2021&#x2F;7&#x2F;28\nTime: 12:19:21\n&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n<h2 id=\"æ­¥é©Ÿ4\"><a href=\"#æ­¥é©Ÿ4\" class=\"headerlink\" title=\"æ­¥é©Ÿ4:\"></a>æ­¥é©Ÿ4:</h2><p>å†å°‡ssd1306.pyä¸‹è¼‰å¾Œä¸¦ä¸Šå‚³åˆ°å¾®æ§æ¿</p>\n<h2 id=\"æ­¥é©Ÿ5\"><a href=\"#æ­¥é©Ÿ5\" class=\"headerlink\" title=\"æ­¥é©Ÿ5:\"></a>æ­¥é©Ÿ5:</h2><p>oledæ¥ç·š</p>\n<h2 id=\"æ­¥é©Ÿ6\"><a href=\"#æ­¥é©Ÿ6\" class=\"headerlink\" title=\"æ­¥é©Ÿ6:\"></a>æ­¥é©Ÿ6:</h2><pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">import ds1302, ssd1306\nfrom machine import PIN_WAKE, Pin\nfrom machine import SoftI2C\nimport time\nwidth &#x3D; 128\nheight &#x3D; 64\ni2c &#x3D; SoftI2C(scl&#x3D;Pin(22), sda&#x3D;Pin(21))\noled &#x3D; ssd1306.SSD1306_I2C(width, height, i2c)\nds &#x3D; ds1302.DS1302(Pin(5), Pin(4), Pin(2))\n\nwhile True:\n    oled.text(str(ds.year()), 0, 1)\n    oled.text(&quot;&#x2F;&quot;, 30, 1)\n    oled.text(str(ds.month()), 40, 1)\n    oled.text(&quot;&#x2F;&quot;, 50, 1)\n    oled.text(str(ds.day()), 60, 1)\n    \n    oled.text(str(ds.hour()), 30, 30)\n    oled.text(&quot;:&quot;, 50, 30)\n    oled.text(str(ds.minute()), 60, 30)\n    oled.text(&quot;:&quot;, 80, 30)\n    oled.text(str(ds.second()), 90, 30)\n    oled.show()\n    time.sleep(1)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/HnIFDhD1DxY\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>","categories":["micropython","esp32"],"tags":["ds1306"]},{"title":"DHT11/12ç¶²è·¯ç›£æ¸¬æº«æ¿•åº¦è¨ˆ-micropython","url":"/2021/08/29/DHT11-12%E7%B6%B2%E8%B7%AF%E7%9B%A3%E6%B8%AC%E6%BA%AB%E6%BF%95%E5%BA%A6%E8%A8%88-micropython-1/","content":"<h1 id=\"DHT11-12ç¶²è·¯ç›£æ¸¬æº«æ¿•åº¦è¨ˆ-micropython\"><a href=\"#DHT11-12ç¶²è·¯ç›£æ¸¬æº«æ¿•åº¦è¨ˆ-micropython\" class=\"headerlink\" title=\"DHT11/12ç¶²è·¯ç›£æ¸¬æº«æ¿•åº¦è¨ˆ-micropython\"></a>DHT11/12ç¶²è·¯ç›£æ¸¬æº«æ¿•åº¦è¨ˆ-micropython</h1><h6 id=\"tags-micropython-dht11-12-webserver\"><a href=\"#tags-micropython-dht11-12-webserver\" class=\"headerlink\" title=\"tags: micropython dht11/12 webserver\"></a>tags: <code>micropython</code> <code>dht11/12 webserver</code></h6><hr>\n<p><strong><em>DHT11/12å–®ç´”æ¸¬è©¦åƒè€ƒé é¢-</em></strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/5661741645243406963?hl=zh-TW#\">https://blairan-esp32-micropython.blogspot.com/2021/07/dht11dht12-micropython.html</a></p>\n<p><em><strong>WiFiè¯ç¶²åƒè€ƒ-</strong></em><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/5661741645243406963?hl=zh-TW#\">https://blairan-esp32-micropython.blogspot.com/2021/07/wifi.html</a></p>\n<hr>\n<h2 id=\"å®Œæ•´ç¨‹å¼ç¢¼\"><a href=\"#å®Œæ•´ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"å®Œæ•´ç¨‹å¼ç¢¼\"></a>å®Œæ•´ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">importÂ dht\n\nimportÂ network,Â socket\n\nfromÂ machineÂ importÂ Pin\n\nfromÂ timeÂ importÂ sleep\n\n  \n\nssid&#x3D;&quot;---&quot;\n\npassword&#x3D;&quot;------&quot;\n\nSTA&#x3D;network.WLAN(network.STA_IF)\n\nSTA.active(True)\n\nSTA.connect(ssid,Â password)\n\n\nwhileÂ STA.isconnected()&#x3D;&#x3D;False:\n\nÂ Â Â Â pass\n\nprint(&quot;TheÂ connectedÂ successful!&quot;)\n\nprint(&quot;IP:Â Â &#123;&#125;&quot;.format(STA.ifconfig()))\n\ndefÂ readTempAndHumi():\n\nÂ Â Â Â globalÂ temp,Â humi\n\nÂ Â Â Â try:\n\nÂ Â Â Â Â Â Â Â sensor&#x3D;dht.DHT11(Pin(4))\n\nÂ Â Â Â Â Â Â Â sensor.measure()\n\nÂ Â Â Â Â Â Â Â temp&#x3D;sensor.temperature()\n\nÂ Â Â Â Â Â Â Â humi&#x3D;sensor.humidity()\n\nÂ Â Â Â Â Â Â Â ifÂ (isinstance(temp,Â float)Â andÂ isinstance(humi,Â float))Â orÂ (isinstance(temp,Â int)Â andÂ isinstance(humi,Â int)):\n\nÂ Â Â Â Â Â Â Â Â Â measureResult&#x3D;&quot;&#123;&#125;,&#123;&#125;&quot;.format(temp,Â humi)\n\nÂ Â Â Â Â Â Â Â Â Â returnÂ measureResult\n\nÂ Â Â Â Â Â Â Â else:\n\nÂ Â Â Â Â Â Â Â Â Â returnÂ (&quot;--&quot;)\n\nÂ Â Â Â exceptÂ OSErrorÂ asÂ o:\n\nÂ Â Â Â Â Â Â Â print(&quot;--&quot;)\n\ndefÂ Htmlpage():\n\nÂ Â html&#x3D;Â &quot;&quot;&quot;\n\nÂ Â Â Â Â Â Â Â &lt;html&gt;\n\nÂ Â Â Â &lt;head&gt;\n\nÂ Â Â Â Â Â &lt;metaÂ charset&#x3D;&quot;utf-8&quot;Â &#x2F;&gt;\n\nÂ Â Â Â Â Â &lt;metaÂ name&#x3D;&quot;viewport&quot;Â content&#x3D;&quot;width&#x3D;device-width,Â initial-scale&#x3D;1.0&quot;Â &#x2F;&gt;\n\nÂ Â Â Â Â Â &lt;style&gt;\n\nÂ Â Â Â Â Â Â Â h1Â Â &#123;text-align:Â center;Â background-color:Â orange;Â margin-right:5px;&#125;\n\nÂ Â Â Â Â Â Â Â dlÂ &#123;Â width:Â 320px;Â margin:Â 12pxÂ auto;Â &#125;\n\nÂ Â Â Â Â Â Â Â dtÂ &#123;Â \n\nÂ Â Â Â Â Â Â Â Â Â font-size:Â 20pt;Â color:Â #444;Â background-color:Â #ddd;\n\nÂ Â Â Â Â Â Â Â Â Â margin:Â 6ptÂ 0;Â padding:Â 6ptÂ 12pt;\n\nÂ Â Â Â Â Â Â Â &#125;\n\nÂ Â Â Â Â Â Â Â ddÂ &#123;\n\nÂ Â Â Â Â Â Â Â Â Â text-align:Â right;Â padding-right:Â 6pt;\n\nÂ Â Â Â Â Â Â Â &#125;\n\nÂ Â Â Â Â Â Â Â .numÂ &#123;Â font-size:Â 36pt;Â color:Â dodgerblue;Â &#125;\n\nÂ Â Â Â Â Â &lt;&#x2F;style&gt;\n\nÂ Â Â Â Â Â &lt;&#x2F;head&gt;\n\nÂ Â Â Â &lt;body&gt;\n\nÂ Â Â Â Â Â &lt;p&gt;&lt;h1&gt;ESP32Â DHT11&#x2F;12&lt;&#x2F;h1&gt;&lt;&#x2F;p&gt;\n\nÂ Â Â Â Â Â &lt;dl&gt;\n\nÂ Â Â Â Â Â Â Â &lt;dt&gt;Temp&lt;&#x2F;dt&gt;\n\nÂ Â Â Â Â Â Â Â &lt;ddÂ class&#x3D;num&gt;&quot;&quot;&quot;+str(temp)+&quot;&quot;&quot;Â°C&lt;&#x2F;dd&gt;\n\nÂ Â Â Â Â Â Â Â &lt;dt&gt;Humi&lt;&#x2F;dt&gt;\n\nÂ Â Â Â Â Â Â Â &lt;ddÂ class&#x3D;num&gt;&quot;&quot;&quot;+str(humi)+&quot;&quot;&quot;Â %&lt;&#x2F;dd&gt;\n\nÂ Â Â Â Â Â &lt;&#x2F;dl&gt;\n\nÂ Â Â Â &lt;&#x2F;body&gt;\n\nÂ Â Â Â &lt;&#x2F;html&gt;\n\nÂ Â Â Â &quot;&quot;&quot;\n\nÂ Â returnÂ html\n\n  \n\ns&#x3D;socket.socket(socket.AF_INET,Â socket.SOCK_STREAM)\n\ns.bind((&#39;&#39;,Â 80))\n\ns.listen(5)\n\n  \n\nwhileÂ True:\n\nÂ Â Â Â conn,Â addrÂ &#x3D;Â s.accept()\n\nÂ Â Â Â print(&#39;GotÂ aÂ connectionÂ fromÂ %s&#39;Â %Â str(addr))\n\nÂ Â Â Â reqÂ &#x3D;Â conn.recv(1024)\n\nÂ Â Â Â print(&#39;ContentÂ &#x3D;Â %s&#39;Â %Â str(req))\n\nÂ Â Â Â sensor_readingÂ &#x3D;Â readTempAndHumi()\n\nÂ Â Â Â print(sensor_reading)\n\nÂ Â Â Â responeÂ &#x3D;Â Htmlpage()\n\nÂ Â Â Â conn.send(&quot;http&#x2F;1.1Â 200Â OK\\n&quot;)\n\nÂ Â Â Â conn.send(&quot;Content-Type:Â text&#x2F;html;Â charset&#x3D;&#39;utf-8&#39;\\n&quot;)\n\nÂ Â Â Â conn.send(&quot;Connection:Â close\\n\\n&quot;)\n\nÂ Â Â Â conn.sendall(respone)\n\nÂ Â Â Â conn.close()\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"è§£æ\"><a href=\"#è§£æ\" class=\"headerlink\" title=\"è§£æ\"></a>è§£æ</h2><pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">**_è¼‰å…¥dht,wifi,ç«¯å£,pinå’Œæ™‚é–“æ¨¡çµ„_**\n\nimportÂ dht\n\nimportÂ network,Â socket\n\nfromÂ machineÂ importÂ Pin\n\nfromÂ timeÂ importÂ sleep\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong><em>é€™å€‹éƒ¨ä»½æ˜¯è¨­åˆ¶WiFiçš„æµç¨‹</em></strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">ssid&#x3D;&quot;åŸºåœ°å°åç¨±&quot;\n\npassword&#x3D;&quot;åŸºåœ°å°å¯†ç¢¼&quot;\n\n  \nSTA&#x3D;network.WLAN(network.STA_IF)\n\nSTA.active(True)\n\nSTA.connect(ssid,Â password)\n\n  \n\nwhileÂ STA.isconnected()&#x3D;&#x3D;False:\n\nÂ Â Â Â pass\n\nprint(&quot;TheÂ connectedÂ successful!&quot;)\n\nprint(&quot;IP:Â Â &#123;&#125;&quot;.format(STA.ifconfig()))\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong><em>è®€å–æº«æº¼åº¦çš„å‡½å¼</em></strong></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">defÂ readTempAndHumi():\n\nÂ Â Â Â globalÂ temp,Â humi\n\nÂ Â Â Â try:\n\nÂ Â Â Â Â Â Â Â sensor&#x3D;dht.DHT11(Pin(4))\n\nÂ Â Â Â Â Â Â Â sensor.measure()\n\nÂ Â Â Â Â Â Â Â temp&#x3D;sensor.temperature()\n\nÂ Â Â Â Â Â Â Â humi&#x3D;sensor.humidity()\n\nÂ Â Â Â Â Â Â Â ifÂ (isinstance(temp,Â float)Â andÂ isinstance(humi,Â float))Â orÂ (isinstance(temp,Â int)Â andÂ isinstance(humi,Â int)):\n\nÂ Â Â Â Â Â Â Â Â Â measureResult&#x3D;&quot;&#123;&#125;,&#123;&#125;&quot;.format(temp,Â humi)\n\nÂ Â Â Â Â Â Â Â Â Â returnÂ measureResult\n\nÂ Â Â Â Â Â Â Â else:\n\nÂ Â Â Â Â Â Â Â Â Â returnÂ (&quot;--&quot;)\n\nÂ Â Â Â exceptÂ OSErrorÂ asÂ o:\n\nÂ Â Â Â Â Â Â Â print(&quot;--&quot;)\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>ç¶²é å‰ç«¯çš„å¸ƒç½®,è¨˜å¾—è¦è®“å…¶è®€å–æ™‚å¯è¿”å›(return)</strong></p>\n<p><strong>å…¶ä¸­é ˆæ³¨æ„çš„æ˜¯è®“æº«æº¼åº¦çš„å€¼å¯ä»¥æ­£é¡¯ç¤ºè¦ä½¿ç”¨</strong>â€œâ€â€+str(æº«/æº¼åº¦è®Šæ•¸)+â€â€â€</p>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\">def Htmlpage():\n\n  html= \"\"\"\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n\n        <span class=\"token selector\">h1</span>  <span class=\"token punctuation\">&#123;</span><span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span> background-color<span class=\"token punctuation\">:</span> orange<span class=\"token punctuation\">;</span> margin-right<span class=\"token punctuation\">:</span>5px<span class=\"token punctuation\">;</span><span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token selector\">dl</span> <span class=\"token punctuation\">&#123;</span> width<span class=\"token punctuation\">:</span> 320px<span class=\"token punctuation\">;</span> margin<span class=\"token punctuation\">:</span> 12px auto<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token selector\">dt</span> <span class=\"token punctuation\">&#123;</span> \n\n          font-size<span class=\"token punctuation\">:</span> 20pt<span class=\"token punctuation\">;</span> color<span class=\"token punctuation\">:</span> #444<span class=\"token punctuation\">;</span> background-color<span class=\"token punctuation\">:</span> #ddd<span class=\"token punctuation\">;</span>\n\n          margin<span class=\"token punctuation\">:</span> 6pt 0<span class=\"token punctuation\">;</span> padding<span class=\"token punctuation\">:</span> 6pt 12pt<span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token selector\">dd</span> <span class=\"token punctuation\">&#123;</span>\n\n          text-align<span class=\"token punctuation\">:</span> right<span class=\"token punctuation\">;</span> padding-right<span class=\"token punctuation\">:</span> 6pt<span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token selector\">.num</span> <span class=\"token punctuation\">&#123;</span> font-size<span class=\"token punctuation\">:</span> 36pt<span class=\"token punctuation\">;</span> color<span class=\"token punctuation\">:</span> dodgerblue<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">&#125;</span>\n\n      </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>ESP32 DHT11/12<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dl</span><span class=\"token punctuation\">></span></span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dt</span><span class=\"token punctuation\">></span></span>Temp<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dt</span><span class=\"token punctuation\">></span></span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dd</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>num</span><span class=\"token punctuation\">></span></span>\"\"\"+str(temp)+\"\"\"Â°C<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dd</span><span class=\"token punctuation\">></span></span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dt</span><span class=\"token punctuation\">></span></span>Humi<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dt</span><span class=\"token punctuation\">></span></span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dd</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span>num</span><span class=\"token punctuation\">></span></span>\"\"\"+str(humi)+\"\"\" %<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dd</span><span class=\"token punctuation\">></span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dl</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span>\n\n    \"\"\"\n\n  return html\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong><em>è¨­åˆ¶ç›£è½å¥—æ¥ç«¯å£</em></strong></p>\n<p><strong><em>å‡½å¼åƒè€ƒ-</em></strong><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/5661741645243406963?hl=zh-TW#\">æˆ‘çš„micropythonå‡½å¼ç­†è¨˜</a></p>\n<pre class=\"line-numbers language-py\" data-language=\"py\"><code class=\"language-py\">s&#x3D;socket.socket(socket.AF_INET,Â socket.SOCK_STREAM)\n\ns.bind((&#39;&#39;,Â 80))\n\ns.listen(5)\n\n\nwhileÂ True:\n\nÂ Â Â Â conn,Â addrÂ &#x3D;Â s.accept()\n\nÂ Â Â Â print(&#39;GotÂ aÂ connectionÂ fromÂ %s&#39;Â %Â str(addr))\n\nÂ Â Â Â reqÂ &#x3D;Â conn.recv(1024)\n\nÂ Â Â Â print(&#39;ContentÂ &#x3D;Â %s&#39;Â %Â str(req))\n\nÂ Â Â Â sensor_readingÂ &#x3D;Â readTempAndHumi()\n\nÂ Â Â Â print(sensor_reading)\n\nÂ Â Â Â responeÂ &#x3D;Â Htmlpage()\n\nÂ Â Â Â conn.send(&quot;http&#x2F;1.1Â 200Â OK\\n&quot;)\n\nÂ Â Â Â conn.send(&quot;Content-Type:Â text&#x2F;html;Â charset&#x3D;&#39;utf-8&#39;\\n&quot;)\n\nÂ Â Â Â conn.send(&quot;Connection:Â close\\n\\n&quot;)\n\nÂ Â Â Â conn.sendall(respone)\n\nÂ Â Â Â conn.close()<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/6280040346040914276/5661741645243406963?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-stu-h6hdsgc/YOaaTDfLfOI/AAAAAAAAeaQ/NiNjk1xHXl0YOU_J8btvb9Qd3isHo6ZvwCNcBGAsYHQ/s1600/1625725506698515-0.png\"></a></p>\n","categories":["micropython","esp32"],"tags":["dht11/dht12"]},{"title":"MQTT Publish + Node-RED + BMP280","url":"/2021/08/29/MQTT-Publish-Node-RED-BMP280/","content":"<h1 id=\"MQTT-Publish-Node-RED-BMP280\"><a href=\"#MQTT-Publish-Node-RED-BMP280\" class=\"headerlink\" title=\"MQTT Publish + Node-RED + BMP280\"></a>MQTT Publish + Node-RED + BMP280</h1><h6 id=\"tags-esp32-mqtt-node-red-bmp280\"><a href=\"#tags-esp32-mqtt-node-red-bmp280\" class=\"headerlink\" title=\"tags: esp32 mqtt node-red bmp280\"></a>tags: <code>esp32</code> <code>mqtt</code> <code>node-red</code> <code>bmp280</code></h6><p><strong>åƒè€ƒæ–‡ç»-<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5842507104876900238?hl=zh-TW#\">https://randomnerdtutorials.com/esp32-mqtt-publish-subscribe-arduino-ide/</a></strong></p>\n<p><strong>é€™æ¬¡å¯¦ä½œæ˜¯ä½¿ç”¨MQTTç™¼é€BMP280çš„æ•¸æ“šåˆ°æ¨¹è“æ´¾ä¸Šçš„Node-REDå„€éŒ¶ç‰ˆä¸Š</strong></p>\n<p><strong>æˆ‘æ˜¯åƒè€ƒé€™ç¯‡æ–‡ç« -<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5842507104876900238?hl=zh-TW#\">https://randomnerdtutorials.com/esp32-mqtt-publish-subscribe-arduino-ide/</a></strong></p>\n<p><strong>æ‰€ä»¥æœƒä½¿ç”¨é¡ä¼¼çš„ç¨‹å¼ç¢¼æ‰‹æ³•ä¾†å®Œæˆé …ç›®ã€‚</strong></p>\n<p><strong>é–‹å§‹ä¹‹å‰å…ˆå‚™å¦¥æ¨¹è“æ´¾ä¸Šæ‰€é ˆçš„è»Ÿç¡¬é«”</strong></p>\n<ol>\n<li> <strong><em>å®‰è£<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5842507104876900238?hl=zh-TW#\">Mosquitto broker</a>(å¦‚æœæ²’ç©éæ¨¹è“æ´¾,è«‹é€£çµ<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5842507104876900238?hl=zh-TW#\">é€™è£¡</a>å®‰è£æ¨¹è“æ´¾ç³»çµ±å’Œ<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5842507104876900238?hl=zh-TW#\">å¦‚</a></em></strong></li>\n<li> <strong><em><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5842507104876900238?hl=zh-TW#\">ä½•ä½¿ç”¨SSHå’ŒVNCé¡åƒ</a>)</em></strong></li>\n<li> <strong><em>å®‰è£ <a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5842507104876900238?hl=zh-TW#\">Node-RED installed</a> Â å’ŒÂ <a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5842507104876900238?hl=zh-TW#\">Node-RED Dashboard</a>åœ¨æ¨¹è“æ´¾ä¸Šã€‚</em></strong></li>\n<li> <strong>_å‚™è¨»:å®‰è£Node-REDæ™‚è‹¥å‡ºç¾éŒ¯èª¤è¨Šæ¯æ”¹ç”¨ä¸‹é¢æ‰€é™„ä¸‹è¼‰ _****<em>bash &lt;(curl -sL <a href=\"https://raw.githubusercontent.com/node-red/linux-installers/master/deb/update-nodejs-and-nodered\">https://raw.githubusercontent.com/node-red/linux-installers/master/deb/update-nodejs-and-nodered</a>)</em></strong></li>\n<li><strong><em>æ¥ä¸‹ä¾†å…ˆæ¸¬è©¦BMP280æ˜¯å¦å¯æ­£å¸¸æ¸¬æº«åº¦å’Œå£“åŠ›-è«‹åƒè€ƒä¹‹å‰çš„ç´€éŒ„(<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5842507104876900238?hl=zh-TW#\">é»æˆ‘å‚³é€</a>)ã€‚</em></strong></li>\n</ol>\n<p><em><strong>å…ˆä¾†çœ‹ä¸€ä¸‹æ•´å€‹ç™¼é€åŸç†æ¯”è¼ƒå®¹æ˜“ç†è§£è‡ªå·±è¦å­¸çš„é‡é»åœ¨å“ªè£¡</strong></em></p>\n<p><em><strong>æ­¤æ¬¡å¯¦é©—æˆ‘åªå¯«å¾ESP32ç™¼é€æ•¸æ“šåˆ°æ¨¹è“æ´¾çš„Mosquittoä»£ç†æ¥æ”¶/ç™¼é€</strong></em></p>\n<p><em><strong>ç„¶å¾Œé€šéMQTTé€šä¿¡å”è­°å»æ§åˆ¶ESP32ç™¼é€æ•¸æ“šåˆ°Node-RED,å…¶å¯¦æˆ‘è¦º</strong></em></p>\n<p><em><strong>å¾—å’ŒThingSpeakå¾ˆé¡ä¼¼,åªæ˜¯ä½¿ç”¨Node-REDæ›´èƒ½å®¢è£½åŒ–ã€‚</strong></em></p>\n<p><em><strong>çœ‹ä¸€ä¸‹é€™å¼µåœ–</strong></em></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5842507104876900238?hl=zh-TW#\"><strong><img src=\"https://lh3.googleusercontent.com/-dbEK49_w9_A/YQP1Mii2utI/AAAAAAAAelI/zvaBPu6JqXIcyeXVPyqIHhOt6CVSYkCrgCNcBGAsYHQ/w642-h341/image.png\"></strong></a></p>\n<hr>\n<p><strong><em>çŸ¥é“åŸç†å¾Œå°±æ˜¯é–‹å§‹é€²å…¥å¯«ç¨‹å¼çš„ä¸»è»¸</em></strong></p>\n<p><strong><em>é¦–å…ˆè¦æœ‰ç¶²è·¯å¯ä»¥é€£åˆ°æ•¸è“æ´¾å’ŒESP32ï¼Œç„¶å¾Œåˆ¤æ–·æ˜¯å¦å·²ç¶“é€£ç·š</em></strong></p>\n<p><strong><em>å¦‚æœé€£ä¸ä¸Šå°±å†è‡ªå‹•é‡é€£ï¼Œé€£ä¸Šå¾Œå°å‡ºIPï¼Œé€£ä¸Šç¶²è·¯å¾Œï¼Œå°±æ˜¯</em></strong></p>\n<p><strong><em>è¦å»å’Œæ¨¹è“æ´¾çš„Mosquitto Brokeré€£ç·šï¼Œä¸€æ¨£å°±æ˜¯åˆ¤æ–·æ˜¯å¦æˆåŠŸ</em></strong></p>\n<p><strong><em>é€£ç·šåšå‡ºå°æ‡‰çš„å‹•ä½œã€‚WiFiå’ŒMosquitto Brokeréƒ½é€£ç·šä¹‹å¾Œï¼Œå°±é–‹</em></strong></p>\n<p><strong><em>å§‹å¾ESP32å®¢æˆ¶ç«¯ç™¼é€æº«åº¦å’Œå£“åŠ›çš„æ•¸æ“šåˆ°Node-REDçš„ä»‹é¢ä¸Šã€‚</em></strong></p>\n<hr>\n<h2 id=\"å¸ƒç½²Node-RED\"><a href=\"#å¸ƒç½²Node-RED\" class=\"headerlink\" title=\"å¸ƒç½²Node-RED\"></a>å¸ƒç½²Node-RED</h2><div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/IHebAHN_E50\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;WiFi.h&gt;\n\n#include &lt;PubSubClient.h&gt;\n\n#include &lt;Adafruit_BMP280.h&gt;\n\n#include &lt;Adafruit_Sensor.h&gt;\n\n#include &lt;Wire.h&gt;\n\n\nAdafruit_BMP280Â bmp;Â &#x2F;&#x2F;Â I2C\n\n  \nWiFiClientÂ espClient;\n\nPubSubClientÂ client(espClient);\n\n\n&#x2F;&#x2F;wifiå¸³å¯†\n\nconstÂ char*Â ssidÂ &#x3D;Â &quot;---&quot;;\n\nconstÂ char*Â passwordÂ &#x3D;Â &quot;------&quot;;\n\n&#x2F;&#x2F;mqttServer\n\nconstÂ char*Â mqttServerÂ &#x3D;Â &quot;---.---.---.--&quot;;\n\n  \n\n&#x2F;&#x2F;è¨­å®šwifi\n\nvoidÂ setupWifi()&#123;\n\nÂ Â WiFi.begin(ssid,Â password);\n\nÂ Â whileÂ (WiFi.status()Â !&#x3D;Â WL_CONNECTED)&#123;\n\nÂ Â Â Â delay(50);\n\nÂ Â Â Â Serial.print(&quot;.&quot;);\n\nÂ Â &#125;\n\nÂ Â Serial.println(&quot;connectedÂ successful&quot;);\n\nÂ Â Serial.println(WiFi.localIP());\n\nÂ Â &#125;\n\n  \n  \n\nvoidÂ reconnect()&#123;\n\nÂ Â whileÂ (!Â client.connected())&#123;\n\nÂ Â Â Â Serial.print(&quot;AttemptingÂ MQTTÂ connection...&quot;);\n\nÂ Â Â Â ifÂ (client.connect(&quot;esp32Client&quot;))&#123;\n\nÂ Â Â Â Â Â Serial.println(&quot;connected&quot;);\n\nÂ Â Â Â &#125;elseÂ &#123;\n\nÂ Â Â Â Â Â Serial.print(&quot;failedÂ connectedÂ isÂ :Â &quot;);\n\nÂ Â Â Â Â Â Serial.println(client.state());\n\nÂ Â Â Â Â Â delay(2000);\n\nÂ Â Â Â &#125;\n\nÂ Â &#125;\n\n&#125;\n\n  \n\nvoidÂ setup()Â &#123;\n\nÂ Â Serial.begin(115200);\n\nÂ Â Serial.println(F(&quot;BMP280Â test&quot;));\n\nÂ Â setupWifi();\n\nÂ Â client.setServer(mqttServer,Â 1883);\n\nÂ Â ifÂ (!bmp.begin())Â &#123;\n\nÂ Â Â Â Serial.println(F(&quot;CouldÂ notÂ findÂ aÂ validÂ BMP280Â sensor,Â checkÂ wiringÂ orÂ &quot;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &quot;tryÂ aÂ differentÂ address!&quot;));\n\nÂ Â Â Â whileÂ (1)Â delay(10);\n\nÂ Â &#125;\n\n&#125;\n\n\nvoidÂ loop()Â &#123;\n\nÂ Â Â Â ifÂ (!Â client.connected())&#123;\n\nÂ Â Â Â Â Â reconnect();\n\nÂ Â Â Â &#125;\n\nÂ Â Â Â client.loop();\n\nÂ Â Â Â longÂ lastTimeÂ &#x3D;Â 0;\n\nÂ Â Â Â longÂ currentTimeÂ &#x3D;Â millis();\n\nÂ Â Â Â floatÂ tempÂ &#x3D;Â 0;\n\nÂ Â Â Â floatÂ pressureÂ &#x3D;Â 0;\n\nÂ Â Â Â floatÂ humiÂ &#x3D;Â 0;\n\nÂ Â Â Â ifÂ (currentTimeÂ -Â lastTimeÂ &gt;Â 5000)&#123;\n\nÂ Â Â Â Â Â lastTimeÂ &#x3D;Â currentTime;\n\nÂ Â Â Â Â Â tempÂ &#x3D;Â bmp.readTemperature();\n\nÂ Â Â Â Â Â humiÂ &#x3D;Â 1.8Â *Â tempÂ +Â 32;\n\nÂ Â Â Â Â Â pressureÂ &#x3D;Â bmp.readPressure();\n\nÂ Â Â Â Â Â charÂ tempStr\\[8\\]Â &#x3D;Â &quot;&quot;;\n\nÂ Â Â Â Â Â charÂ pressStr\\[24\\]Â &#x3D;Â &quot;&quot;;\n\nÂ Â Â Â Â Â charÂ humiStr\\[8\\]Â &#x3D;Â &quot;&quot;;\n\nÂ Â Â Â Â Â dtostrf(temp,Â 1,Â 2,Â tempStr);\n\nÂ Â Â Â Â Â dtostrf(pressure,Â 1,Â 2,Â pressStr);\n\nÂ Â Â Â Â Â dtostrf(humi,Â 1,Â 2,Â humiStr);\n\nÂ Â Â Â Â Â Serial.print(&quot;Temp:Â &quot;);\n\nÂ Â Â Â Â Â Serial.println(tempStr);\n\nÂ Â Â Â Â Â Serial.print(&quot;humi:Â &quot;);\n\nÂ Â Â Â Â Â Serial.println(humiStr);\n\nÂ Â Â Â Â Â Serial.print(&quot;Pressure:Â &quot;);\n\nÂ Â Â Â Â Â Serial.println(pressStr);\n\nÂ Â Â Â Â Â client.publish(&quot;esp32&#x2F;temp&quot;,Â tempStr);\n\nÂ Â Â Â Â Â client.publish(&quot;esp32&#x2F;pressure&quot;,Â pressStr);\n\nÂ Â Â Â Â Â client.publish(&quot;esp32&#x2F;humi&quot;,Â humiStr);\n\nÂ Â Â Â Â Â delay(1000);\nÂ Â Â Â &#125;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"è§£æ\"><a href=\"#è§£æ\" class=\"headerlink\" title=\"è§£æ\"></a>è§£æ</h2><p><strong>åŒ¯å…¥æ‰€é ˆçš„ç¨‹å¼åº«</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;WiFi.h&gt;\n\n#include &lt;PubSubClient.h&gt;\n\n#include &lt;Adafruit_BMP280.h&gt;\n\n#include &lt;Adafruit_Sensor.h&gt;\n\n#include &lt;Wire.h&gt;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>å»ºç«‹bmp280ï¼Œwifiå®¢æˆ¶ç«¯åŠMQTTå®¢æˆ¶ç«¯ä»£æ•¸</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">Adafruit_BMP280Â bmp;Â &#x2F;&#x2F;Â I2C\n\nWiFiClientÂ espClient;\n\nPubSubClientÂ client(espClient);\n\n  <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>MQTTserverçš„IPå³æ˜¯æ¨¹è“æ´¾çš„IP</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">&#x2F;&#x2F;wifiå¸³å¯†\n\nconstÂ char*Â ssidÂ &#x3D;Â &quot;---&quot;;\n\nconstÂ char*Â passwordÂ &#x3D;Â &quot;------&quot;;\n\n&#x2F;&#x2F;mqttServer\n\nconstÂ char*Â mqttServerÂ &#x3D;Â &quot;---.---.---.---&quot;;\n\n  \n\n&#x2F;&#x2F;è¨­å®šwifi\n\nvoidÂ setupWifi()&#123;\n\nÂ Â WiFi.begin(ssid,Â password);\n\nÂ Â whileÂ (WiFi.status()Â !&#x3D;Â WL_CONNECTED)&#123;\n\nÂ Â Â Â delay(50);\n\nÂ Â Â Â Serial.print(&quot;.&quot;);\n\nÂ Â &#125;\n\nÂ Â Serial.println(&quot;connectedÂ successful&quot;);\n\nÂ Â Serial.println(WiFi.localIP());\n\nÂ Â &#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>é€£ç·šè‡³MQTTä¼ºæœå™¨æˆåŠŸèˆ‡ç„¡æ³•é€£ç·šçš„å°æ‡‰å‹•ä½œ</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">voidÂ reconnect()&#123;\n\nÂ Â whileÂ (!Â client.connected())&#123;\n\nÂ Â Â Â Serial.print(&quot;AttemptingÂ MQTTÂ connection...&quot;);\n\nÂ Â Â Â ifÂ (client.connect(&quot;esp32Client&quot;))&#123;\n\nÂ Â Â Â Â Â Serial.println(&quot;connected&quot;);\n\nÂ Â Â Â &#125;elseÂ &#123;\n\nÂ Â Â Â Â Â Serial.print(&quot;failedÂ connectedÂ isÂ :Â &quot;);\n\nÂ Â Â Â Â Â Serial.println(client.state());\n\nÂ Â Â Â Â Â delay(2000);\n\nÂ Â Â Â &#125;\n\nÂ Â &#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>void setup(){}è£¡é¢çš„ä¸€äº›å¿…è¦åˆå§‹åŒ–</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">voidÂ setup()Â &#123;\n\nÂ Â Serial.begin(115200);\n\nÂ Â Serial.println(F(&quot;BMP280Â test&quot;));\n\nÂ Â setupWifi();\n\nÂ Â client.setServer(mqttServer,Â 1883);\n\nÂ Â ifÂ (!bmp.begin())Â &#123;\n\nÂ Â Â Â Serial.println(F(&quot;CouldÂ notÂ findÂ aÂ validÂ BMP280Â sensor,Â checkÂ wiringÂ orÂ &quot;\n\nÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &quot;tryÂ aÂ differentÂ address!&quot;));\n\nÂ Â Â Â whileÂ (1)Â delay(10);\n\nÂ Â &#125;\n\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>void loop(){}è£¡</strong></p>\n<p><strong>ç„¡æ³•é€£ç·šå°±é‡è¤‡é€£ç·š</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">ifÂ (!Â client.connected())&#123;\n\nÂ Â Â Â Â Â reconnect();\n\nÂ Â Â Â &#125;\n\nÂ Â Â Â client.loop();\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong><em>é—œæ–¼æ•¸å€¼è½‰å­—å…ƒçš„å‡½å¼</em></strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">char* dtostrf(double _val,signed char _width, unsigned char prec, char* _s)  <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>å¼•æ•¸èªªæ˜ï¼š<br>_val:è¦è½‰æ›çš„floatæˆ–è€…doubleå€¼ã€‚</p>\n<p>_width:è½‰æ›å¾Œæ•´æ•¸éƒ¨åˆ†é•·åº¦ã€‚</p>\n<p>_precï¼šè½‰æ›å¾Œå°æ•¸éƒ¨åˆ†é•·åº¦ã€‚</p>\n<p>_s:å„²å­˜åˆ°è©²charé™£åˆ—ä¸­ã€‚</p>\n<p><strong><em>å…¶ä¸­é€™å€‹æ˜¯è½‰æˆå°æ‡‰çš„å­—å…ƒ</em></strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">charÂ tempStr[8]Â &#x3D;Â &quot;&quot;;\n\ncharÂ pressStr[24]Â &#x3D;Â &quot;&quot;;\n\ncharÂ humiStr[8]Â &#x3D;Â &quot;&quot;;\n\ndtostrf(temp,Â 1,Â 2,Â tempStr);\n\ndtostrf(pressure,Â 1,Â 2,Â pressStr);\n\ndtostrf(humi,Â 1,Â 2,Â humiStr);<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>å–å¾—æº«åº¦/å£“åŠ›æ•¸å€¼å¾Œæ¯5ç§’ç™¼é€åˆ°MQTTçš„Node-RED</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">ifÂ (currentTimeÂ -Â lastTimeÂ &gt;Â 5000)&#123;\n\nÂ Â Â Â Â Â lastTimeÂ &#x3D;Â currentTime;\n\nÂ Â Â Â Â Â tempÂ &#x3D;Â bmp.readTemperature();\n\nÂ Â Â Â Â Â humiÂ &#x3D;Â 1.8Â *Â tempÂ +Â 32;\n\nÂ Â Â Â Â Â pressureÂ &#x3D;Â bmp.readPressure();\n\nÂ Â Â Â Â Â charÂ tempStr[8]Â &#x3D;Â &quot;&quot;;\n\nÂ Â Â Â Â Â charÂ pressStr[24]Â &#x3D;Â &quot;&quot;;\n\nÂ Â Â Â Â Â charÂ humiStr[8]Â &#x3D;Â &quot;&quot;;\n\nÂ Â Â Â Â Â dtostrf(temp,Â 1,Â 2,Â tempStr);\n\nÂ Â Â Â Â Â dtostrf(pressure,Â 1,Â 2,Â pressStr);\n\nÂ Â Â Â Â Â dtostrf(humi,Â 1,Â 2,Â humiStr);\n\nÂ Â Â Â Â Â Serial.print(&quot;Temp:Â &quot;);\n\nÂ Â Â Â Â Â Serial.println(tempStr);\n\nÂ Â Â Â Â Â Serial.print(&quot;humi:Â &quot;);\n\nÂ Â Â Â Â Â Serial.println(humiStr);\n\nÂ Â Â Â Â Â Serial.print(&quot;Pressure:Â &quot;);\n\nÂ Â Â Â Â Â Serial.println(pressStr);\n\nÂ Â Â Â Â Â client.publish(&quot;esp32&#x2F;temp&quot;,Â tempStr);\n\nÂ Â Â Â Â Â client.publish(&quot;esp32&#x2F;pressure&quot;,Â pressStr);\n\nÂ Â Â Â Â Â client.publish(&quot;esp32&#x2F;humi&quot;,Â humiStr);\n\nÂ Â Â Â Â Â delay(1000);\n\nÂ Â Â Â &#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p> <a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/5842507104876900238?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-ysEI3JQaSG4/YQYUjIdUS-I/AAAAAAAAemY/eaOvIOCh2Zkcz5SrWboitrz4Ji02B7hegCNcBGAsYHQ/s1600/1627788424761991-0.png\"></a> </p>\n<hr>\n","categories":["esp32"],"tags":["mqtt","node-red","bmp280"]},{"title":"ESP32-DCç›´æµé¦¬é”æ¸¬è©¦","url":"/2021/08/29/ESP32-DC%E7%9B%B4%E6%B5%81%E9%A6%AC%E9%81%94%E6%B8%AC%E8%A9%A6/","content":"<h1 id=\"ESP32-DCç›´æµé¦¬é”æ¸¬è©¦\"><a href=\"#ESP32-DCç›´æµé¦¬é”æ¸¬è©¦\" class=\"headerlink\" title=\"ESP32-DCç›´æµé¦¬é”æ¸¬è©¦\"></a>ESP32-DCç›´æµé¦¬é”æ¸¬è©¦</h1><h6 id=\"tags-esp32-dc-moto-l298n\"><a href=\"#tags-esp32-dc-moto-l298n\" class=\"headerlink\" title=\"tags: esp32 dc moto l298n\"></a>tags: <code>esp32</code> <code>dc moto</code> <code>l298n</code></h6><p><strong>ç›´æµé¦¬é”æ˜¯å¾®æ§æ¿å¸¸å¸¸åœ¨ç”¨çš„å…ƒä»¶ï¼Œæœ€å¸¸æ­é…çš„æ˜¯L298N</strong></p>\n<p><strong>é©…å‹•è£ç½®ï¼Œå› ç‚ºå¦‚æœæŠŠé¦¬é”ç›´æ¥æ¥ä¸Šå¾®æ§æ¿æœƒå°è‡´ç‡’æ‰</strong></p>\n<h2 id=\"L298Né©…å‹•æ¿\"><a href=\"#L298Né©…å‹•æ¿\" class=\"headerlink\" title=\"L298Né©…å‹•æ¿\"></a>L298Né©…å‹•æ¿</h2><p>OUT1ï¼šç›´æµé›»æ©ŸA+ç«¯å­<br>OUT2ï¼šç›´æµé›»æ©Ÿ A â€“ ç«¯å­<br>OUT3ï¼šç›´æµé›»æ©ŸB+ç«¯å­<br>OUT4ï¼šç›´æµé›»æ©Ÿ B â€“ ç«¯å­</p>\n<p>é€™è£¡è¦ç‰¹åˆ¥æ³¨æ„çš„åœ°æ–¹</p>\n<p>åœ¨åº•éƒ¨ï¼Œæ‚¨æœ‰ä¸€å€‹å¸¶æœ‰ +12Vã€GND å’Œ +5V çš„ä¸‰æ¥ç·šç«¯å­ã€‚Â </p>\n<p>ä¸€èˆ¬ç”¨18650é›»æ± äºŒ~ä¸‰é¡†ä¾›é›»çš„è©±æ¥+12Vå’ŒGNDï¼Œå¦‚æœè¦</p>\n<p>é¡å¤–æ¥å¾®æ§æ¿ä¾‹å¦‚esp32æˆ–arduinoï¼Œåœ¨+5Vå’ŒGNDå°±æ˜¯å¾€å¤–</p>\n<p>ä¾›é›»çµ¦å¾®æ§æ¿çš„5Vã€‚</p>\n<p>æ³¨æ„ï¼šå¦‚æœä¾›é›»è¶…é12Vï¼Œéœ€è¦å»æ‰è·³ç·šï¼Œçµ¦+5Vç«¯ä¾›é›»5Vã€‚</p>\n<p>ä½¿èƒ½(Enble)å¼•è…³  </p>\n<p>å¦‚æœæ‚¨å‘ä½¿èƒ½ A å¼•è…³ç™¼é€ HIGH ä¿¡è™Ÿï¼Œå‰‡é›»æ©Ÿ A å·²æº–å‚™å¥½ä»¥æœ€å¤§é€Ÿåº¦é€²è¡Œæ§åˆ¶ï¼›<br>å¦‚æœå‘ä½¿èƒ½ A å¼•è…³ç™¼é€ LOW ä¿¡è™Ÿï¼Œå‰‡é›»æ©Ÿ A é—œé–‰ï¼›<br>å¦‚æœç™¼é€PWMä¿¡è™Ÿï¼Œå‰‡å¯ä»¥æ§åˆ¶é›»æ©Ÿçš„é€Ÿåº¦ã€‚é›»æ©Ÿé€Ÿåº¦èˆ‡å ç©ºæ¯”æˆæ­£æ¯”ã€‚ä½†æ˜¯ï¼Œ</p>\n<p>è«‹æ³¨æ„ï¼Œ<strong>å°æ–¼å°å ç©ºæ¯”ï¼Œé›»æ©Ÿå¯èƒ½ä¸æœƒæ—‹è½‰</strong>ï¼Œä¸¦ç™¼å‡ºæŒçºŒçš„å—¡å—¡è²ã€‚</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7079589207275388404?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-P-j3FW8Xbpw/YQdexXM61HI/AAAAAAAAemw/Eg9w-rqfbS8KUP7etV1xL1O6CC0g457VwCNcBGAsYHQ/w541-h475/L298N-label.jpg\"></a></p>\n<hr>\n<h2 id=\"æ¥ç·š\"><a href=\"#æ¥ç·š\" class=\"headerlink\" title=\"æ¥ç·š\"></a>æ¥ç·š</h2><p><strong>ï¼Šè¨˜å¾—L298Nçš„GNDè¦æ‹‰ä¸€æ¢åˆ°ESP32çš„GNDï¼Œå¦å‰‡é¦¬é”ä¸æœƒå‹•ä½œ</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7079589207275388404?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-emtD7l8K7IE/YQdpsc_-zqI/AAAAAAAAem8/bIDZQ1CeGIUjmlgIgJlSfQI3DE1emAINQCNcBGAsYHQ/w534-h701/ESP32_1_DC_Motor_bb.png\"></a></p>\n<hr>\n<h2 id=\"ç¨‹å¼\"><a href=\"#ç¨‹å¼\" class=\"headerlink\" title=\"ç¨‹å¼\"></a>ç¨‹å¼</h2><pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">intÂ M1Â &#x3D;Â 27;\n\nintÂ M2Â &#x3D;Â 26;\n\nintÂ enbÂ &#x3D;Â 14;\n\nintÂ dutyÂ &#x3D;Â 150;\n\nvoidÂ setup()Â &#123;\n\nÂ Â Serial.begin(115200);\n\nÂ Â pinMode(M1,Â OUTPUT);\n\nÂ Â pinMode(M2,Â OUTPUT);\n\nÂ Â pinMode(enb,Â OUTPUT);\n\n  \n\nÂ Â ledcSetup(0,Â 3000,Â 8);\n\nÂ Â ledcAttachPin(enb,Â 0);\n\n&#125;\n\n  \n\nvoidÂ loop()Â &#123;\n\nÂ Â &#x2F;&#x2F;forward\n\nÂ Â Serial.println(&quot;forward&quot;);\n\nÂ Â digitalWrite(M1,Â LOW);\n\nÂ Â digitalWrite(M2,Â HIGH);\n\nÂ Â delay(2000);\n\nÂ Â &#x2F;&#x2F;stop\n\nÂ Â Serial.println(&quot;stop&quot;);\n\nÂ Â digitalWrite(M1,Â LOW);\n\nÂ Â digitalWrite(M2,Â LOW);\n\nÂ Â delay(2000);\n\nÂ Â &#x2F;&#x2F;back\n\nÂ Â Serial.println(&quot;back&quot;);\n\nÂ Â digitalWrite(M1,Â HIGH);\n\nÂ Â digitalWrite(M2,Â LOW);\n\nÂ Â delay(2000);\n\nÂ Â &#x2F;&#x2F;stop\n\nÂ Â Serial.println(&quot;stop&quot;);\n\nÂ Â digitalWrite(M1,Â LOW);\n\nÂ Â digitalWrite(M2,Â LOW);\n\nÂ Â delay(2000);\n\nÂ Â &#x2F;&#x2F;pwmÂ forward\n\nÂ Â Serial.println(&quot;forward&quot;);\n\nÂ Â digitalWrite(M1,Â LOW);\n\nÂ Â digitalWrite(M2,Â HIGH);\n\nÂ Â delay(2000);\n\nÂ Â whileÂ (dutyÂ &lt;&#x3D;Â 255)&#123;\n\nÂ Â Â Â Serial.println(duty);\n\nÂ Â Â Â ledcWrite(0,Â duty);\n\nÂ Â Â Â dutyÂ +&#x3D;Â 5;\n\nÂ Â Â Â delay(500);\n\nÂ Â &#125;\n\nÂ Â delay(2000);\n\nÂ Â dutyÂ &#x3D;Â 150;\n\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<hr>\n<h2 id=\"è§£æ\"><a href=\"#è§£æ\" class=\"headerlink\" title=\"è§£æ\"></a>è§£æ</h2><pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">&#x2F;&#x2F;é¦¬é”1çš„æ­£åè½‰è…³ä½\n\nintÂ M1_IN1Â &#x3D;Â 27;\n\nintÂ M1_IN2Â &#x3D;Â 26;\n\nintÂ enbÂ &#x3D;Â 14;Â &#x2F;&#x2F;ä½¿èƒ½æ§åˆ¶è…³ä½\n\nintÂ dutyÂ &#x3D;Â 150;Â &#x2F;&#x2F;PWMçš„dutyclcyleé è¨­150,ä¸èƒ½å¤ªå°,å€¼å¤ªå°é¦¬é”ä¸æœƒè½‰\n\n  \n\nvoidÂ setup()Â &#123;\n\nÂ Â Serial.begin(115200);\n\nÂ Â pinMode(M1_IN1,Â OUTPUT);\n\nÂ Â pinMode(M1_IN2,Â OUTPUT);\n\nÂ Â pinMode(enb,Â OUTPUT);\n\nÂ Â &#x2F;&#x2F;é »é“0,Â é »ç‡3000,Â è§£æåº¦8\n\nÂ Â ledcSetup(0,Â 3000,Â 8);Â \n\nÂ Â &#x2F;&#x2F;enblePin,Â é€šé“\n\nÂ Â ledcAttachPin(enb,Â 0);\n\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>loopè£¡é¢æœ€å¾Œæœ‰while(),å› ç‚ºdutyæœ€å¤§å€¼åˆ°255,æ‰€ä»¥è¦è®“å®ƒå¾150æ¼¸å¢åˆ°255</strong></p>\n<p><strong>ä¾†è§€å¯Ÿpwmçš„å‹•ä½œ</strong></p>\n<pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">voidÂ loop()Â &#123;\n\nÂ Â &#x2F;&#x2F;forward\n\nÂ Â Serial.println(&quot;forward&quot;);\n\nÂ Â digitalWrite(M1_IN1,Â LOW);\n\nÂ Â digitalWrite(M1_IN2,Â HIGH);\n\nÂ Â delay(2000);\n\nÂ Â &#x2F;&#x2F;stop\n\nÂ Â Serial.println(&quot;stop&quot;);\n\nÂ Â digitalWrite(M1_IN1,Â LOW);\n\nÂ Â digitalWrite(M1_IN2,Â LOW);\n\nÂ Â delay(2000);\n\nÂ Â &#x2F;&#x2F;back\n\nÂ Â Serial.println(&quot;back&quot;);\n\nÂ Â digitalWrite(M1,Â HIGH);\n\nÂ Â digitalWrite(M2,Â LOW);\n\nÂ Â delay(2000);\n\nÂ Â &#x2F;&#x2F;stop\n\nÂ Â Serial.println(&quot;stop&quot;);\n\nÂ Â digitalWrite(M1_IN1,Â LOW);\n\nÂ Â digitalWrite(M1_IN2,Â LOW);\n\nÂ Â delay(2000);\n\nÂ Â &#x2F;&#x2F;pwmÂ forward\n\nÂ Â Serial.println(&quot;forward&quot;);\n\nÂ Â digitalWrite(M1_IN1,Â LOW);\n\nÂ Â digitalWrite(M1_IN2,Â HIGH);\n\nÂ Â delay(2000);\n\nÂ Â whileÂ (dutyÂ &lt;&#x3D;Â 255)&#123;\n\nÂ Â Â Â Serial.println(duty);\n\nÂ Â Â Â ledcWrite(0,Â duty);\n\nÂ Â Â Â dutyÂ +&#x3D;Â 5;\n\nÂ Â Â Â delay(500);\n\nÂ Â &#125;\n\nÂ Â delay(2000);\n\nÂ Â dutyÂ &#x3D;Â 150;\n\n&#125;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<hr>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/J5Chbzcz3jY\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>\n","categories":["esp32"],"tags":["dc moto","L298N"]},{"title":"MQTT-Nord-REDé¡¯ç¤ºè¶…éŸ³æ³¢æ¸¬è·æ•¸æ“š+æ§åˆ¶LED","url":"/2021/08/30/MQTT-Nord-RED%E9%A1%AF%E7%A4%BA%E8%B6%85%E9%9F%B3%E6%B3%A2%E6%B8%AC%E8%B7%9D%E6%95%B8%E6%93%9A-%E6%8E%A7%E5%88%B6LED/","content":"<h2 id=\"MQTT-Nord-REDé¡¯ç¤ºè¶…éŸ³æ³¢æ¸¬è·æ•¸æ“š-æ§åˆ¶LED\"><a href=\"#MQTT-Nord-REDé¡¯ç¤ºè¶…éŸ³æ³¢æ¸¬è·æ•¸æ“š-æ§åˆ¶LED\" class=\"headerlink\" title=\"MQTT-Nord-REDé¡¯ç¤ºè¶…éŸ³æ³¢æ¸¬è·æ•¸æ“š+æ§åˆ¶LED\"></a>MQTT-Nord-REDé¡¯ç¤ºè¶…éŸ³æ³¢æ¸¬è·æ•¸æ“š+æ§åˆ¶LED</h2><h2 id=\"è¶…éŸ³æ³¢æ¨¡çµ„-HC-SC04-æ¸¬è©¦å›é¡§-é»æˆ‘å›é¡§\"><a href=\"#è¶…éŸ³æ³¢æ¨¡çµ„-HC-SC04-æ¸¬è©¦å›é¡§-é»æˆ‘å›é¡§\" class=\"headerlink\" title=\"è¶…éŸ³æ³¢æ¨¡çµ„(HC-SC04)æ¸¬è©¦å›é¡§-é»æˆ‘å›é¡§\"></a>è¶…éŸ³æ³¢æ¨¡çµ„(HC-SC04)æ¸¬è©¦å›é¡§-<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/3385819142688987744?hl=zh-TW#\">é»æˆ‘å›é¡§</a></h2><h2 id=\"MQTTç›¸é—œå¸ƒæš‘-é»æˆ‘å›é¡§\"><a href=\"#MQTTç›¸é—œå¸ƒæš‘-é»æˆ‘å›é¡§\" class=\"headerlink\" title=\"MQTTç›¸é—œå¸ƒæš‘-é»æˆ‘å›é¡§\"></a>MQTTç›¸é—œå¸ƒæš‘-<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/3385819142688987744?hl=zh-TW#\">é»æˆ‘å›é¡§</a></h2><h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-c#\" data-language=\"c#\"><code class=\"language-c#\">#include &lt;Ultrasonic.h&gt;\n#include &lt;WiFi.h&gt;\n#include &lt;PubSubClient.h&gt;\n\nUltrasonicÂ ultrasonic(32,Â 33);\nconstÂ char*Â ssidÂ &#x3D;Â &quot;---&quot;;\nconstÂ char*Â passwordÂ &#x3D;Â &quot;-----&quot;;\nconstÂ char*Â mqttServerÂ &#x3D;Â &quot;192.168.67.22&quot;;\n\n&#x2F;&#x2F;wifiå®¢æˆ¶ç«¯åŠMQTTå®¢æˆ¶ç«¯ä»£æ•¸\nWiFiClientÂ espClient;\nPubSubClientÂ client(espClient);\n\n&#x2F;&#x2F;è¨­å®šwifi\n\nvoidÂ wifiConn()&#123;\nÂ Â WiFi.begin(ssid,Â password);\nÂ Â whileÂ (WiFi.status()Â !&#x3D;Â WL_CONNECTED)&#123;\nÂ Â Â Â Serial.print(&quot;.&quot;);\nÂ Â Â Â delay(50);\nÂ Â &#125;\nÂ Â Serial.println(&quot;ConnectedÂ successful!&quot;);\nÂ Â Serial.println(WiFi.localIP());\n&#125;\n\n  \n&#x2F;&#x2F;æª¢æŸ¥è¨‚é–±çš„å­—ä¸²æ˜¯å¦å«æœ‰onå’Œoff,å¦‚æœæ¯”å°ä¸‹ä¾†æ˜¯\n&#x2F;&#x2F;nord-redè£¡çš„æ¨™é ­ä¸€æ¨£,è€Œä¸”åŒ…å«onå°±é–‹ç‡ˆ,offå°±é—œç‡ˆ\n\nvoidÂ callback(charÂ *topic,Â byteÂ *message,Â unsignedÂ intÂ length)&#123;\nÂ Â StringÂ messageDist;\nÂ Â Serial.print(&quot;MessageÂ arrivedÂ onÂ topic:Â &quot;);\nÂ Â Serial.print(topic);\nÂ Â Serial.print(&quot;.Â Message:Â &quot;);\nÂ Â forÂ (intÂ iÂ &#x3D;Â 0;Â iÂ &lt;Â length;Â i++)\nÂ Â &#123;\nÂ Â Â Â Serial.print(char(message\\[i\\]));\nÂ Â Â Â messageDistÂ +&#x3D;Â char(message\\[i\\]);\nÂ Â &#125;\nÂ Â Serial.println();\nÂ Â ifÂ (String(topic)Â &#x3D;&#x3D;Â &quot;esp32&#x2F;output&quot;)&#123;\nÂ Â Â Â ifÂ (messageDistÂ &#x3D;&#x3D;Â &quot;on&quot;)&#123;\nÂ Â Â Â Â Â Serial.print(&quot;on&quot;);\nÂ Â Â Â Â Â digitalWrite(LED_BUILTIN,Â HIGH);\nÂ Â Â Â &#125;elseÂ ifÂ (messageDistÂ &#x3D;&#x3D;Â &quot;off&quot;)&#123;\nÂ Â Â Â Â Â Serial.print(&quot;off&quot;);\nÂ Â Â Â Â Â digitalWrite(LED_BUILTIN,Â LOW);\nÂ Â Â Â &#125;\nÂ Â &#125;\n&#125;\n\n&#x2F;&#x2F;è¬ä¸€é€£ä¸ä¸Šmqttå°±é‡æ–°é€£ç·š\n\nvoidÂ reconnect()&#123;\nÂ Â whileÂ (!Â client.connected())&#123;\nÂ Â Â Â Serial.print(&quot;AttemptingÂ MQTTÂ connection...&quot;);\nÂ Â Â Â ifÂ (client.connect(&quot;esp32Client&quot;))&#123;\nÂ Â Â Â Â Â Serial.println(&quot;connected&quot;);\nÂ Â Â Â Â Â client.subscribe(&quot;esp32&#x2F;output&quot;);\nÂ Â Â Â &#125;elseÂ &#123;\nÂ Â Â Â Â Â Serial.print(&quot;failedÂ connectedÂ isÂ :Â &quot;);\nÂ Â Â Â Â Â Serial.println(client.state());\nÂ Â Â Â Â Â delay(2000);\nÂ Â Â Â &#125;\nÂ Â &#125;\n&#125;\n\nvoidÂ setup()Â &#123;\nÂ Â Serial.begin(115200);\nÂ Â wifiConn();\nÂ Â client.setServer(mqttServer,Â 1883);\nÂ Â client.setCallback(callback);\nÂ Â pinMode(LED_BUILTIN,Â OUTPUT);\n&#125;\n\nvoidÂ loop()Â &#123;\nÂ Â Â Â ifÂ (!Â client.connected())&#123;\nÂ Â Â Â Â Â reconnect();\nÂ Â Â Â &#125;\nÂ Â Â Â client.loop();\nÂ Â Â Â longÂ lastTimeÂ &#x3D;Â 0;\nÂ Â Â Â longÂ currentTimeÂ &#x3D;Â millis();\nÂ Â Â Â floatÂ distanceÂ &#x3D;Â 0;\n\nÂ Â Â Â ifÂ (currentTimeÂ -Â lastTimeÂ &gt;Â 3000)&#123;\nÂ Â Â Â Â Â lastTimeÂ &#x3D;Â currentTime;\nÂ Â Â Â Â Â distanceÂ &#x3D;Â ultrasonic.read(CM);\nÂ Â Â Â Â Â Serial.println(distance);\nÂ Â Â Â Â Â charÂ distStr[8]Â &#x3D;Â &quot;&quot;;\nÂ Â Â Â Â Â dtostrf(distance,Â 1,Â 2,Â distStr);\nÂ Â Â Â Â Â Serial.print(&quot;Distance:Â &quot;);\nÂ Â Â Â Â Â Serial.print(distance);\nÂ Â Â Â Â Â Serial.println(&quot;CM&quot;);\nÂ Â Â Â Â Â client.publish(&quot;esp32&#x2F;distanceRead&quot;,Â distStr);\nÂ Â Â Â Â Â delay(500);\nÂ Â Â Â &#125;\n&#125;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/3385819142688987744?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-rw-XPPQUrZQ/YQylpvMqgMI/AAAAAAAAeq4/AOgDSHZxzNgssqLlrKNTHm1Vxks8qHaMwCNcBGAsYHQ/w505-h1005/1628218778514172-0.png\"></a></p>\n","categories":["esp32"],"tags":["mqtt","hc-sr04","nord-red"]},{"title":"ä½åŠŸè€—è—èŠ½-BLE-ESP32","url":"/2021/08/30/%E4%BD%8E%E5%8A%9F%E8%80%97%E8%97%8D%E8%8A%BD-BLE-ESP32/","content":"<h1 id=\"ä½åŠŸè€—è—èŠ½-BLE-ESP32\"><a href=\"#ä½åŠŸè€—è—èŠ½-BLE-ESP32\" class=\"headerlink\" title=\"ä½åŠŸè€—è—èŠ½-BLE-ESP32\"></a>ä½åŠŸè€—è—èŠ½-BLE-ESP32</h1><h6 id=\"tags-esp32-BLE\"><a href=\"#tags-esp32-BLE\" class=\"headerlink\" title=\"tags: esp32 BLE\"></a>tags: <code>esp32</code> <code>BLE</code></h6><h2 id=\"ä»€éº¼æ˜¯ä½åŠŸè€—è—ç‰™ï¼Ÿ\"><a href=\"#ä»€éº¼æ˜¯ä½åŠŸè€—è—ç‰™ï¼Ÿ\" class=\"headerlink\" title=\"ä»€éº¼æ˜¯ä½åŠŸè€—è—ç‰™ï¼Ÿ\"></a>ä»€éº¼æ˜¯ä½åŠŸè€—è—ç‰™ï¼Ÿ</h2><p>ä½åŠŸè€—è—ç‰™ï¼Œç°¡ç¨± BLEï¼Œæ˜¯è—ç‰™çš„ä¸€ç¨®ç¯€èƒ½è®Šé«”ã€‚ BLE çš„ä¸»è¦æ‡‰ç”¨æ˜¯çŸ­è·é›¢å‚³è¼¸å°‘é‡æ•¸æ“šï¼ˆä½å¸¶å¯¬ï¼‰ã€‚èˆ‡å§‹çµ‚é–‹å•Ÿçš„è—ç‰™ä¸åŒï¼ŒBLE å§‹çµ‚è™•æ–¼ç¡çœ æ¨¡å¼ï¼Œé™¤éç™¼èµ·é€£æ¥ã€‚  </p>\n<p>é€™ä½¿å¾—å®ƒæ¶ˆè€—éå¸¸ä½çš„åŠŸç‡ã€‚ BLE çš„åŠŸè€—æ¯”è—ç‰™ä½ç´„ 100 å€ï¼ˆå–æ±ºæ–¼ç”¨ä¾‹ï¼‰ã€‚</p>\n<p>ç”±æ–¼å…¶ç‰¹æ€§ï¼ŒBLE é©ç”¨æ–¼éœ€è¦äº¤æ›åœ¨éˆ•æ‰£é›»æ± ä¸Šå®šæœŸé‹è¡Œçš„å°‘é‡æ•¸æ“šçš„æ‡‰ç”¨ç¨‹åºã€‚ä¾‹å¦‚ï¼ŒBLE åœ¨é†«ç™‚ä¿å¥ã€å¥èº«ã€è·Ÿè¸ªã€ä¿¡æ¨™ã€å®‰å…¨å’Œå®¶åº­è‡ªå‹•åŒ–è¡Œæ¥­ä¸­éå¸¸æœ‰ç”¨ã€‚  </p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2973515378701882623?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-FOhL0dvy_Mg/YRNcMNCTl7I/AAAAAAAAexI/5l6KJtkQbNg7C3UMQyF4Y6WHJaVhg0KSwCNcBGAsYHQ/w478-h145/image.png\"></a></p>\n<h2 id=\"BLE-Serverå’ŒClient\"><a href=\"#BLE-Serverå’ŒClient\" class=\"headerlink\" title=\"BLE-Serverå’ŒClient\"></a>BLE-Serverå’ŒClient</h2><p>ä½¿ç”¨ä½åŠŸè€—è—ç‰™ï¼Œæœ‰å…©ç¨®é¡å‹çš„è¨­å‚™ï¼šæœå‹™å™¨å’Œå®¢æˆ¶ç«¯ã€‚ ESP32 æ—¢å¯ä»¥ä½œç‚ºå®¢æˆ¶ç«¯ï¼Œä¹Ÿå¯ä»¥ä½œç‚ºæœå‹™å™¨ã€‚  </p>\n<p>æœå‹™å™¨é€šå‘Šå®ƒçš„å­˜åœ¨ï¼Œå› æ­¤å®ƒå¯ä»¥è¢«å…¶ä»–è¨­å‚™ç™¼ç¾ï¼Œä¸¦ä¸”åŒ…å«å®¢æˆ¶ç«¯å¯ä»¥è®€å–çš„æ•¸æ“šã€‚å®¢æˆ¶ç«¯æƒæé™„è¿‘çš„è¨­å‚™ï¼Œç•¶å®ƒæ‰¾åˆ°å®ƒæ­£åœ¨å°‹æ‰¾çš„æœå‹™å™¨æ™‚ï¼Œå®ƒæœƒå»ºç«‹ä¸€å€‹é€£æ¥ä¸¦ç›£è½å‚³å…¥çš„æ•¸æ“šã€‚é€™ç¨±ç‚ºé»å°é»é€šä¿¡ã€‚</p>\n<p>å¦‚å‰æ‰€è¿°ï¼ŒBLE é‚„æ”¯æŒå»£æ’­æ¨¡å¼å’Œç¶²ç‹€ç¶²çµ¡ï¼š  </p>\n<p>å»£æ’­æ¨¡å¼ï¼šæœå‹™å™¨å‘å¤šå€‹é€£æ¥çš„å®¢æˆ¶ç«¯å‚³è¼¸æ•¸æ“šï¼›<br>ç¶²ç‹€ç¶²çµ¡ï¼šæ‰€æœ‰è¨­å‚™éƒ½é€£æ¥èµ·ä¾†ï¼Œé€™æ˜¯ä¸€å€‹å¤šå°å¤šçš„é€£æ¥ã€‚<br>å„˜ç®¡å¯ä»¥å¯¦ç¾å»£æ’­å’Œç¶²ç‹€ç¶²çµ¡è¨­ç½®ï¼Œä½†å®ƒå€‘æ˜¯æœ€è¿‘é–‹ç™¼çš„ï¼Œå› æ­¤ç›®å‰ç‚º ESP32 å¯¦ç¾çš„ç¤ºä¾‹ä¸¦ä¸å¤šã€‚</p>\n<h2 id=\"GATT\"><a href=\"#GATT\" class=\"headerlink\" title=\"GATT\"></a>GATT</h2><p>GATT ä»£è¡¨é€šç”¨å±¬æ€§ï¼Œå®ƒå®šç¾©äº†æš´éœ²çµ¦é€£æ¥çš„ BLE è¨­å‚™çš„åˆ†å±¤æ•¸æ“šçµæ§‹ã€‚é€™æ„å‘³è‘— GATT å®šç¾©äº†å…©å€‹ BLE è¨­å‚™ç™¼é€å’Œæ¥æ”¶æ¨™æº–æ¶ˆæ¯çš„æ–¹å¼ã€‚äº†è§£æ­¤å±¤æ¬¡çµæ§‹å¾ˆé‡è¦ï¼Œå› ç‚ºé€™æ¨£å¯ä»¥æ›´è¼•é¬†åœ°äº†è§£å¦‚ä½•ä½¿ç”¨ BLE å’Œç·¨å¯«æ‡‰ç”¨ç¨‹åºã€‚</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2973515378701882623?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-9tSApqWf14Y/YRNdWbNFB9I/AAAAAAAAexQ/ZkpScOpDK1kfVzgbtLfvPqT0-hwTleFvACNcBGAsYHQ/w565-h318/image.png\"></a></p>\n<hr>\n<p>é€™äº›å±¬æ€§æè¿°ç­å¦‚ä½•èˆ‡ç‰¹å¾µå€¼äº¤äº’ã€‚åŸºæœ¬ä¸Šï¼Œå®ƒåŒ…å«å¯ä»¥èˆ‡ç‰¹å¾µä¸€èµ·ä½¿ç”¨çš„æ“ä½œå’Œéç¨‹ï¼š</p>\n<p>æ’­é€<br>è®€<br>å¯«ç„¡éŸ¿æ‡‰<br>å¯«<br>é€šçŸ¥<br>è¡¨æ˜<br>ç¶“éèº«ä»½é©—è­‰çš„ç°½åå¯«å…¥<br>æ“´å±•å±¬æ€§</p>\n<hr>\n<h2 id=\"ä½¿ç”¨ç¯„ä¾‹æª”çš„â€å¯«å…¥â€\"><a href=\"#ä½¿ç”¨ç¯„ä¾‹æª”çš„â€å¯«å…¥â€\" class=\"headerlink\" title=\"ä½¿ç”¨ç¯„ä¾‹æª”çš„â€å¯«å…¥â€\"></a>ä½¿ç”¨ç¯„ä¾‹æª”çš„â€å¯«å…¥â€</h2><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2973515378701882623?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-Oy14eF3dwdY/YRSQAYKtDBI/AAAAAAAAexc/22G5NNCu4kAgtGlxMQOpAHJWCf6zPcaBwCNcBGAsYHQ/w895-h504/1.jpg\"></a></p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/*\n\n    Based on Neil Kolban example for IDF: https://github.com/nkolban/esp32-snippets/blob/master/cpp_utils/tests/BLE%20Tests/SampleWrite.cpp\n\n    Ported to Arduino ESP32 by Evandro Copercini\n\n*/</span>\n\n  \n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;BLEDevice.h></span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;BLEUtils.h></span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;BLEServer.h></span></span>\n\n  \n\n<span class=\"token comment\">// See the following for generating UUIDs:</span>\n\n<span class=\"token comment\">// https://www.uuidgenerator.net/</span>\n\n  \n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">SERVICE_UUID</span> <span class=\"token string\">\"4fafc201-1fb5-459e-8fcc-c5c9c331914b\"</span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">CHARACTERISTIC_UUID</span> <span class=\"token string\">\"beb5483e-36e1-4688-b7f5-ea07361b26a8\"</span></span>\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyCallbacks</span><span class=\"token operator\">:</span> <span class=\"token base-clause\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">BLECharacteristicCallbacks</span></span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token keyword\">void</span> <span class=\"token function\">onWrite</span><span class=\"token punctuation\">(</span>BLECharacteristic <span class=\"token operator\">*</span>pCharacteristic<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\n      std<span class=\"token double-colon punctuation\">::</span>string value <span class=\"token operator\">=</span> pCharacteristic<span class=\"token operator\">-></span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*********\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"New value: \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> value<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\n          Serial<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>value\\<span class=\"token punctuation\">[</span>i\\<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*********\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token number\">115200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1- Download and install an BLE scanner app in your phone\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2- Scan for BLE devices in the app\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"3- Connect to MyESP32\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"4- Go to CUSTOM CHARACTERISTIC in CUSTOM SERVICE and write something\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"5- See the magic =)\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n  <span class=\"token class-name\">BLEDevice</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MyESP32\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  BLEServer <span class=\"token operator\">*</span>pServer <span class=\"token operator\">=</span> <span class=\"token class-name\">BLEDevice</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n  BLEService <span class=\"token operator\">*</span>pService <span class=\"token operator\">=</span> pServer<span class=\"token operator\">-></span><span class=\"token function\">createService</span><span class=\"token punctuation\">(</span>SERVICE_UUID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n  BLECharacteristic <span class=\"token operator\">*</span>pCharacteristic <span class=\"token operator\">=</span> pService<span class=\"token operator\">-></span><span class=\"token function\">createCharacteristic</span><span class=\"token punctuation\">(</span>\n\n                                         CHARACTERISTIC_UUID<span class=\"token punctuation\">,</span>\n\n                                         BLECharacteristic<span class=\"token double-colon punctuation\">::</span>PROPERTY_READ <span class=\"token operator\">|</span>\n\n                                         BLECharacteristic<span class=\"token double-colon punctuation\">::</span>PROPERTY_WRITE\n\n                                       <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  pCharacteristic<span class=\"token operator\">-></span><span class=\"token function\">setCallbacks</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token function\">MyCallbacks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  pCharacteristic<span class=\"token operator\">-></span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello World\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  pService<span class=\"token operator\">-></span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  BLEAdvertising <span class=\"token operator\">*</span>pAdvertising <span class=\"token operator\">=</span> pServer<span class=\"token operator\">-></span><span class=\"token function\">getAdvertising</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  pAdvertising<span class=\"token operator\">-></span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">&#125;</span>\n\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\n  <span class=\"token comment\">// put your main code here, to run repeatedly:</span>\n\n  <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<hr>\n<h2 id=\"è§£æ\"><a href=\"#è§£æ\" class=\"headerlink\" title=\"è§£æ\"></a>è§£æ</h2><p><strong>é¦–å…ˆå°å…¥ BLE åŠŸèƒ½æ‰€éœ€çš„åº«</strong></p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;BLEDevice.h></span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;BLEUtils.h></span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;BLEServer.h></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>ç„¶å¾Œï¼Œæ‚¨éœ€è¦ç‚º Service å’Œ Characteristic å®šç¾©ä¸€å€‹ UUID,ä¹Ÿå¯ä»¥æµç”¨å…§è¨‚çš„UUID</strong></p>\n<p><strong>æˆ–è¦è‡ªå·±å‰µå»ºè‡ªå·±çš„UUIDå¯ä»¥åˆ°é€™å€‹ç¶²ç«™<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2973515378701882623?hl=zh-TW#\">https://www.uuidgenerator.net/</a></strong></p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">SERVICE_UUID</span> <span class=\"token string\">\"4fafc201-1fb5-459e-8fcc-c5c9c331914b\"</span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">CHARACTERISTIC_UUID</span> <span class=\"token string\">\"beb5483e-36e1-4688-b7f5-ea07361b26a8\"</span></span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>æ¥æ”¶å­—ä¸²çš„é¡</strong></p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyCallbacks</span><span class=\"token operator\">:</span> <span class=\"token base-clause\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">BLECharacteristicCallbacks</span></span> <span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token keyword\">void</span> <span class=\"token function\">onWrite</span><span class=\"token punctuation\">(</span>BLECharacteristic <span class=\"token operator\">*</span>pCharacteristic<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\n      std<span class=\"token double-colon punctuation\">::</span>string value <span class=\"token operator\">=</span> pCharacteristic<span class=\"token operator\">-></span><span class=\"token function\">getValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*********\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"New value: \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> value<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\n          Serial<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>value\\<span class=\"token punctuation\">[</span>i\\<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*********\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">*</span><span class=\"token operator\">*</span>åœ¨ <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> ä¸­ï¼Œå®ƒä»¥ <span class=\"token number\">115200</span> çš„æ³¢ç‰¹ç‡å•Ÿå‹•ä¸²è¡Œé€šä¿¡<span class=\"token operator\">*</span><span class=\"token operator\">*</span>\n```cpp \n\nSerial<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token number\">115200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>å‰µå»ºä¸€å€‹åç‚ºâ€œMyESP32â€çš„ BLE è¨­å‚™ã€‚æ‚¨å¯ä»¥å°‡æ­¤åç¨±æ›´æ”¹ç‚ºæ‚¨å–œæ­¡çš„ä»»ä½•åç¨±ã€‚</strong></p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token class-name\">BLEDevice</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MyESP32\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p><strong>åœ¨ä»¥ä¸‹è¡Œä¸­ï¼Œæ‚¨å°‡ BLE è¨­å‚™è¨­ç½®ç‚ºæœå‹™å™¨ã€‚</strong></p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\">BLEServer <span class=\"token operator\">*</span>pServer <span class=\"token operator\">=</span> <span class=\"token class-name\">BLEDevice</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>åœ¨é€™ä¹‹å¾Œï¼Œä½ çš„BLEæœå‹™å™¨å‰µå»ºçš„UUIDå‰é¢å®šç¾©çš„æœå‹™ã€‚</strong></p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\">BLEService <span class=\"token operator\">*</span>pService <span class=\"token operator\">=</span> pServer<span class=\"token operator\">-></span><span class=\"token function\">createService</span><span class=\"token punctuation\">(</span>SERVICE_UUID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>è¨­ç½®è©²æœå‹™çš„ç‰¹å¾µã€‚å¦‚æ‚¨æ‰€è¦‹ï¼Œæ‚¨é‚„ä½¿ç”¨äº†ä¹‹å‰å®šç¾©çš„ UUIDï¼Œæ‚¨éœ€è¦å°‡ç‰¹å¾µçš„å±¬æ€§ä½œç‚ºåƒæ•¸å‚³éã€‚åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œå®ƒæ˜¯ï¼šè®€å’Œå¯«ã€‚</strong></p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\">BLECharacteristic <span class=\"token operator\">*</span>pCharacteristic <span class=\"token operator\">=</span> pService<span class=\"token operator\">-></span><span class=\"token function\">createCharacteristic</span><span class=\"token punctuation\">(</span>\n\n                                         CHARACTERISTIC_UUID<span class=\"token punctuation\">,</span>\n\n                                         BLECharacteristic<span class=\"token double-colon punctuation\">::</span>PROPERTY_READ <span class=\"token operator\">|</span>\n\n                                         BLECharacteristic<span class=\"token double-colon punctuation\">::</span>PROPERTY_WRITE\n\n                                       <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p><strong>å‰µå»ºsetCallbacks() æ–¹æ³•æ¥æ”¶å‚³ä¾†çš„å€¼æˆ–å­—ä¸²</strong></p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\">pCharacteristic<span class=\"token operator\">-></span><span class=\"token function\">setCallbacks</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token function\">MyCallbacks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>å‰µå»ºç‰¹å¾µå¾Œï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ setValue() æ–¹æ³•è¨­ç½®å…¶å€¼ã€‚</strong></p>\n<p><strong>æˆ‘å€‘å°‡å€¼è¨­ç½®ç‚ºæ–‡æœ¬â€œHello World èªª Neilâ€ã€‚æ‚¨å¯ä»¥å°‡æ­¤æ–‡æœ¬æ›´æ”¹ç‚ºæ‚¨å–œæ­¡çš„ä»»ä½•å…§å®¹ã€‚ä¾‹å¦‚ï¼Œåœ¨æœªä¾†çš„é …ç›®ä¸­ï¼Œè©²æ–‡æœ¬å¯ä»¥æ˜¯å‚³æ„Ÿå™¨è®€æ•¸æˆ–ç‡ˆçš„ç‹€æ…‹ã€‚</strong></p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\">\npCharacteristic<span class=\"token operator\">-></span><span class=\"token function\">setValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello World\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n``\n\n<span class=\"token operator\">*</span><span class=\"token operator\">*</span>æœ€å¾Œï¼Œæ‚¨å¯ä»¥å•Ÿå‹•æœå‹™ï¼Œä¸¦é€²è¡Œå»£å‘Šï¼Œä»¥ä¾¿å…¶ä»– BLE è¨­å‚™å¯ä»¥æƒæä¸¦æ‰¾åˆ°æ­¤ BLE è¨­å‚™<span class=\"token operator\">*</span><span class=\"token operator\">*</span>\n\n  \n```cpp\nBLEAdvertising <span class=\"token operator\">*</span>pAdvertising <span class=\"token operator\">=</span> pServer<span class=\"token operator\">-></span><span class=\"token function\">getAdvertising</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  pAdvertising<span class=\"token operator\">-></span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<hr>\n<p><strong>ä¸Šå‚³å®Œæˆä¹‹å¾Œ,æ‰“é–‹ç›£æ¸¬çª—å£,æŒ‰ä¸€ä¸‹ESP32çš„RESET,æœƒå‡ºç¾ä»¥ä¸‹ç•«é¢</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2973515378701882623?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-5jO95-XvQu0/YRSSPJ9F-AI/AAAAAAAAexw/nz3F5DWsJ9oNFZmLf8xf-z7AsQZglJ_-wCNcBGAsYHQ/w767-h432/2.jpg\"></a></p>\n<p><strong>ä¸‹è¼‰æ‰‹æ©ŸAPP <a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2973515378701882623?hl=zh-TW#\">nRF Connect</a>Â ä¸¦é–‹å•“APP</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2973515378701882623?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-qlUi7497sg4/YRSTXZb1f-I/AAAAAAAAeyE/LbzEQbE2hvs3MFDjERCYdpcVf4fDohQsACNcBGAsYHQ/s1600/1628738390279946-0.png\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2973515378701882623?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-Nf9DHYKj3AM/YRSTVOlwm6I/AAAAAAAAeyA/pKUuFBbdjZo_8FGJdX2MmLcHL1c1hPLhwCNcBGAsYHQ/s1600/1628738380362595-1.png\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2973515378701882623?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-1JkgS9GGNVs/YRSTS3iQbwI/AAAAAAAAex8/RXyTRNwbU58Qrr1PPOv3KNTTaf5Dj68JQCNcBGAsYHQ/s1600/1628738377493328-2.png\"></a></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2973515378701882623?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-9WgHaxVf2FI/YRSTSLnMzvI/AAAAAAAAex4/Gye9ZeTj3eMmdO9UEjNMTS95IOFWJOblgCNcBGAsYHQ/s1600/1628738372129606-3.png\"></a></p>\n<p><strong>æŒ‰ä¸‹SENDå¾Œ</strong></p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2973515378701882623?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-qFsywMyHNCE/YRSToPLpGQI/AAAAAAAAeyU/WeOP7MtlzeMjBweA6cIOJIYuwvZE93XowCNcBGAsYHQ/w879-h495/3.jpg\"></a></p>\n<p>åƒè€ƒ-<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/2973515378701882623?hl=zh-TW#\">https://randomnerdtutorials.com/esp32-bluetooth-low-energy-ble-arduino-ide/</a></p>\n","categories":["esp32"],"tags":["BLE"]},{"title":"webServeræ§åˆ¶neopixelç‡ˆæ¢-ESP32","url":"/2021/08/30/webServer%E6%8E%A7%E5%88%B6neopixel%E7%87%88%E6%A2%9D-ESP32/","content":"<h1 id=\"webServeræ§åˆ¶RGB-LED-ESP32\"><a href=\"#webServeræ§åˆ¶RGB-LED-ESP32\" class=\"headerlink\" title=\"webServeræ§åˆ¶RGB_LED-ESP32\"></a>webServeræ§åˆ¶RGB_LED-ESP32</h1><h6 id=\"tags-esp32-rbg-webserver\"><a href=\"#tags-esp32-rbg-webserver\" class=\"headerlink\" title=\"tags: esp32 rbg webserver\"></a>tags: <code>esp32</code> <code>rbg</code> <code>webserver</code></h6><p><strong>é€™å€‹é …ç›®é‚„æœ‰é»æ¨¡ç³Š,ä½†å°±æˆ‘çš„ç†è§£é‚„æ˜¯å…ˆç´€éŒ„ä¸‹ä¾†</strong></p>\n<p>**</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7721744657667049248?hl=zh-TW#\"><img src=\"https://lh3.googleusercontent.com/-EGRdbV6myKU/YSMGxtZ4WBI/AAAAAAAAe2I/kzc_LU3nZIQf1s_6QrPwHXVFcsKIayS5wCNcBGAsYHQ/s1600/1629685406049224-0.png\"></a></p>\n<p>**</p>\n<p><strong>åƒè€ƒ-<a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7721744657667049248?hl=zh-TW#\">https://randomnerdtutorials.com/esp32-esp8266-rgb-led-strip-web-server/</a></strong></p>\n<h2 id=\"æ§åˆ¶æµç¨‹\"><a href=\"#æ§åˆ¶æµç¨‹\" class=\"headerlink\" title=\"æ§åˆ¶æµç¨‹\"></a>æ§åˆ¶æµç¨‹</h2><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7721744657667049248?hl=zh-TW#\"><img src=\"https://i1.wp.com/randomnerdtutorials.com/wp-content/uploads/2019/03/color-picker-overview.png?w=750&quality=100&strip=all&ssl=1\"></a></p>\n<p><em><strong>ESP32ç¶²çµ¡æœå‹™å™¨é¡¯ç¤ºä¸€å€‹é¡è‰²é¸æ“‡å™¨ã€‚<br>é¸æ“‡é¡è‰²å¾Œï¼Œç€è¦½å™¨æœƒå‘åŒ…å«æ‰€é¸é¡è‰²çš„ Rã€G å’Œ B åƒæ•¸çš„ URL ç™¼å‡ºè«‹æ±‚ã€‚<br>ESP32æ¥æ”¶è«‹æ±‚ä¸¦æ‹†åˆ†æ¯å€‹é¡è‰²åƒæ•¸çš„å€¼ã€‚<br>ç„¶å¾Œï¼Œå®ƒå‘æ§åˆ¶æ¢å¸¶çš„ GPIO ç™¼é€å…·æœ‰ç›¸æ‡‰å€¼çš„ PWM ä¿¡è™Ÿã€‚</strong></em></p>\n<p> <strong>å¦‚æœç‡ˆæ¢æ˜¯ä½¿ç”¨8é¡†LEDä»¥ä¸Š,è¦å¦å¤–åŠ 5Vé›»æºç¨ç«‹ä¾›é›»</strong></p>\n<p>**</p>\n<p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/7721744657667049248?hl=zh-TW#\"><img src=\"https://i0.wp.com/randomnerdtutorials.com/wp-content/uploads/2019/03/ESP32-LED-strip-schematic_f.png?w=445&quality=100&strip=all&ssl=1\"></a></p>\n<hr>\n<h2 id=\"ç¨‹å¼ç¢¼\"><a href=\"#ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"ç¨‹å¼ç¢¼\"></a>ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\">\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;WiFi.h></span></span>\n\n<span class=\"token comment\">//è¨­å®šwifiå¸³å¯†</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span><span class=\"token operator\">*</span> ssid <span class=\"token operator\">=</span> <span class=\"token string\">\"---\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span><span class=\"token operator\">*</span> password <span class=\"token operator\">=</span> <span class=\"token string\">\"----------\"</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">//è¨­å®šç¶²è·¯ä¼ºæœå™¨çš„port</span>\n\nWiFiServer <span class=\"token function\">server</span><span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//rgbçš„å°æ‡‰åˆ°ç¶²è·¯çš„åˆå§‹å€¼</span>\n\nString redString <span class=\"token operator\">=</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">;</span>\n\nString greenString <span class=\"token operator\">=</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">;</span>\n\nString blueString <span class=\"token operator\">=</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> pos1 <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> pos2 <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> pos3 <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">int</span> pos4 <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">//å„²å­˜httpè«‹æ±‚çš„è®Šé‡</span>\n\nString header<span class=\"token punctuation\">;</span>\n\n  \n<span class=\"token comment\">//RGBçš„PIN</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> Rpin <span class=\"token operator\">=</span> <span class=\"token number\">13</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> Gpin <span class=\"token operator\">=</span> <span class=\"token number\">12</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> Bpin <span class=\"token operator\">=</span> <span class=\"token number\">14</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//è¨­å®šæ™‚é–“</span>\n\n<span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">long</span> previousTime <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">long</span> currenTime <span class=\"token operator\">=</span> <span class=\"token function\">millis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n\n    Serial<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token number\">115200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//é…ç½® LED PWM åŠŸèƒ½</span>\n\n    <span class=\"token function\">ledcSetup</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">ledcSetup</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">ledcSetup</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">ledcAttachPin</span><span class=\"token punctuation\">(</span>Rpin<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">ledcAttachPin</span><span class=\"token punctuation\">(</span>Gpin<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">ledcAttachPin</span><span class=\"token punctuation\">(</span>Bpin<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//å¸¶å…¥ç¶²è·¯é€£ç·š</span>\n\n    WiFi<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span>ssid<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>WiFi<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> WL_CONNECTED<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"WiFi connceted success\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>WiFi<span class=\"token punctuation\">.</span><span class=\"token function\">localIP</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    server<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n  \n<span class=\"token keyword\">void</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    WiFiClient client <span class=\"token operator\">=</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">available</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        currenTime <span class=\"token operator\">=</span> <span class=\"token function\">millis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        previousTime <span class=\"token operator\">=</span> currenTime<span class=\"token punctuation\">;</span>\n        String currentLine <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span> \n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">.</span><span class=\"token function\">connected</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> currenTime <span class=\"token operator\">-</span> previousTime <span class=\"token operator\">&lt;=</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n            currenTime <span class=\"token operator\">=</span> <span class=\"token function\">millis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">.</span><span class=\"token function\">available</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">char</span> c <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                Serial<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                header <span class=\"token operator\">+=</span> c<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>c <span class=\"token operator\">==</span> <span class=\"token string\">'\\\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token comment\">//å¦‚æœå­—ä¸²ç­‰æ–¼0è¡¨ç¤ºæ¥æ”¶å®Œæˆ</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentLine<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n                        client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"HTTP/1.1 200 OK\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-type:text/html\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connection: close\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                        <span class=\"token comment\">// ä»¥ä¸‹ç¶²é çš„éƒ¨ä»½ç›®å‰å°æˆ‘ä¾†èªªé›£åº¦æœ‰é»é«˜,å°¤å…¶èª¿è‰²éƒ¨ä»½,æš«å€Ÿç”¨å­¸ç¿’å°è±¡çš„ç¯„ä¾‹</span>\n\n                        <span class=\"token comment\">// Display the HTML web page</span>\n\n                        client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;!DOCTYPE html>&lt;html>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;head>&lt;meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\">\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                        client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;link rel=\\\"icon\\\" href=\\\"data:,\\\">\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                        client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;link rel=\\\"stylesheet\\\" href=\\\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\\\">\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                        client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;script src=\\\"https://cdnjs.cloudflare.com/ajax/libs/jscolor/2.0.4/jscolor.min.js\\\">&lt;/script>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                        client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;/head>&lt;body>&lt;div class=\\\"container\\\">&lt;div class=\\\"row\\\">&lt;h1>ESP Color Picker&lt;/h1>&lt;/div>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                        client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;a class=\\\"btn btn-primary btn-lg\\\" href=\\\"#\\\" id=\\\"change_color\\\" role=\\\"button\\\">Change Color&lt;/a> \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                        client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;input class=\\\"jscolor &#123;onFineChange:'update(this)'&#125;\\\" id=\\\"rgb\\\">&lt;/div>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                        client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;script>function update(picker) &#123;document.getElementById('rgb').innerHTML = Math.round(picker.rgb[0]) + ', ' +  Math.round(picker.rgb[1]) + ', ' + Math.round(picker.rgb[2]);\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                        client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"document.getElementById(\\\\\"</span>change_color\\\\<span class=\"token string\">\").href=\\\\\"</span><span class=\"token operator\">?</span>r\\\\<span class=\"token string\">\" + Math.round(picker.rgb[0]) + \\\"g\\\" +  Math.round(picker.rgb[1]) + \\\"b\\\" + Math.round(picker.rgb[2]) + \\\"&amp;\\\";&#125;&lt;/script>&lt;/body>&lt;/html>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                        <span class=\"token comment\">// The HTTP response ends with another blank line</span>\n                        client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token comment\">// Request sample: /?r201g32b255&amp;</span>\n                        <span class=\"token comment\">// Red = 201 | Green = 32 | Blue = 255</span>\n                        <span class=\"token comment\">//æœå°‹å­—ä¸²è£¡çš„é—œéµå­—,å¦‚æœæœ‰çš„è©±å°±å°‡å®ƒä¸²æ¥åœ¨ä¸€èµ·</span>\n                        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GET /?r\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n                            pos1 <span class=\"token operator\">=</span> header<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            pos2 <span class=\"token operator\">=</span> header<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'g'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            pos3 <span class=\"token operator\">=</span> header<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            pos4 <span class=\"token operator\">=</span> header<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&amp;'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            redString <span class=\"token operator\">=</span> header<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span>pos1<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> pos2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            greenString <span class=\"token operator\">=</span> header<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span>pos2<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> pos3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            blueString <span class=\"token operator\">=</span> header<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span>pos3<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> pos4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            <span class=\"token function\">ledcWrite</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> redString<span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            <span class=\"token function\">ledcWrite</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> greenString<span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            <span class=\"token function\">ledcWrite</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> blueString<span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token punctuation\">&#125;</span>\n                        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">&#123;</span>\n                        <span class=\"token comment\">//å¦å‰‡ç•¶å‰çš„è¡Œç‚ºç©º</span>\n                        currentLine <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token comment\">//å¦‚æœcç‚ºç©ºè¡Œ,å‰‡cåŠ å…¥ç•¶å‰è¡Œ</span>\n                <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>c <span class=\"token operator\">!=</span> <span class=\"token string\">'\\\\r'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n                    currentLine <span class=\"token operator\">+=</span> c<span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        header <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n        client<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Client disconnected.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>**</p>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/MwvuwqJcddI\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>","categories":["esp32"],"tags":["neopixel","webServer","rgb"]},{"title":"webserveræ§åˆ¶ä¼ºæœé¦¬é”-ESP32","url":"/2021/08/30/webserver%E6%8E%A7%E5%88%B6%E4%BC%BA%E6%9C%8D%E9%A6%AC%E9%81%94-ESP32/","content":"<h1 id=\"webserveræ§åˆ¶ä¼ºæœé¦¬é”-ESP32\"><a href=\"#webserveræ§åˆ¶ä¼ºæœé¦¬é”-ESP32\" class=\"headerlink\" title=\"webserveræ§åˆ¶ä¼ºæœé¦¬é”-ESP32\"></a>webserveræ§åˆ¶ä¼ºæœé¦¬é”-ESP32</h1><p><em>ä¼ºæœé¦¬é”å°æ–¼å¾®æ§æ¿ç©å®¶ä¸€å®šæ˜¯å†ç†Ÿæ‚‰ä¸éï¼Œä¹Ÿæ˜¯å…¥é–€å¿…å­¸çš„å…ƒä»¶ä¹‹ä¸€ï¼Œåªæ˜¯ç‰¹åˆ¥è¦æ³¨æ„å¦‚æœè¦æ§åˆ¶ï¼’å€‹ä»¥ä¸Šçš„ä¼ºæœé¦¬é”ï¼Œä¸€å®šè¦ä½¿ç”¨å¤–æ¥é›»æºæˆ–è€…PCA9685ã€‚</em></p>\n<p><em>ä¼ºæœé¦¬é”æœ‰å¾ˆå¤šæ¬¾ï¼Œå°å‹å¸¸ç”¨çš„å°±å±¬SG-90ï¼Œå®ƒæ˜¯å¡‘è† é½’è¼ªï¼Œé‚„æœ‰ä¸€ç¨®æ˜¯é‡‘å±¬é½’è¼ª</em></p>\n<h2 id=\"ä¼ºæœé¦¬é”è¦æ ¼\"><a href=\"#ä¼ºæœé¦¬é”è¦æ ¼\" class=\"headerlink\" title=\"ä¼ºæœé¦¬é”è¦æ ¼\"></a>ä¼ºæœé¦¬é”è¦æ ¼</h2><h3 id=\"SG-90è¦æ ¼\"><a href=\"#SG-90è¦æ ¼\" class=\"headerlink\" title=\"SG-90è¦æ ¼\"></a>SG-90è¦æ ¼</h3><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/3986922455798592262?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-nxgapjbWx68/YSXYndzzCVI/AAAAAAAAe2s/qsMvSksBD3YRlIHAnQ1wzBKyuROmzx90wCNcBGAsYHQ/w233-h233/dc05cb93dcb58dbc3887b14f60cced9f.jpg\"></a></p>\n<ul>\n<li>  å·¥ä½œé›»å£“ï¼š4.8V.</li>\n<li>  è½‰çŸ©ï¼š1.8kg-cm</li>\n<li>  é‹è½‰é€Ÿåº¦ï¼š0.1ç§’âˆ• 60åº¦</li>\n<li>  è½‰å‹•è§’åº¦ï¼šæœ€å¤§90Â°</li>\n<li>è„ˆè¡å¯¬åº¦ç¯„åœï¼š500~2400Âµs.</li>\n</ul>\n<h3 id=\"MG90Sè¦æ ¼\"><a href=\"#MG90Sè¦æ ¼\" class=\"headerlink\" title=\"MG90Sè¦æ ¼\"></a>MG90Sè¦æ ¼</h3><p><a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/3986922455798592262?hl=zh-TW#\"><img src=\"https://1.bp.blogspot.com/-ClUAItIjGJ4/YSXY8XrU1pI/AAAAAAAAe20/pIH_GpNA5Cgnlsx45QZJ1nlS6Uu6_xsdACNcBGAsYHQ/w273-h273/180303000000b-800x800.jpg\"></a></p>\n<ul>\n<li>  é‡‘å±¬éŠ…é½’ã€ç©ºå¿ƒæ¯é›»æ©Ÿã€é›™æ»¾ç è»¸æ‰¿</li>\n<li>  ç”¢å“å‹è™Ÿï¼š<strong>MG90s</strong>.</li>\n<li>  æ‰­åŠ›ï¼š2.0kg(4.8v)</li>\n<li>  é‹è½‰é€Ÿåº¦ï¼š0.11s(4.8v)</li>\n<li>  è½‰å‹•è§’åº¦ï¼šæœ€å¤§90Â°/180Â°</li>\n<li>èˆµæ©Ÿé¡å‹ï¼šæ•¸å­—èˆµæ©Ÿ</li>\n</ul>\n<hr>\n<ol>\n<li> <em>æ­¤æ¬¡å¯¦é©—ä»¥MG-90ç‚ºä¸»</em></li>\n<li> <em>è¦æ§åˆ¶ä¼ºæœé¦¬é”æœ‰å…©ç¨®æ–¹å¼ï¼Œä¸€ç¨®æ˜¯åˆ©ç”¨PWMï¼Œå¦ä¸€ç¨®æ˜¯ä½¿ç”¨ç¾æœ‰çš„åº«åŒ…ä¾†æ§åˆ¶ï¼Œæœ¬æ¬¡å¯¦é©—ä»¥åº«åŒ…ç‚ºä¸»</em></li>\n</ol>\n<h2 id=\"é¦–å…ˆå®‰è£\"><a href=\"#é¦–å…ˆå®‰è£\" class=\"headerlink\" title=\"é¦–å…ˆå®‰è£\"></a>é¦–å…ˆå®‰è£</h2><p> <a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/3986922455798592262?hl=zh-TW#\">ESP32 Arduino Servo Library</a></p>\n<h2 id=\"æ¥ç·šæ–¹å¼\"><a href=\"#æ¥ç·šæ–¹å¼\" class=\"headerlink\" title=\"æ¥ç·šæ–¹å¼\"></a>æ¥ç·šæ–¹å¼</h2><ul>\n<li><p>  GND -&gt; ESP32Â GNDÂ pin;</p>\n</li>\n<li><p>  Power -&gt; ESP32Â VINÂ pin;</p>\n</li>\n<li><p>Signal -&gt;Â GPIO 13Â (or any PWM pin).</p>\n<p>  <a href=\"https://draft.blogger.com/blog/post/edit/3809681606094011522/3986922455798592262?hl=zh-TW#\"><img src=\"https://i1.wp.com/randomnerdtutorials.com/wp-content/uploads/2018/05/servo-esp32-schematic.png?w=750&quality=100&strip=all&ssl=1\"></a></p>\n</li>\n</ul>\n<h2 id=\"é€²è¡Œå¯¦é©—\"><a href=\"#é€²è¡Œå¯¦é©—\" class=\"headerlink\" title=\"é€²è¡Œå¯¦é©—\"></a>é€²è¡Œå¯¦é©—</h2><pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ESP32Servo.h></span></span>\n \nServo myservo<span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">int</span> pos <span class=\"token operator\">=</span> <span class=\"token number\">20</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> pin <span class=\"token operator\">=</span> <span class=\"token number\">12</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">void</span> <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token number\">115200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  myservo<span class=\"token punctuation\">.</span><span class=\"token function\">attach</span><span class=\"token punctuation\">(</span>pin<span class=\"token punctuation\">,</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2400</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n \n<span class=\"token keyword\">void</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>pos<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">;</span> pos<span class=\"token operator\">&lt;=</span><span class=\"token number\">160</span><span class=\"token punctuation\">;</span> pos<span class=\"token operator\">+=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    myservo<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>pos<span class=\"token operator\">=</span><span class=\"token number\">160</span><span class=\"token punctuation\">;</span> pos<span class=\"token operator\">>=</span><span class=\"token number\">20</span><span class=\"token punctuation\">;</span> pos<span class=\"token operator\">-=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    myservo<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<hr>\n<h2 id=\"ESP32ç¶²é ä¼ºæœå™¨\"><a href=\"#ESP32ç¶²é ä¼ºæœå™¨\" class=\"headerlink\" title=\"ESP32ç¶²é ä¼ºæœå™¨\"></a>ESP32ç¶²é ä¼ºæœå™¨</h2><p><em>ä¸Šé¢ä¼ºæœé¦¬é”ç°¡å–®çš„æ¸¬è©¦å®Œæˆå¾Œï¼Œå°±å¯ä»¥ç´å…¥ç¶²é ä¼ºæœå™¨ä¾†æ§åˆ¶ä¼ºæœé¦¬é”ï¼Œé€™è£¡æˆ‘è¦ºå¾—æœ‰é»é›£åº¦çš„æ˜¯ç¶²é çš„ç·¨å¯«ï¼Œå› ç‚ºå¯«HTML+CSSæˆ‘æ²’å­¸éï¼Œæ‰€ä»¥åƒè€ƒç¶²è·¯ä¸Šæ•™å­¸æ–‡çš„ç¶²é ç¯„ä¾‹ã€‚</em></p>\n<p><em>é€™æ˜¯æˆ‘åƒè€ƒæ•™å­¸ç¶²ç«™ä¸Šçš„ç¶²é ç¯„ä¾‹</em></p>\n<pre class=\"line-numbers language-html\" data-language=\"html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>icon<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>data:,<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n    <span class=\"token selector\">body</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">font-family</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Trebuchet MS\"</span><span class=\"token punctuation\">,</span> Arial<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">margin-left</span><span class=\"token punctuation\">:</span>auto<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">margin-right</span><span class=\"token punctuation\">:</span>auto<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token selector\">.slider</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 300px<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span>ESP32 with Servo<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>Position: <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>servoPos<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>range<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">min</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">max</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>180<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>slider<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>servoSlider<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">onchange</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\"><span class=\"token function\">servo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword\">var</span> slider <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"servoSlider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> servoP <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"servoPos\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    servoP<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> slider<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n    slider<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">oninput</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        slider<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n        servoP<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    $<span class=\"token punctuation\">.</span><span class=\"token function\">ajaxSetup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>timeout<span class=\"token operator\">:</span><span class=\"token number\">1000</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">servo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pos</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        $<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/?value=\"</span> <span class=\"token operator\">+</span> pos <span class=\"token operator\">+</span> <span class=\"token string\">\"&amp;\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#123;</span>Connection<span class=\"token operator\">:</span> close<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<hr>\n<p><em>ä½¿ç”¨ script å’Œ /script æ¨™ç±¤å°‡ä¸€äº› JavaScript ä»£ç¢¼æ·»åŠ åˆ°æ‚¨çš„ HTML æ–‡ä»¶ä¸­ã€‚æ­¤ä»£ç¢¼ç‰‡æ®µä½¿ç”¨ç•¶å‰æ»‘å¡Šä½ç½®æ›´æ–°ç¶²é </em></p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\">var slider <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"servoSlider\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nvar servoP <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"servoPos\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nservoP<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> slider<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\nslider<span class=\"token punctuation\">.</span>oninput <span class=\"token operator\">=</span> <span class=\"token function\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    slider<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n    servoP<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n  <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>æ¥ä¸‹ä¾†çš„å¹¾è¡Œåœ¨æ­¤ç‰¹å®š URL è·¯å¾‘ /?value\\u003d[SLIDER_POSITION]&amp; ä¸­çš„ ESP IP åœ°å€ä¸Šç™¼å‡º HTTP GET è«‹æ±‚ã€‚</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\">$<span class=\"token punctuation\">.</span><span class=\"token function\">ajaxSetup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span>timeout<span class=\"token operator\">:</span><span class=\"token number\">1000</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfunction <span class=\"token function\">servo</span><span class=\"token punctuation\">(</span>pos<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    $<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/?value=\"</span> <span class=\"token operator\">+</span> pos <span class=\"token operator\">+</span> <span class=\"token string\">\"&amp;\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#123;</span>Connection<span class=\"token operator\">:</span> close<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>ä¾‹å¦‚ï¼Œç•¶æ»‘å¡Šä½æ–¼ 0 æ™‚ï¼Œæ‚¨åœ¨ä»¥ä¸‹ URL ä¸Šç™¼å‡º HTTP GET è«‹æ±‚ï¼š</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">http:&#x2F;&#x2F;192.168.1.135&#x2F;?value&#x3D;0&amp;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<hr>\n<h2 id=\"å®Œæ•´ç¨‹å¼ç¢¼\"><a href=\"#å®Œæ•´ç¨‹å¼ç¢¼\" class=\"headerlink\" title=\"å®Œæ•´ç¨‹å¼ç¢¼\"></a>å®Œæ•´ç¨‹å¼ç¢¼</h2><pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ESP32Servo.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;WiFi.h></span></span>\n \n<span class=\"token comment\">//å®šç¾©ä¼ºæœé¦¬é”</span>\nServo myservo<span class=\"token punctuation\">;</span>\n \n<span class=\"token comment\">//ä¼ºæœé¦¬é”çš„èµ·å§‹å€¼å’Œè…³ä½</span>\n<span class=\"token keyword\">int</span> pos <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">int</span> servoPin <span class=\"token operator\">=</span> <span class=\"token number\">12</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token comment\">//WIFI</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span>ssid <span class=\"token operator\">=</span> <span class=\"token string\">\"---\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span>password <span class=\"token operator\">=</span> <span class=\"token string\">\"-----\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//å°‡ Web æœå‹™å™¨ç«¯å£è™Ÿè¨­ç½®ç‚º 80</span>\nWiFiServer <span class=\"token function\">server</span><span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token comment\">//ç”¨æ–¼å­˜å„² HTTP è«‹æ±‚çš„è®Šé‡</span>\nString header<span class=\"token punctuation\">;</span>\n \n<span class=\"token comment\">//è§£ç¢¼ HTTP GET å€¼</span>\nString valueString <span class=\"token operator\">=</span> <span class=\"token function\">String</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> pos1 <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> pos2 <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token comment\">// ç•¶ä¸‹çš„æ™‚é–“</span>\n<span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">long</span> currentTime <span class=\"token operator\">=</span> <span class=\"token function\">millis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ä¹‹å‰çš„æ™‚é–“</span>\n<span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">long</span> previousTime <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> \n<span class=\"token comment\">// è¶…æ™‚</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">long</span> timeoutTime <span class=\"token operator\">=</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">void</span> <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token number\">115200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//æŒ‡å®šä¼ºæœå™¨ä¸Šçš„pin</span>\n  myservo<span class=\"token punctuation\">.</span><span class=\"token function\">attach</span><span class=\"token punctuation\">(</span>servoPin<span class=\"token punctuation\">,</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2400</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//é€£æ¥wifi</span>\n  WiFi<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span>ssid<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>WiFi<span class=\"token punctuation\">.</span><span class=\"token function\">isConnected</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    Serial<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connected successful!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"IP: \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>WiFi<span class=\"token punctuation\">.</span><span class=\"token function\">localIP</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//é€£æ¥ä¼ºæœå™¨</span>\n  server<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n \n<span class=\"token keyword\">void</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token comment\">//ç›£è½å®¢æˆ¶ç«¯å‚³å…¥çš„è³‡æ–™</span>\n  WiFiClient client <span class=\"token operator\">=</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">available</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">//å¦‚æœæœ‰æ–°å®¢æˆ¶ç«¯é€£æ¥é€²ä¾†,</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n    currentTime <span class=\"token operator\">=</span> <span class=\"token function\">millis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    previousTime <span class=\"token operator\">=</span> currentTime<span class=\"token punctuation\">;</span>\n    Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"New Client.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     \n    <span class=\"token comment\">//è£½ä½œä¸€å€‹å­—ç¬¦ä¸²ä¾†ä¿å­˜ä¾†è‡ªå®¢æˆ¶ç«¯çš„å‚³å…¥æ•¸æ“š</span>\n    String currentLine <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">.</span><span class=\"token function\">connected</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>currentTime <span class=\"token operator\">-</span> previousTime <span class=\"token operator\">&lt;=</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n      currentTime <span class=\"token operator\">=</span> <span class=\"token function\">millis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">.</span><span class=\"token function\">available</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//å¦‚æœæœ‰å­—ç¯€è¦å¾å®¢æˆ¶ç«¯è®€å–ï¼Œ</span>\n        <span class=\"token keyword\">char</span> c <span class=\"token operator\">=</span> client<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//è®€å–å­—ç¯€</span>\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//å°åˆ°åºåˆ—ç›£æ¸¬çª—å£</span>\n        header <span class=\"token operator\">+=</span> c<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>c <span class=\"token operator\">==</span> <span class=\"token string\">'\\n'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//å¦‚æœå­—ç¯€æ˜¯æ›è¡Œç¬¦ //å¦‚æœç•¶å‰è¡Œç‚ºç©ºï¼Œå‰‡è¡¨ç¤ºä¸€è¡Œä¸­æœ‰å…©å€‹æ›è¡Œç¬¦ã€‚</span>\n          <span class=\"token comment\">//é€™æ˜¯å®¢æˆ¶ç«¯ HTTP è«‹æ±‚çš„çµæŸï¼Œå› æ­¤ç™¼é€éŸ¿æ‡‰ï¼š</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentLine<span class=\"token punctuation\">.</span><span class=\"token function\">length</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"HTTP/1.1 200 OK\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-type:text/html; charset=utf-8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connection: close\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">//æ¥ä¸‹ä¾†å°±æ˜¯é¡¯ç¤ºç¶²é </span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;!DOCTYPE html>&lt;html>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;head>&lt;meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\">\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;link rel=\\\"icon\\\" href=\\\"data:,\\\">\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;style>body &#123; text-align: center; font-family: \\\"Trebuchet MS\\\", Arial; margin-left:auto; margin-right:auto;&#125;\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".slider &#123; width: 300px; &#125;&lt;/style>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;script src=\\\"https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js\\\">&lt;/script>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                     \n            <span class=\"token comment\">// Web Page</span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;/head>&lt;body>&lt;h1>ESP32 æ§åˆ¶ä¼ºæœé¦¬é”ç·´ç¿’&lt;/h1>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;p>Position: &lt;span id=\\\"servoPos\\\">&lt;/span>&lt;/p>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>          \n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;input type=\\\"range\\\" min=\\\"0\\\" max=\\\"180\\\" class=\\\"slider\\\" id=\\\"servoSlider\\\" onchange=\\\"servo(this.value)\\\" value=\\\"\"</span><span class=\"token operator\">+</span>valueString<span class=\"token operator\">+</span><span class=\"token string\">\"\\\"/>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            \n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;script>var slider = document.getElementById(\\\"servoSlider\\\");\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"var servoP = document.getElementById(\\\"servoPos\\\"); servoP.innerHTML = slider.value;\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"slider.oninput = function() &#123; slider.value = this.value; servoP.innerHTML = this.value; &#125;\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"$.ajaxSetup(&#123;timeout:1000&#125;); function servo(pos) &#123; \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"$.get(\\\"/?value=\\\" \\+ pos + \\\"&amp;\\\"); &#123;Connection: close&#125;;&#125;&lt;/script>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           \n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;/body>&lt;/html>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">//GET /?value=180&amp; HTTP/1.1</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GET /?value=\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">>=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n              pos1 <span class=\"token operator\">=</span> header<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'='</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              pos2 <span class=\"token operator\">=</span> header<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'&amp;'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token comment\">//å–å¾—=å’Œ&amp;ä¹‹ä¸­çš„å­—ç¯€</span>\n              valueString <span class=\"token operator\">=</span> header<span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span>pos1<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> pos2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              \n              <span class=\"token comment\">//è½‰æ›æˆæ•´æ•¸å¾Œå‚³å…¥ä¼ºæœé¦¬é”ä»¤å…¶å‹•ä½œ</span>\n              myservo<span class=\"token punctuation\">.</span><span class=\"token function\">write</span><span class=\"token punctuation\">(</span>valueString<span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>valueString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n            <span class=\"token punctuation\">&#125;</span>         \n            <span class=\"token comment\">// The HTTP response ends with another blank line</span>\n            client<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//å¦‚æœæœ‰ä¸€å€‹æ›è¡Œç¬¦ï¼Œå°±æ¸…é™¤ currentLine</span>\n            currentLine <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>c <span class=\"token operator\">!=</span> <span class=\"token string\">'\\r'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">//å¦å‰‡å¦‚æœé™¤äº†enterä»¥å¤–é‚„æœ‰åˆ¥çš„å­—ä¸²,æŠŠå®ƒåŠ å…¥currentLineæœ«ç«¯</span>\n          currentLine <span class=\"token operator\">+=</span> c<span class=\"token punctuation\">;</span> \n        <span class=\"token punctuation\">&#125;</span>\n      <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token comment\">// å°‡headeræ¸…ç©º</span>\n    header <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// é—œé–‰é€£çµ</span>\n    client<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Client disconnected.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<div class=\"video-container\"><iframe src=\"https://www.youtube.com/embed/noDl7zL7hIM\" frameborder=\"0\" loading=\"lazy\" allowfullscreen></iframe></div>","categories":["esp32"],"tags":["servo","ä¼ºæœé¦¬é”","webserver"]}]